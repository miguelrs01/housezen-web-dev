function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t,r,n,a,i,s,o,l,u,c,d,h,f,p,m,g,y,v=globalThis,b={},x={},w=v.parcelRequire50c2;null==w&&((w=function(e){if(e in b)return b[e].exports;if(e in x){var t=x[e];delete x[e];var r={id:e,exports:{}};return b[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){x[e]=t},v.parcelRequire50c2=w);var k=w.register;k("8rWe0",function(t,r){e(t.exports,"Fragment",()=>n,e=>n=e),e(t.exports,"jsx",()=>a,e=>a=e),e(t.exports,"jsxs",()=>i,e=>i=e);var n,a,i,s=Symbol.for("react.transitional.element");function o(e,t,r){var n=null;if(void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return{$$typeof:s,type:e,key:n,ref:void 0!==(t=r.ref)?t:null,props:r}}n=Symbol.for("react.fragment"),a=o,i=o}),k("9Qu0I",function(t,r){e(t.exports,"Children",()=>n,e=>n=e),e(t.exports,"Component",()=>a,e=>a=e),e(t.exports,"Fragment",()=>i,e=>i=e),e(t.exports,"Profiler",()=>s,e=>s=e),e(t.exports,"PureComponent",()=>o,e=>o=e),e(t.exports,"StrictMode",()=>l,e=>l=e),e(t.exports,"Suspense",()=>u,e=>u=e),e(t.exports,"__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE",()=>c,e=>c=e),e(t.exports,"__COMPILER_RUNTIME",()=>d,e=>d=e),e(t.exports,"cache",()=>h,e=>h=e),e(t.exports,"cloneElement",()=>f,e=>f=e),e(t.exports,"createContext",()=>p,e=>p=e),e(t.exports,"createElement",()=>m,e=>m=e),e(t.exports,"createRef",()=>g,e=>g=e),e(t.exports,"forwardRef",()=>y,e=>y=e),e(t.exports,"isValidElement",()=>v,e=>v=e),e(t.exports,"lazy",()=>b,e=>b=e),e(t.exports,"memo",()=>x,e=>x=e),e(t.exports,"startTransition",()=>w,e=>w=e),e(t.exports,"unstable_useCacheRefresh",()=>k,e=>k=e),e(t.exports,"use",()=>E,e=>E=e),e(t.exports,"useActionState",()=>S,e=>S=e),e(t.exports,"useCallback",()=>N,e=>N=e),e(t.exports,"useContext",()=>_,e=>_=e),e(t.exports,"useDebugValue",()=>T,e=>T=e),e(t.exports,"useDeferredValue",()=>I,e=>I=e),e(t.exports,"useEffect",()=>C,e=>C=e),e(t.exports,"useId",()=>D,e=>D=e),e(t.exports,"useImperativeHandle",()=>A,e=>A=e),e(t.exports,"useInsertionEffect",()=>j,e=>j=e),e(t.exports,"useLayoutEffect",()=>P,e=>P=e),e(t.exports,"useMemo",()=>O,e=>O=e),e(t.exports,"useOptimistic",()=>R,e=>R=e),e(t.exports,"useReducer",()=>L,e=>L=e),e(t.exports,"useRef",()=>M,e=>M=e),e(t.exports,"useState",()=>U,e=>U=e),e(t.exports,"useSyncExternalStore",()=>F,e=>F=e),e(t.exports,"useTransition",()=>V,e=>V=e),e(t.exports,"version",()=>z,e=>z=e);var n,a,i,s,o,l,u,c,d,h,f,p,m,g,y,v,b,x,w,k,E,S,N,_,T,I,C,D,A,j,P,O,R,L,M,U,F,V,z,B=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),K=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),X=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Z=Symbol.iterator,ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},et=Object.assign,er={};function en(e,t,r){this.props=e,this.context=t,this.refs=er,this.updater=r||ee}function ea(){}function ei(e,t,r){this.props=e,this.context=t,this.refs=er,this.updater=r||ee}en.prototype.isReactComponent={},en.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},en.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},ea.prototype=en.prototype;var es=ei.prototype=new ea;es.constructor=ei,et(es,en.prototype),es.isPureReactComponent=!0;var eo=Array.isArray,el={H:null,A:null,T:null,S:null,V:null},eu=Object.prototype.hasOwnProperty;function ec(e,t,r,n,a,i){return{$$typeof:B,type:e,key:t,ref:void 0!==(r=i.ref)?r:null,props:i}}function ed(e){return"object"==typeof e&&null!==e&&e.$$typeof===B}var eh=/\/+/g;function ef(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function ep(){}function em(e,t,r){if(null==e)return e;var n=[],a=0;return!function e(t,r,n,a,i){var s,o,l,u=typeof t;("undefined"===u||"boolean"===u)&&(t=null);var c=!1;if(null===t)c=!0;else switch(u){case"bigint":case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case B:case H:c=!0;break;case J:return e((c=t._init)(t._payload),r,n,a,i)}}if(c)return i=i(t),c=""===a?"."+ef(t,0):a,eo(i)?(n="",null!=c&&(n=c.replace(eh,"$&/")+"/"),e(i,r,n,"",function(e){return e})):null!=i&&(ed(i)&&(s=i,o=n+(null==i.key||t&&t.key===i.key?"":(""+i.key).replace(eh,"$&/")+"/")+c,i=ec(s.type,o,void 0,void 0,void 0,s.props)),r.push(i)),1;c=0;var d=""===a?".":a+":";if(eo(t))for(var h=0;h<t.length;h++)u=d+ef(a=t[h],h),c+=e(a,r,n,u,i);else if("function"==typeof(h=null===(l=t)||"object"!=typeof l?null:"function"==typeof(l=Z&&l[Z]||l["@@iterator"])?l:null))for(t=h.call(t),h=0;!(a=t.next()).done;)u=d+ef(a=a.value,h++),c+=e(a,r,n,u,i);else if("object"===u){if("function"==typeof t.then)return e(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(ep,ep):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(t),r,n,a,i);throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return c}(e,n,"","",function(e){return t.call(r,e,a++)}),n}function eg(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var ey="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}console.error(e)};function ev(){}n={map:em,forEach:function(e,t,r){em(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return em(e,function(){t++}),t},toArray:function(e){return em(e,function(e){return e})||[]},only:function(e){if(!ed(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},a=en,i=q,s=W,o=ei,l=$,u=Y,c=el,d={__proto__:null,c:function(e){return el.H.useMemoCache(e)}},h=function(e){return function(){return e.apply(null,arguments)}},f=function(e,t,r){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var n=et({},e.props),a=e.key,i=void 0;if(null!=t)for(s in void 0!==t.ref&&(i=void 0),void 0!==t.key&&(a=""+t.key),t)eu.call(t,s)&&"key"!==s&&"__self"!==s&&"__source"!==s&&("ref"!==s||void 0!==t.ref)&&(n[s]=t[s]);var s=arguments.length-2;if(1===s)n.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];n.children=o}return ec(e.type,a,void 0,void 0,i,n)},p=function(e){return(e={$$typeof:K,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:G,_context:e},e},m=function(e,t,r){var n,a={},i=null;if(null!=t)for(n in void 0!==t.key&&(i=""+t.key),t)eu.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(a[n]=t[n]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var o=Array(s),l=0;l<s;l++)o[l]=arguments[l+2];a.children=o}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===a[n]&&(a[n]=s[n]);return ec(e,i,void 0,void 0,null,a)},g=function(){return{current:null}},y=function(e){return{$$typeof:Q,render:e}},v=ed,b=function(e){return{$$typeof:J,_payload:{_status:-1,_result:e},_init:eg}},x=function(e,t){return{$$typeof:X,type:e,compare:void 0===t?null:t}},w=function(e){var t=el.T,r={};el.T=r;try{var n=e(),a=el.S;null!==a&&a(r,n),"object"==typeof n&&null!==n&&"function"==typeof n.then&&n.then(ev,ey)}catch(e){ey(e)}finally{el.T=t}},k=function(){return el.H.useCacheRefresh()},E=function(e){return el.H.use(e)},S=function(e,t,r){return el.H.useActionState(e,t,r)},N=function(e,t){return el.H.useCallback(e,t)},_=function(e){return el.H.useContext(e)},T=function(){},I=function(e,t){return el.H.useDeferredValue(e,t)},C=function(e,t,r){var n=el.H;if("function"==typeof r)throw Error("useEffect CRUD overload is not enabled in this build of React.");return n.useEffect(e,t)},D=function(){return el.H.useId()},A=function(e,t,r){return el.H.useImperativeHandle(e,t,r)},j=function(e,t){return el.H.useInsertionEffect(e,t)},P=function(e,t){return el.H.useLayoutEffect(e,t)},O=function(e,t){return el.H.useMemo(e,t)},R=function(e,t){return el.H.useOptimistic(e,t)},L=function(e,t,r){return el.H.useReducer(e,t,r)},M=function(e){return el.H.useRef(e)},U=function(e){return el.H.useState(e)},F=function(e,t,r){return el.H.useSyncExternalStore(e,t,r)},V=function(){return el.H.useTransition()},z="19.1.1"}),k("iWoMt",function(t,r){e(t.exports,"createRoot",()=>tR,e=>tR=e),e(t.exports,"hydrateRoot",()=>tL,e=>tL=e),e(t.exports,"version",()=>tM,e=>tM=e);var n,a=w("fO90s"),i=w("acw62"),s=w("1u0KT");function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function u(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(r=t.return),e=t.return;while(e)}return 3===t.tag?r:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function d(e){if(u(e)!==e)throw Error(o(188))}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var I=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var D=Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=D&&e[D]||e["@@iterator"])?e:null}var j=Symbol.for("react.client.reference"),P=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],U=-1;function F(e){return{current:e}}function V(e){0>U||(e.current=M[U],M[U]=null,U--)}function z(e,t){M[++U]=e.current,e.current=t}var B=F(null),H=F(null),q=F(null),$=F(null);function W(e,t){switch(z(q,t),z(H,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?uc(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ud(t=uc(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(B),z(B,e)}function G(){V(B),V(H),V(q)}function K(e){null!==e.memoizedState&&z($,e);var t=B.current,r=ud(t,e.type);t!==r&&(z(H,e),z(B,r))}function Q(e){H.current===e&&(V(B),V(H)),$.current===e&&(V($),u0._currentValue=L)}var Y=Object.prototype.hasOwnProperty,X=a.unstable_scheduleCallback,J=a.unstable_cancelCallback,Z=a.unstable_shouldYield,ee=a.unstable_requestPaint,et=a.unstable_now,er=a.unstable_getCurrentPriorityLevel,en=a.unstable_ImmediatePriority,ea=a.unstable_UserBlockingPriority,ei=a.unstable_NormalPriority,es=a.unstable_LowPriority,eo=a.unstable_IdlePriority,el=a.log,eu=a.unstable_setDisableYieldValue,ec=null,ed=null;function eh(e){if("function"==typeof el&&eu(e),ed&&"function"==typeof ed.setStrictMode)try{ed.setStrictMode(ec,e)}catch(e){}}var ef=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(ep(e)/em|0)|0},ep=Math.log,em=Math.LN2,eg=256,ey=4194304;function ev(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function eb(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var a=0,i=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=0x7ffffff&n;return 0!==o?0!=(n=o&~i)?a=ev(n):0!=(s&=o)?a=ev(s):r||0!=(r=o&~e)&&(a=ev(r)):0!=(o=n&~i)?a=ev(o):0!==s?a=ev(s):r||0!=(r=n&~e)&&(a=ev(r)),0===a?0:0!==t&&t!==a&&0==(t&i)&&((i=a&-a)>=(r=t&-t)||32===i&&0!=(4194048&r))?t:a}function ex(e,t){return 0==(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ew(){var e=eg;return 0==(4194048&(eg<<=1))&&(eg=256),e}function ek(){var e=ey;return 0==(0x3c00000&(ey<<=1))&&(ey=4194304),e}function eE(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function eS(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function eN(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-ef(t);e.entangledLanes|=t,e.entanglements[n]=0x40000000|e.entanglements[n]|4194090&r}function e_(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ef(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}function eT(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:e=128;break;case 0x10000000:e=0x8000000;break;default:e=0}return e}function eI(e){return 2<(e&=-e)?8<e?0!=(0x7ffffff&e)?32:0x10000000:8:2}function eC(){var e=R.p;return 0!==e?e:void 0===(e=window.event)?32:ca(e.type)}var eD=Math.random().toString(36).slice(2),eA="__reactFiber$"+eD,ej="__reactProps$"+eD,eP="__reactContainer$"+eD,eO="__reactEvents$"+eD,eR="__reactListeners$"+eD,eL="__reactHandles$"+eD,eM="__reactResources$"+eD,eU="__reactMarker$"+eD;function eF(e){delete e[eA],delete e[ej],delete e[eO],delete e[eR],delete e[eL]}function eV(e){var t=e[eA];if(t)return t;for(var r=e.parentNode;r;){if(t=r[eP]||r[eA]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=uN(e);null!==e;){if(r=e[eA])return r;e=uN(e)}return t}r=(e=r).parentNode}return null}function ez(e){if(e=e[eA]||e[eP]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function eB(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function eH(e){var t=e[eM];return t||(t=e[eM]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function eq(e){e[eU]=!0}var e$=new Set,eW={};function eG(e,t){eK(e,t),eK(e+"Capture",t)}function eK(e,t){for(eW[e]=t,e=0;e<t.length;e++)e$.add(t[e])}var eQ=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),eY={},eX={};function eJ(e,t,r){if(Y.call(eX,t)||!Y.call(eY,t)&&(eQ.test(t)?eX[t]=!0:(eY[t]=!0,!1)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function eZ(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function e0(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+n)}}function e1(e){if(void 0===tU)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);tU=t&&t[1]||"",tF=-1<e.stack.indexOf("\n    at")?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+tU+e+tF}var e2=!1;function e5(e,t){if(!e||e2)return"";e2=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(e){var n=e}Reflect.construct(e,[],r)}else{try{r.call()}catch(e){n=e}e.call(r.prototype)}}else{try{throw Error()}catch(e){n=e}(r=e())&&"function"==typeof r.catch&&r.catch(function(){})}}catch(e){if(e&&n&&"string"==typeof e.stack)return[e.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var a=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");a&&a.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=n.DetermineComponentFrameRoot(),s=i[0],o=i[1];if(s&&o){var l=s.split("\n"),u=o.split("\n");for(a=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;a<u.length&&!u[a].includes("DetermineComponentFrameRoot");)a++;if(n===l.length||a===u.length)for(n=l.length-1,a=u.length-1;1<=n&&0<=a&&l[n]!==u[a];)a--;for(;1<=n&&0<=a;n--,a--)if(l[n]!==u[a]){if(1!==n||1!==a)do if(n--,a--,0>a||l[n]!==u[a]){var c="\n"+l[n].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=n&&0<=a)break}}}finally{e2=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?e1(r):""}function e3(e){try{var t="";do t+=function(e){switch(e.tag){case 26:case 27:case 5:return e1(e.type);case 16:return e1("Lazy");case 13:return e1("Suspense");case 19:return e1("SuspenseList");case 0:case 15:return e5(e.type,!1);case 11:return e5(e.type.render,!1);case 1:return e5(e.type,!0);case 31:return e1("Activity");default:return""}}(e),e=e.return;while(e)return t}catch(e){return"\nError generating stack: "+e.message+"\n"+e.stack}}function e4(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function e6(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function e8(e){e._valueTracker||(e._valueTracker=function(e){var t=e6(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function e7(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=e6(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function e9(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var te=/[\n"\\]/g;function tt(e){return e.replace(te,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function tr(e,t,r,n,a,i,s,o){e.name="",null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.type=s:e.removeAttribute("type"),null!=t?"number"===s?(0===t&&""===e.value||e.value!=t)&&(e.value=""+e4(t)):e.value!==""+e4(t)&&(e.value=""+e4(t)):"submit"!==s&&"reset"!==s||e.removeAttribute("value"),null!=t?ta(e,s,e4(t)):null!=r?ta(e,s,e4(r)):null!=n&&e.removeAttribute("value"),null==a&&null!=i&&(e.defaultChecked=!!i),null!=a&&(e.checked=a&&"function"!=typeof a&&"symbol"!=typeof a),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+e4(o):e.removeAttribute("name")}function tn(e,t,r,n,a,i,s,o){if(null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.type=i),null!=t||null!=r){if(("submit"===i||"reset"===i)&&null==t)return;r=null!=r?""+e4(r):"",t=null!=t?""+e4(t):r,o||t===e.value||(e.value=t),e.defaultValue=t}n="function"!=typeof(n=null!=n?n:a)&&"symbol"!=typeof n&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s&&(e.name=s)}function ta(e,t,r){"number"===t&&e9(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function ti(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(a=0,r=""+e4(r),t=null;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ts(e,t,r){if(null!=t&&((t=""+e4(t))!==e.value&&(e.value=t),null==r)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=null!=r?""+e4(r):""}function to(e,t,r,n){if(null==t){if(null!=n){if(null!=r)throw Error(o(92));if(P(n)){if(1<n.length)throw Error(o(93));n=n[0]}r=n}null==r&&(r=""),t=r}e.defaultValue=r=e4(t),(n=e.textContent)===r&&""!==n&&null!==n&&(e.value=n)}function tl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType){r.nodeValue=t;return}}e.textContent=t}var tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tc(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"==typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!=typeof r||0===r||tu.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function td(e,t,r){if(null!=t&&"object"!=typeof t)throw Error(o(62));if(e=e.style,null!=r){for(var n in r)!r.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var a in t)n=t[a],t.hasOwnProperty(a)&&r[a]!==n&&tc(e,a,n)}else for(var i in t)t.hasOwnProperty(i)&&tc(e,i,t[i])}function th(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tm(e){return tp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var tg=null;function ty(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var tv=null,tb=null;function tx(e){var t=ez(e);if(t&&(e=t.stateNode)){var r=e[ej]||null;switch(e=t.stateNode,t.type){case"input":if(tr(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+tt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=n[ej]||null;if(!a)throw Error(o(90));tr(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(n=r[t]).form===e.form&&e7(n)}break;case"textarea":ts(e,r.value,r.defaultValue);break;case"select":null!=(t=r.value)&&ti(e,!!r.multiple,t,!1)}}}var tw=!1;function tk(e,t,r){if(tw)return e(t,r);tw=!0;try{return e(t)}finally{if(tw=!1,(null!==tv||null!==tb)&&(li(),tv&&(t=tv,e=tb,tb=tv=null,tx(t),e)))for(t=0;t<e.length;t++)tx(e[t])}}function tE(e,t){var r=e.stateNode;if(null===r)return null;var n=r[ej]||null;if(null===n)return null;switch(r=n[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n="button"!==(e=e.type)&&"input"!==e&&"select"!==e&&"textarea"!==e),e=!n;break;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(o(231,t,typeof r));return r}var tS="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,tN=!1;if(tS)try{var t_={};Object.defineProperty(t_,"passive",{get:function(){tN=!0}}),window.addEventListener("test",t_,t_),window.removeEventListener("test",t_,t_)}catch(e){tN=!1}var tT=null,tI=null,tC=null;function tD(){if(tC)return tC;var e,t,r=tI,n=r.length,a="value"in tT?tT.value:tT.textContent,i=a.length;for(e=0;e<n&&r[e]===a[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===a[i-t];t++);return tC=a.slice(e,1<t?1-t:void 0)}function tA(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tj(){return!0}function tP(){return!1}function tO(e){function t(t,r,n,a,i){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?tj:tP,this.isPropagationStopped=tP,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tj)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tj)},persist:function(){},isPersistent:tj}),t}var tR,tL,tM,tU,tF,tV,tz,tB,tH={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tq=tO(tH),t$=h({},tH,{view:0,detail:0}),tW=tO(t$),tG=h({},t$,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t3,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==tB&&(tB&&"mousemove"===e.type?(tV=e.screenX-tB.screenX,tz=e.screenY-tB.screenY):tz=tV=0,tB=e),tV)},movementY:function(e){return"movementY"in e?e.movementY:tz}}),tK=tO(tG),tQ=tO(h({},tG,{dataTransfer:0})),tY=tO(h({},t$,{relatedTarget:0})),tX=tO(h({},tH,{animationName:0,elapsedTime:0,pseudoElement:0})),tJ=tO(h({},tH,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),tZ=tO(h({},tH,{data:0})),t0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},t1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=t2[e])&&!!t[e]}function t3(){return t5}var t4=tO(h({},t$,{key:function(e){if(e.key){var t=t0[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tA(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?t1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t3,charCode:function(e){return"keypress"===e.type?tA(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tA(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),t6=tO(h({},tG,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),t8=tO(h({},t$,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t3})),t7=tO(h({},tH,{propertyName:0,elapsedTime:0,pseudoElement:0})),t9=tO(h({},tG,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),re=tO(h({},tH,{newState:0,oldState:0})),rt=[9,13,27,32],rr=tS&&"CompositionEvent"in window,rn=null;tS&&"documentMode"in document&&(rn=document.documentMode);var ra=tS&&"TextEvent"in window&&!rn,ri=tS&&(!rr||rn&&8<rn&&11>=rn),rs=!1;function ro(e,t){switch(e){case"keyup":return -1!==rt.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rl(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ru=!1,rc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!rc[e.type]:"textarea"===t}function rh(e,t,r,n){tv?tb?tb.push(n):tb=[n]:tv=n,0<(t=l6(t,"onChange")).length&&(r=new tq("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var rf=null,rp=null;function rm(e){lJ(e,0)}function rg(e){if(e7(eB(e)))return e}function ry(e,t){if("change"===e)return t}var rv=!1;if(tS){if(tS){var rb="oninput"in document;if(!rb){var rx=document.createElement("div");rx.setAttribute("oninput","return;"),rb="function"==typeof rx.oninput}n=rb}else n=!1;rv=n&&(!document.documentMode||9<document.documentMode)}function rw(){rf&&(rf.detachEvent("onpropertychange",rk),rp=rf=null)}function rk(e){if("value"===e.propertyName&&rg(rp)){var t=[];rh(t,rp,e,ty(e)),tk(rm,t)}}function rE(e,t,r){"focusin"===e?(rw(),rf=t,rp=r,rf.attachEvent("onpropertychange",rk)):"focusout"===e&&rw()}function rS(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return rg(rp)}function rN(e,t){if("click"===e)return rg(t)}function r_(e,t){if("input"===e||"change"===e)return rg(t)}var rT="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function rI(e,t){if(rT(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Y.call(t,a)||!rT(e[a],t[a]))return!1}return!0}function rC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rD(e,t){var r,n=rC(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rC(n)}}function rA(e){e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;for(var t=e9(e.document);t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(r)e=t.contentWindow;else break;t=e9(e.document)}return t}function rj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rP=tS&&"documentMode"in document&&11>=document.documentMode,rO=null,rR=null,rL=null,rM=!1;function rU(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;rM||null==rO||rO!==e9(n)||(n="selectionStart"in(n=rO)&&rj(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},rL&&rI(rL,n)||(rL=n,0<(n=l6(rR,"onSelect")).length&&(t=new tq("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=rO)))}function rF(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var rV={animationend:rF("Animation","AnimationEnd"),animationiteration:rF("Animation","AnimationIteration"),animationstart:rF("Animation","AnimationStart"),transitionrun:rF("Transition","TransitionRun"),transitionstart:rF("Transition","TransitionStart"),transitioncancel:rF("Transition","TransitionCancel"),transitionend:rF("Transition","TransitionEnd")},rz={},rB={};function rH(e){if(rz[e])return rz[e];if(!rV[e])return e;var t,r=rV[e];for(t in r)if(r.hasOwnProperty(t)&&t in rB)return rz[e]=r[t];return e}tS&&(rB=document.createElement("div").style,"AnimationEvent"in window||(delete rV.animationend.animation,delete rV.animationiteration.animation,delete rV.animationstart.animation),"TransitionEvent"in window||delete rV.transitionend.transition);var rq=rH("animationend"),r$=rH("animationiteration"),rW=rH("animationstart"),rG=rH("transitionrun"),rK=rH("transitionstart"),rQ=rH("transitioncancel"),rY=rH("transitionend"),rX=new Map,rJ="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rZ(e,t){rX.set(e,t),eG(t,[e])}rJ.push("scrollEnd");var r0=new WeakMap;function r1(e,t){if("object"==typeof e&&null!==e){var r=r0.get(e);return void 0!==r?r:(t={value:e,source:t,stack:e3(t)},r0.set(e,t),t)}return{value:e,source:t,stack:e3(t)}}var r2=[],r5=0,r3=0;function r4(){for(var e=r5,t=r3=r5=0;t<e;){var r=r2[t];r2[t++]=null;var n=r2[t];r2[t++]=null;var a=r2[t];r2[t++]=null;var i=r2[t];if(r2[t++]=null,null!==n&&null!==a){var s=n.pending;null===s?a.next=a:(a.next=s.next,s.next=a),n.pending=a}0!==i&&r9(r,a,i)}}function r6(e,t,r,n){r2[r5++]=e,r2[r5++]=t,r2[r5++]=r,r2[r5++]=n,r3|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function r8(e,t,r,n){return r6(e,t,r,n),ne(e)}function r7(e,t){return r6(e,null,null,t),ne(e)}function r9(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var a=!1,i=e.return;null!==i;)i.childLanes|=r,null!==(n=i.alternate)&&(n.childLanes|=r),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(a=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,a&&null!==t&&(a=31-ef(r),null===(n=(e=i.hiddenUpdates)[a])?e[a]=[t]:n.push(t),t.lane=0x20000000|r),i):null}function ne(e){if(50<o8)throw o8=0,o7=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var nt={};function nr(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(e,t,r,n){return new nr(e,t,r,n)}function na(e){return!(!(e=e.prototype)||!e.isReactComponent)}function ni(e,t){var r=e.alternate;return null===r?((r=nn(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=0x3e00000&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function ns(e,t){e.flags&=0x3e00002;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,e.dependencies=null===(t=r.dependencies)?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function no(e,t,r,n,a,i){var s=0;if(n=e,"function"==typeof e)na(e)&&(s=1);else if("string"==typeof e)s=!function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;if("stylesheet"===t.rel)return e=t.disabled,"string"==typeof t.precedence&&null==e;return!0;case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,r,B.current)?"html"===e||"head"===e||"body"===e?27:5:26;else e:switch(e){case I:return(e=nn(31,r,t,a)).elementType=I,e.lanes=i,e;case g:return nl(r.children,a,i,t);case y:s=8,a|=24;break;case v:return(e=nn(12,r,t,2|a)).elementType=v,e.lanes=i,e;case S:return(e=nn(13,r,t,a)).elementType=S,e.lanes=i,e;case N:return(e=nn(19,r,t,a)).elementType=N,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case b:case k:s=10;break e;case x:s=9;break e;case E:s=11;break e;case _:s=14;break e;case T:s=16,n=null;break e}s=29,r=Error(o(130,null===e?"null":typeof e,"")),n=null}return(t=nn(s,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function nl(e,t,r,n){return(e=nn(7,e,n,t)).lanes=r,e}function nu(e,t,r){return(e=nn(6,e,null,t)).lanes=r,e}function nc(e,t,r){return(t=nn(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var nd=[],nh=0,nf=null,np=0,nm=[],ng=0,ny=null,nv=1,nb="";function nx(e,t){nd[nh++]=np,nd[nh++]=nf,nf=e,np=t}function nw(e,t,r){nm[ng++]=nv,nm[ng++]=nb,nm[ng++]=ny,ny=e;var n=nv;e=nb;var a=32-ef(n)-1;n&=~(1<<a),r+=1;var i=32-ef(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,nv=1<<32-ef(t)+a|r<<a|n,nb=i+e}else nv=1<<i|r<<a|n,nb=e}function nk(e){null!==e.return&&(nx(e,1),nw(e,1,0))}function nE(e){for(;e===nf;)nf=nd[--nh],nd[nh]=null,np=nd[--nh],nd[nh]=null;for(;e===ny;)ny=nm[--ng],nm[ng]=null,nb=nm[--ng],nm[ng]=null,nv=nm[--ng],nm[ng]=null}var nS=null,nN=null,n_=!1,nT=null,nI=!1,nC=Error(o(519));function nD(e){throw nL(r1(Error(o(418,"")),e)),nC}function nA(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[eA]=e,t[ej]=n,r){case"dialog":lZ("cancel",t),lZ("close",t);break;case"iframe":case"object":case"embed":lZ("load",t);break;case"video":case"audio":for(r=0;r<lY.length;r++)lZ(lY[r],t);break;case"source":lZ("error",t);break;case"img":case"image":case"link":lZ("error",t),lZ("load",t);break;case"details":lZ("toggle",t);break;case"input":lZ("invalid",t),tn(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),e8(t);break;case"select":lZ("invalid",t);break;case"textarea":lZ("invalid",t),to(t,n.value,n.defaultValue,n.children),e8(t)}"string"!=typeof(r=n.children)&&"number"!=typeof r&&"bigint"!=typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||ur(t.textContent,r)?(null!=n.popover&&(lZ("beforetoggle",t),lZ("toggle",t)),null!=n.onScroll&&lZ("scroll",t),null!=n.onScrollEnd&&lZ("scrollend",t),null!=n.onClick&&(t.onclick=un),t=!0):t=!1,t||nD(e)}function nj(e){for(nS=e.return;nS;)switch(nS.tag){case 5:case 13:nI=!1;return;case 27:case 3:nI=!0;return;default:nS=nS.return}}function nP(e){if(e!==nS)return!1;if(!n_)return nj(e),n_=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t="form"===(t=e.type)||"button"===t||uh(e.type,e.memoizedProps)),t=!t),t&&nN&&nD(e),nj(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(r=0,e=e.nextSibling;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===r){nN=uE(e.nextSibling);break e}r--}else"$"!==t&&"$!"!==t&&"$?"!==t||r++;e=e.nextSibling}nN=null}}else 27===r?(r=nN,ub(e.type)?(e=uS,uS=null,nN=e):nN=r):nN=nS?uE(e.stateNode.nextSibling):null;return!0}function nO(){nN=nS=null,n_=!1}function nR(){var e=nT;return null!==e&&(null===oK?oK=e:oK.push.apply(oK,e),nT=null),e}function nL(e){null===nT?nT=[e]:nT.push(e)}var nM=F(null),nU=null,nF=null;function nV(e,t,r){z(nM,t._currentValue),t._currentValue=r}function nz(e){e._currentValue=nM.current,V(nM)}function nB(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function nH(e,t,r,n){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var s=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var u=0;u<t.length;u++)if(l.context===t[u]){i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),nB(i.return,r,e),n||(s=null);break e}i=l.next}}else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(i=s.alternate)&&(i.lanes|=r),nB(s,r,e),s=null}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===e){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}}function nq(e,t,r,n){e=null;for(var a=t,i=!1;null!==a;){if(!i){if(0!=(524288&a.flags))i=!0;else if(0!=(262144&a.flags))break}if(10===a.tag){var s=a.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=a.type;rT(a.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(a===$.current){if(null===(s=a.alternate))throw Error(o(387));s.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(u0):e=[u0])}a=a.return}null!==e&&nH(t,e,r,n),t.flags|=262144}function n$(e){for(e=e.firstContext;null!==e;){if(!rT(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function nW(e){nU=e,nF=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function nG(e){return nQ(nU,e)}function nK(e,t){return null===nU&&nW(e),nQ(e,t)}function nQ(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===nF){if(null===e)throw Error(o(308));nF=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else nF=nF.next=t;return r}var nY="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},nX=a.unstable_scheduleCallback,nJ=a.unstable_NormalPriority,nZ={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function n0(){return{controller:new nY,data:new Map,refCount:0}}function n1(e){e.refCount--,0===e.refCount&&nX(nJ,function(){e.controller.abort()})}var n2=null,n5=0,n3=0,n4=null;function n6(){if(0==--n5&&null!==n2){null!==n4&&(n4.status="fulfilled");var e=n2;n2=null,n3=0,n4=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var n8=O.S;O.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===n2){var r=n2=[];n5=0,n3=l$(),n4={status:"pending",value:void 0,then:function(e){r.push(e)}}}n5++,t.then(n6,n6)}(0,t),null!==n8&&n8(e,t)};var n7=F(null);function n9(){var e=n7.current;return null!==e?e:oj.pooledCache}function ae(e,t){null===t?z(n7,n7.current):z(n7,t.pool)}function at(){var e=n9();return null===e?null:{parent:nZ._currentValue,pool:e}}var ar=Error(o(460)),an=Error(o(474)),aa=Error(o(542)),ai={then:function(){}};function as(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ao(){}function al(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(ao,ao),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw ad(e=t.reason),e;default:if("string"==typeof t.status)t.then(ao,ao);else{if(null!==(e=oj)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ad(e=t.reason),e}throw au=t,ar}}var au=null;function ac(){if(null===au)throw Error(o(459));var e=au;return au=null,e}function ad(e){if(e===ar||e===aa)throw Error(o(483))}var ah=!1;function af(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ap(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function am(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ag(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!=(2&oA)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,t=ne(e),r9(e,null,r),t}return r6(e,n,t,r),ne(e)}function ay(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194048&r))){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,e_(e,r)}}function av(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var s={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===i?a=i=s:i=i.next=s,r=r.next}while(null!==r)null===i?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,callbacks:n.callbacks},e.updateQueue=r;return}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var ab=!1;function ax(){if(ab){var e=n4;if(null!==e)throw e}}function aw(e,t,r,n){ab=!1;var a=e.updateQueue;ah=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?i=u:s.next=u,s=l;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==i){var d=a.baseState;for(s=0,c=u=l=null,o=i;;){var f=-0x20000001&o.lane,p=f!==o.lane;if(p?(oO&f)===f:(n&f)===f){0!==f&&f===n3&&(ab=!0),null!==c&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;switch(f=t,g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(r,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(f="function"==typeof(m=g.payload)?m.call(r,d,f):m))break e;d=h({},d,f);break e;case 2:ah=!0}}null!==(f=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=a.callbacks)?a.callbacks=[f]:p.push(f))}else p={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,s|=f;if(null===(o=o.next))if(null===(o=a.shared.pending))break;else o=(p=o).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}null===c&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null===i&&(a.shared.lanes=0),oB|=s,e.lanes=s,e.memoizedState=d}}function ak(e,t){if("function"!=typeof e)throw Error(o(191,e));e.call(t)}function aE(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)ak(r[e],t)}var aS=F(null),aN=F(0);function a_(e,t){z(aN,e=oV),z(aS,t),oV=e|t.baseLanes}function aT(){z(aN,oV),z(aS,aS.current)}function aI(){oV=aN.current,V(aS),V(aN)}var aC=0,aD=null,aA=null,aj=null,aP=!1,aO=!1,aR=!1,aL=0,aM=0,aU=null,aF=0;function aV(){throw Error(o(321))}function az(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rT(e[r],t[r]))return!1;return!0}function aB(e,t,r,n,a,i){return aC=i,aD=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?iY:iX,aR=!1,i=r(n,a),aR=!1,aO&&(i=aq(t,r,n,a)),aH(e),i}function aH(e){O.H=iQ;var t=null!==aA&&null!==aA.next;if(aC=0,aj=aA=aD=null,aP=!1,aM=0,aU=null,t)throw Error(o(300));null===e||sw||null!==(e=e.dependencies)&&n$(e)&&(sw=!0)}function aq(e,t,r,n){aD=e;var a=0;do{if(aO&&(aU=null),aM=0,aO=!1,25<=a)throw Error(o(301));if(a+=1,aj=aA=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}O.H=iJ,i=t(r,n)}while(aO)return i}function a$(){var e=O.H,t=e.useState()[0];return t="function"==typeof t.then?aJ(t):t,e=e.useState()[0],(null!==aA?aA.memoizedState:null)!==e&&(aD.flags|=1024),t}function aW(){var e=0!==aL;return aL=0,e}function aG(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function aK(e){if(aP){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}aP=!1}aC=0,aj=aA=aD=null,aO=!1,aM=aL=0,aU=null}function aQ(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===aj?aD.memoizedState=aj=e:aj=aj.next=e,aj}function aY(){if(null===aA){var e=aD.alternate;e=null!==e?e.memoizedState:null}else e=aA.next;var t=null===aj?aD.memoizedState:aj.next;if(null!==t)aj=t,aA=e;else{if(null===e){if(null===aD.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(aA=e).memoizedState,baseState:aA.baseState,baseQueue:aA.baseQueue,queue:aA.queue,next:null},null===aj?aD.memoizedState=aj=e:aj=aj.next=e}return aj}function aX(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function aJ(e){var t=aM;return aM+=1,null===aU&&(aU=[]),e=al(aU,e,t),t=aD,null===(null===aj?t.memoizedState:aj.next)&&(O.H=null===(t=t.alternate)||null===t.memoizedState?iY:iX),e}function aZ(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return aJ(e);if(e.$$typeof===k)return nG(e)}throw Error(o(438,String(e)))}function a0(e){var t=null,r=aD.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=aD.alternate;null!==n&&null!==(n=n.updateQueue)&&null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===r&&(r=aX(),aD.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=C;return t.index++,r}function a1(e,t){return"function"==typeof t?t(e):t}function a2(e){return a5(aY(),aA,e)}function a5(e,t,r){var n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=r;var a=e.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}t.baseQueue=a=i,n.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{t=a.next;var l=s=null,u=null,c=t,d=!1;do{var h=-0x20000001&c.lane;if(h!==c.lane?(oO&h)===h:(aC&h)===h){var f=c.revertLane;if(0===f)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),h===n3&&(d=!0);else if((aC&f)===f){c=c.next,f===n3&&(d=!0);continue}else h={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=h,s=i):u=u.next=h,aD.lanes|=f,oB|=f;h=c.action,aR&&r(i,h),i=c.hasEagerState?c.eagerState:r(i,h)}else f={lane:h,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=i):u=u.next=f,aD.lanes|=h,oB|=h;c=c.next}while(null!==c&&c!==t)if(null===u?s=i:u.next=l,!rT(i,e.memoizedState)&&(sw=!0,d&&null!==(r=n4)))throw r;e.memoizedState=i,e.baseState=s,e.baseQueue=u,n.lastRenderedState=i}return null===a&&(n.lanes=0),[e.memoizedState,n.dispatch]}function a3(e){var t=aY(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a)rT(i,t.memoizedState)||(sw=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function a4(e,t,r){var n=aD,a=aY(),i=n_;if(i){if(void 0===r)throw Error(o(407));r=r()}else r=t();var s=!rT((aA||a).memoizedState,r);if(s&&(a.memoizedState=r,sw=!0),a=a.queue,iw(2048,8,a7.bind(null,n,a,e),[e]),a.getSnapshot!==t||s||null!==aj&&1&aj.memoizedState.tag){if(n.flags|=2048,iy(9,iv(),a8.bind(null,n,a,r,t),null),null===oj)throw Error(o(349));i||0!=(124&aC)||a6(n,t,r)}return r}function a6(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=aD.updateQueue)?(t=aX(),aD.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function a8(e,t,r,n){t.value=r,t.getSnapshot=n,a9(t)&&ie(e)}function a7(e,t,r){return r(function(){a9(t)&&ie(e)})}function a9(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rT(e,r)}catch(e){return!0}}function ie(e){var t=r7(e,2);null!==t&&lt(t,e,2)}function it(e){var t=aQ();if("function"==typeof e){var r=e;if(e=r(),aR){eh(!0);try{r()}finally{eh(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a1,lastRenderedState:e},t}function ir(e,t,r,n){return e.baseState=r,a5(e,aA,"function"==typeof n?n:a1)}function ia(e,t,r,n,a){if(iW(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==O.T?r(!0):i.isTransition=!1,n(i),null===(r=t.pending)?(i.next=t.pending=i,ii(t,i)):(i.next=r.next,t.pending=r.next=i)}}function ii(e,t){var r=t.action,n=t.payload,a=e.state;if(t.isTransition){var i=O.T,s={};O.T=s;try{var o=r(a,n),l=O.S;null!==l&&l(s,o),is(e,t,o)}catch(r){il(e,t,r)}finally{O.T=i}}else try{i=r(a,n),is(e,t,i)}catch(r){il(e,t,r)}}function is(e,t,r){null!==r&&"object"==typeof r&&"function"==typeof r.then?r.then(function(r){io(e,t,r)},function(r){return il(e,t,r)}):io(e,t,r)}function io(e,t,r){t.status="fulfilled",t.value=r,iu(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,ii(e,r)))}function il(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do t.status="rejected",t.reason=r,iu(t),t=t.next;while(t!==n)}e.action=null}function iu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ic(e,t){return t}function id(e,t){if(n_){var r=oj.formState;if(null!==r){e:{var n=aD;if(n_){if(nN){t:{for(var a=nN,i=nI;8!==a.nodeType;)if(!i||null===(a=uE(a.nextSibling))){a=null;break t}a="F!"===(i=a.data)||"F"===i?a:null}if(a){nN=uE(a.nextSibling),n="F!"===a.data;break e}}nD(n)}n=!1}n&&(t=r[0])}}return(r=aQ()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ic,lastRenderedState:t},r.queue=n,r=iH.bind(null,aD,n),n.dispatch=r,n=it(!1),i=i$.bind(null,aD,!1,n.queue),n=aQ(),a={state:t,dispatch:null,action:e,pending:null},n.queue=a,r=ia.bind(null,aD,a,i,r),a.dispatch=r,n.memoizedState=e,[t,r,!1]}function ih(e){return ip(aY(),aA,e)}function ip(e,t,r){if(t=a5(e,t,ic)[0],e=a2(a1)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var n=aJ(t)}catch(e){if(e===ar)throw aa;throw e}else n=t;var a=(t=aY()).queue,i=a.dispatch;return r!==t.memoizedState&&(aD.flags|=2048,iy(9,iv(),im.bind(null,a,r),null)),[n,i,e]}function im(e,t){e.action=t}function ig(e){var t=aY(),r=aA;if(null!==r)return ip(t,r,e);aY(),t=t.memoizedState;var n=(r=aY()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function iy(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=aD.updateQueue)&&(t=aX(),aD.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function iv(){return{destroy:void 0,resource:void 0}}function ib(){return aY().memoizedState}function ix(e,t,r,n){var a=aQ();n=void 0===n?null:n,aD.flags|=e,a.memoizedState=iy(1|t,iv(),r,n)}function iw(e,t,r,n){var a=aY();n=void 0===n?null:n;var i=a.memoizedState.inst;null!==aA&&null!==n&&az(n,aA.memoizedState.deps)?a.memoizedState=iy(t,i,r,n):(aD.flags|=e,a.memoizedState=iy(1|t,i,r,n))}function ik(e,t){ix(8390656,8,e,t)}function iE(e,t){iw(2048,8,e,t)}function iS(e,t){return iw(4,2,e,t)}function iN(e,t){return iw(4,4,e,t)}function i_(e,t){if("function"==typeof t){var r=t(e=e());return function(){"function"==typeof r?r():t(null)}}if(null!=t)return t.current=e=e(),function(){t.current=null}}function iT(e,t,r){r=null!=r?r.concat([e]):null,iw(4,4,i_.bind(null,t,e),r)}function iI(){}function iC(e,t){var r=aY();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&az(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function iD(e,t){var r=aY();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&az(t,n[1]))return n[0];if(n=e(),aR){eh(!0);try{e()}finally{eh(!1)}}return r.memoizedState=[n,t],n}function iA(e,t,r){return void 0===r||0!=(0x40000000&aC)?e.memoizedState=t:(e.memoizedState=r,e=le(),aD.lanes|=e,oB|=e,r)}function ij(e,t,r,n){return rT(r,t)?r:null!==aS.current?(rT(e=iA(e,r,n),t)||(sw=!0),e):0==(42&aC)?(sw=!0,e.memoizedState=r):(e=le(),aD.lanes|=e,oB|=e,t)}function iP(e,t,r,n,a){var i=R.p;R.p=0!==i&&8>i?i:8;var s=O.T,o={};O.T=o,i$(e,!1,t,r);try{var l=a(),u=O.S;if(null!==u&&u(o,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var c,d,h=(c=[],d={status:"pending",value:null,reason:null,then:function(e){c.push(e)}},l.then(function(){d.status="fulfilled",d.value=n;for(var e=0;e<c.length;e++)(0,c[e])(n)},function(e){for(d.status="rejected",d.reason=e,e=0;e<c.length;e++)(0,c[e])(void 0)}),d);iq(e,t,h,o9(e))}else iq(e,t,n,o9(e))}catch(r){iq(e,t,{then:function(){},status:"rejected",reason:r},o9())}finally{R.p=i,O.T=s}}function iO(){}function iR(e,t,r,n){if(5!==e.tag)throw Error(o(476));var a=iL(e).queue;iP(e,a,t,L,null===r?iO:function(){return iM(e),r(n)})}function iL(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:a1,lastRenderedState:L},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:a1,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function iM(e){var t=iL(e).next.queue;iq(e,t,{},o9())}function iU(){return nG(u0)}function iF(){return aY().memoizedState}function iV(){return aY().memoizedState}function iz(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=o9(),n=ag(t,e=am(r),r);null!==n&&(lt(n,t,r),ay(n,t,r)),t={cache:n0()},e.payload=t;return}t=t.return}}function iB(e,t,r){var n=o9();r={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},iW(e)?iG(t,r):null!==(r=r8(e,t,r,n))&&(lt(r,e,n),iK(r,t,n))}function iH(e,t,r){iq(e,t,r,o9())}function iq(e,t,r,n){var a={lane:n,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(iW(e))iG(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,r);if(a.hasEagerState=!0,a.eagerState=o,rT(o,s))return r6(e,t,a,0),null===oj&&r4(),!1}catch(e){}finally{}if(null!==(r=r8(e,t,a,n)))return lt(r,e,n),iK(r,t,n),!0}return!1}function i$(e,t,r,n){if(n={lane:2,revertLane:l$(),action:n,hasEagerState:!1,eagerState:null,next:null},iW(e)){if(t)throw Error(o(479))}else null!==(t=r8(e,r,n,2))&&lt(t,e,2)}function iW(e){var t=e.alternate;return e===aD||null!==t&&t===aD}function iG(e,t){aO=aP=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function iK(e,t,r){if(0!=(4194048&r)){var n=t.lanes;n&=e.pendingLanes,t.lanes=r|=n,e_(e,r)}}var iQ={readContext:nG,use:aZ,useCallback:aV,useContext:aV,useEffect:aV,useImperativeHandle:aV,useLayoutEffect:aV,useInsertionEffect:aV,useMemo:aV,useReducer:aV,useRef:aV,useState:aV,useDebugValue:aV,useDeferredValue:aV,useTransition:aV,useSyncExternalStore:aV,useId:aV,useHostTransitionStatus:aV,useFormState:aV,useActionState:aV,useOptimistic:aV,useMemoCache:aV,useCacheRefresh:aV},iY={readContext:nG,use:aZ,useCallback:function(e,t){return aQ().memoizedState=[e,void 0===t?null:t],e},useContext:nG,useEffect:ik,useImperativeHandle:function(e,t,r){r=null!=r?r.concat([e]):null,ix(4194308,4,i_.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ix(4194308,4,e,t)},useInsertionEffect:function(e,t){ix(4,2,e,t)},useMemo:function(e,t){var r=aQ();t=void 0===t?null:t;var n=e();if(aR){eh(!0);try{e()}finally{eh(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=aQ();if(void 0!==r){var a=r(t);if(aR){eh(!0);try{r(t)}finally{eh(!1)}}}else a=t;return n.memoizedState=n.baseState=a,n.queue=e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:a},e=e.dispatch=iB.bind(null,aD,e),[n.memoizedState,e]},useRef:function(e){return aQ().memoizedState=e={current:e}},useState:function(e){var t=(e=it(e)).queue,r=iH.bind(null,aD,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:iI,useDeferredValue:function(e,t){return iA(aQ(),e,t)},useTransition:function(){var e=it(!1);return e=iP.bind(null,aD,e.queue,!0,!1),aQ().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=aD,a=aQ();if(n_){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===oj)throw Error(o(349));0!=(124&oO)||a6(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,ik(a7.bind(null,n,i,e),[e]),n.flags|=2048,iy(9,iv(),a8.bind(null,n,i,r,t),null),r},useId:function(){var e=aQ(),t=oj.identifierPrefix;if(n_){var r=nb,n=nv;t="«"+t+"R"+(r=(n&~(1<<32-ef(n)-1)).toString(32)+r),0<(r=aL++)&&(t+="H"+r.toString(32)),t+="»"}else t="«"+t+"r"+(r=aF++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:iU,useFormState:id,useActionState:id,useOptimistic:function(e){var t=aQ();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=i$.bind(null,aD,!0,r),r.dispatch=t,[e,t]},useMemoCache:a0,useCacheRefresh:function(){return aQ().memoizedState=iz.bind(null,aD)}},iX={readContext:nG,use:aZ,useCallback:iC,useContext:nG,useEffect:iE,useImperativeHandle:iT,useInsertionEffect:iS,useLayoutEffect:iN,useMemo:iD,useReducer:a2,useRef:ib,useState:function(){return a2(a1)},useDebugValue:iI,useDeferredValue:function(e,t){return ij(aY(),aA.memoizedState,e,t)},useTransition:function(){var e=a2(a1)[0],t=aY().memoizedState;return["boolean"==typeof e?e:aJ(e),t]},useSyncExternalStore:a4,useId:iF,useHostTransitionStatus:iU,useFormState:ih,useActionState:ih,useOptimistic:function(e,t){return ir(aY(),aA,e,t)},useMemoCache:a0,useCacheRefresh:iV},iJ={readContext:nG,use:aZ,useCallback:iC,useContext:nG,useEffect:iE,useImperativeHandle:iT,useInsertionEffect:iS,useLayoutEffect:iN,useMemo:iD,useReducer:a3,useRef:ib,useState:function(){return a3(a1)},useDebugValue:iI,useDeferredValue:function(e,t){var r=aY();return null===aA?iA(r,e,t):ij(r,aA.memoizedState,e,t)},useTransition:function(){var e=a3(a1)[0],t=aY().memoizedState;return["boolean"==typeof e?e:aJ(e),t]},useSyncExternalStore:a4,useId:iF,useHostTransitionStatus:iU,useFormState:ig,useActionState:ig,useOptimistic:function(e,t){var r=aY();return null!==aA?ir(r,aA,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:a0,useCacheRefresh:iV},iZ=null,i0=0;function i1(e){var t=i0;return i0+=1,null===iZ&&(iZ=[]),al(iZ,e,t)}function i2(e,t){e.ref=void 0!==(t=t.props.ref)?t:null}function i5(e,t){if(t.$$typeof===f)throw Error(o(525));throw Error(o(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function i3(e){return(0,e._init)(e._payload)}function i4(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=ni(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return(t.index=n,e)?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=0x4000002,r):n:(t.flags|=0x4000002,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=0x4000002),t}function l(e,t,r,n){return null===t||6!==t.tag?(t=nu(r,e.mode,n)).return=e:(t=a(t,r)).return=e,t}function u(e,t,r,n){var i=r.type;return i===g?d(e,t,r.props.children,n,r.key):(null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===T&&i3(i)===t.type)?i2(t=a(t,r.props),r):i2(t=no(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?(t=nc(r,e.mode,n)).return=e:(t=a(t,r.children||[])).return=e,t}function d(e,t,r,n,i){return null===t||7!==t.tag?(t=nl(r,e.mode,n,i)).return=e:(t=a(t,r)).return=e,t}function h(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=nu(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case p:return i2(r=no(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case m:return(t=nc(t,e.mode,r)).return=e,t;case T:return h(e,t=(0,t._init)(t._payload),r)}if(P(t)||A(t))return(t=nl(t,e.mode,r,null)).return=e,t;if("function"==typeof t.then)return h(e,i1(t),r);if(t.$$typeof===k)return h(e,nK(e,t),r);i5(e,t)}return null}function f(e,t,r,n){var a=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return null!==a?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case p:return r.key===a?u(e,t,r,n):null;case m:return r.key===a?c(e,t,r,n):null;case T:return f(e,t,r=(a=r._init)(r._payload),n)}if(P(r)||A(r))return null!==a?null:d(e,t,r,n,null);if("function"==typeof r.then)return f(e,t,i1(r),n);if(r.$$typeof===k)return f(e,t,nK(e,r),n);i5(e,r)}return null}function y(e,t,r,n,a){if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return l(t,e=e.get(r)||null,""+n,a);if("object"==typeof n&&null!==n){switch(n.$$typeof){case p:return u(t,e=e.get(null===n.key?r:n.key)||null,n,a);case m:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case T:return y(e,t,r,n=(0,n._init)(n._payload),a)}if(P(n)||A(n))return d(t,e=e.get(r)||null,n,a,null);if("function"==typeof n.then)return y(e,t,r,i1(n),a);if(n.$$typeof===k)return y(e,t,r,nK(t,n),a);i5(t,n)}return null}return function(l,u,c,d){try{i0=0;var v=function l(u,c,d,v){if("object"==typeof d&&null!==d&&d.type===g&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case p:e:{for(var b=d.key;null!==c;){if(c.key===b){if((b=d.type)===g){if(7===c.tag){r(u,c.sibling),(v=a(c,d.props.children)).return=u,u=v;break e}}else if(c.elementType===b||"object"==typeof b&&null!==b&&b.$$typeof===T&&i3(b)===c.type){r(u,c.sibling),i2(v=a(c,d.props),d),v.return=u,u=v;break e}r(u,c);break}t(u,c),c=c.sibling}d.type===g?(v=nl(d.props.children,u.mode,v,d.key)).return=u:(i2(v=no(d.type,d.key,d.props,null,u.mode,v),d),v.return=u),u=v}return s(u);case m:e:{for(b=d.key;null!==c;){if(c.key===b)if(4===c.tag&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){r(u,c.sibling),(v=a(c,d.children||[])).return=u,u=v;break e}else{r(u,c);break}t(u,c),c=c.sibling}(v=nc(d,u.mode,v)).return=u,u=v}return s(u);case T:return l(u,c,d=(b=d._init)(d._payload),v)}if(P(d))return function(a,s,o,l){for(var u=null,c=null,d=s,p=s=0,m=null;null!==d&&p<o.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(a,d,o[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(a,d),s=i(g,s,p),null===c?u=g:c.sibling=g,c=g,d=m}if(p===o.length)return r(a,d),n_&&nx(a,p),u;if(null===d){for(;p<o.length;p++)null!==(d=h(a,o[p],l))&&(s=i(d,s,p),null===c?u=d:c.sibling=d,c=d);return n_&&nx(a,p),u}for(d=n(d);p<o.length;p++)null!==(m=y(d,a,p,o[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),s=i(m,s,p),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(a,e)}),n_&&nx(a,p),u}(u,c,d,v);if(A(d)){if("function"!=typeof(b=A(d)))throw Error(o(150));return function(a,s,l,u){if(null==l)throw Error(o(151));for(var c=null,d=null,p=s,m=s=0,g=null,v=l.next();null!==p&&!v.done;m++,v=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=f(a,p,v.value,u);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(a,p),s=i(b,s,m),null===d?c=b:d.sibling=b,d=b,p=g}if(v.done)return r(a,p),n_&&nx(a,m),c;if(null===p){for(;!v.done;m++,v=l.next())null!==(v=h(a,v.value,u))&&(s=i(v,s,m),null===d?c=v:d.sibling=v,d=v);return n_&&nx(a,m),c}for(p=n(p);!v.done;m++,v=l.next())null!==(v=y(p,a,m,v.value,u))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),s=i(v,s,m),null===d?c=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(a,e)}),n_&&nx(a,m),c}(u,c,d=b.call(d),v)}if("function"==typeof d.then)return l(u,c,i1(d),v);if(d.$$typeof===k)return l(u,c,nK(u,d),v);i5(u,d)}return"string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d?(d=""+d,null!==c&&6===c.tag?(r(u,c.sibling),(v=a(c,d)).return=u):(r(u,c),(v=nu(d,u.mode,v)).return=u),s(u=v)):r(u,c)}(l,u,c,d);return iZ=null,v}catch(e){if(e===ar||e===aa)throw e;var b=nn(29,e,null,l.mode);return b.lanes=d,b.return=l,b}finally{}}}var i6=i4(!0),i8=i4(!1),i7=F(null),i9=null;function se(e){var t=e.alternate;z(sa,1&sa.current),z(i7,e),null===i9&&(null===t||null!==aS.current?i9=e:null!==t.memoizedState&&(i9=e))}function st(e){if(22===e.tag){if(z(sa,sa.current),z(i7,e),null===i9){var t=e.alternate;null!==t&&null!==t.memoizedState&&(i9=e)}}else sr(e)}function sr(){z(sa,sa.current),z(i7,i7.current)}function sn(e){V(i7),i9===e&&(i9=null),V(sa)}var sa=F(0);function si(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||uk(r)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ss(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:h({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var so={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=o9(),a=am(n);a.payload=t,null!=r&&(a.callback=r),null!==(t=ag(e,a,n))&&(lt(t,e,n),ay(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=o9(),a=am(n);a.tag=1,a.payload=t,null!=r&&(a.callback=r),null!==(t=ag(e,a,n))&&(lt(t,e,n),ay(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=o9(),n=am(r);n.tag=2,null!=t&&(n.callback=t),null!==(t=ag(e,n,r))&&(lt(t,e,r),ay(t,e,r))}};function sl(e,t,r,n,a,i,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,s):!t.prototype||!t.prototype.isPureReactComponent||!rI(r,n)||!rI(a,i)}function su(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function sc(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var a in r===t&&(r=h({},r)),e)void 0===r[a]&&(r[a]=e[a]);return r}var sd="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}console.error(e)};function sh(e){sd(e)}function sf(e){console.error(e)}function sp(e){sd(e)}function sm(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function sg(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function sy(e,t,r){return(r=am(r)).tag=3,r.payload={element:null},r.callback=function(){sm(e,t)},r}function sv(e){return(e=am(e)).tag=3,e}function sb(e,t,r,n){var a=r.type.getDerivedStateFromError;if("function"==typeof a){var i=n.value;e.payload=function(){return a(i)},e.callback=function(){sg(t,r,n)}}var s=r.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(e.callback=function(){sg(t,r,n),"function"!=typeof a&&(null===oZ?oZ=new Set([this]):oZ.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var sx=Error(o(461)),sw=!1;function sk(e,t,r,n){t.child=null===e?i8(t,null,r,n):i6(t,e.child,r,n)}function sE(e,t,r,n,a){r=r.render;var i=t.ref;if("ref"in n){var s={};for(var o in n)"ref"!==o&&(s[o]=n[o])}else s=n;return(nW(t),n=aB(e,t,r,s,i,a),o=aW(),null===e||sw)?(n_&&o&&nk(t),t.flags|=1,sk(e,t,n,a),t.child):(aG(e,t,a),sH(e,t,a))}function sS(e,t,r,n,a){if(null===e){var i=r.type;return"function"!=typeof i||na(i)||void 0!==i.defaultProps||null!==r.compare?((e=no(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,sN(e,t,i,n,a))}if(i=e.child,!sq(e,a)){var s=i.memoizedProps;if((r=null!==(r=r.compare)?r:rI)(s,n)&&e.ref===t.ref)return sH(e,t,a)}return t.flags|=1,(e=ni(i,n)).ref=t.ref,e.return=t,t.child=e}function sN(e,t,r,n,a){if(null!==e){var i=e.memoizedProps;if(rI(i,n)&&e.ref===t.ref)if(sw=!1,t.pendingProps=n=i,!sq(e,a))return t.lanes=e.lanes,sH(e,t,a);else 0!=(131072&e.flags)&&(sw=!0)}return sC(e,t,r,n,a)}function s_(e,t,r){var n=t.pendingProps,a=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode){if(0!=(128&t.flags)){if(n=null!==i?i.baseLanes|r:r,null!==e){for(i=0,a=t.child=e.child;null!==a;)i=i|a.lanes|a.childLanes,a=a.sibling;t.childLanes=i&~n}else t.childLanes=0,t.child=null;return sT(e,t,n,r)}if(0==(0x20000000&r))return t.lanes=t.childLanes=0x20000000,sT(e,t,null!==i?i.baseLanes|r:r,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&ae(t,null!==i?i.cachePool:null),null!==i?a_(t,i):aT(),st(t)}else null!==i?(ae(t,i.cachePool),a_(t,i),sr(t),t.memoizedState=null):(null!==e&&ae(t,null),aT(),sr(t));return sk(e,t,a,r),t.child}function sT(e,t,r,n){var a=n9();return t.memoizedState={baseLanes:r,cachePool:a=null===a?null:{parent:nZ._currentValue,pool:a}},null!==e&&ae(t,null),aT(),st(t),null!==e&&nq(e,t,n,!0),null}function sI(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof r&&"object"!=typeof r)throw Error(o(284));(null===e||e.ref!==r)&&(t.flags|=4194816)}}function sC(e,t,r,n,a){return(nW(t),r=aB(e,t,r,n,void 0,a),n=aW(),null===e||sw)?(n_&&n&&nk(t),t.flags|=1,sk(e,t,r,a),t.child):(aG(e,t,a),sH(e,t,a))}function sD(e,t,r,n,a,i){return(nW(t),t.updateQueue=null,r=aq(t,n,r,a),aH(e),n=aW(),null===e||sw)?(n_&&n&&nk(t),t.flags|=1,sk(e,t,r,i),t.child):(aG(e,t,i),sH(e,t,i))}function sA(e,t,r,n,a){if(nW(t),null===t.stateNode){var i=nt,s=r.contextType;"object"==typeof s&&null!==s&&(i=nG(s)),t.memoizedState=null!==(i=new r(n,i)).state&&void 0!==i.state?i.state:null,i.updater=so,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=n,i.state=t.memoizedState,i.refs={},af(t),s=r.contextType,i.context="object"==typeof s&&null!==s?nG(s):nt,i.state=t.memoizedState,"function"==typeof(s=r.getDerivedStateFromProps)&&(ss(t,r,s,n),i.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(s=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),s!==i.state&&so.enqueueReplaceState(i,i.state,null),aw(t,n,i,a),ax(),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=sc(r,o);i.props=l;var u=i.context,c=r.contextType;s=nt,"object"==typeof c&&null!==c&&(s=nG(c));var d=r.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(o||u!==s)&&su(t,i,n,s),ah=!1;var h=t.memoizedState;i.state=h,aw(t,n,i,a),ax(),u=t.memoizedState,o||h!==u||ah?("function"==typeof d&&(ss(t,r,d,n),u=t.memoizedState),(l=ah||sl(t,r,l,n,h,u,s))?(c||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||("function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"==typeof i.componentDidMount&&(t.flags|=4194308)):("function"==typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),i.props=n,i.state=u,i.context=s,n=l):("function"==typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,ap(e,t),c=sc(r,s=t.memoizedProps),i.props=c,d=t.pendingProps,h=i.context,u=r.contextType,l=nt,"object"==typeof u&&null!==u&&(l=nG(u)),(u="function"==typeof(o=r.getDerivedStateFromProps)||"function"==typeof i.getSnapshotBeforeUpdate)||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||(s!==d||h!==l)&&su(t,i,n,l),ah=!1,h=t.memoizedState,i.state=h,aw(t,n,i,a),ax();var f=t.memoizedState;s!==d||h!==f||ah||null!==e&&null!==e.dependencies&&n$(e.dependencies)?("function"==typeof o&&(ss(t,r,o,n),f=t.memoizedState),(c=ah||sl(t,r,c,n,h,f,l)||null!==e&&null!==e.dependencies&&n$(e.dependencies))?(u||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||("function"==typeof i.componentWillUpdate&&i.componentWillUpdate(n,f,l),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,f,l)),"function"==typeof i.componentDidUpdate&&(t.flags|=4),"function"==typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),i.props=n,i.state=f,i.context=l,n=c):("function"!=typeof i.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return i=n,sI(e,t),n=0!=(128&t.flags),i||n?(i=t.stateNode,r=n&&"function"!=typeof r.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&n?(t.child=i6(t,e.child,null,a),t.child=i6(t,null,r,a)):sk(e,t,r,a),t.memoizedState=i.state,e=t.child):e=sH(e,t,a),e}function sj(e,t,r,n){return nO(),t.flags|=256,sk(e,t,r,n),t.child}var sP={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sO(e){return{baseLanes:e,cachePool:at()}}function sR(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=o$),e}function sL(e,t,r){var n,a=t.pendingProps,i=!1,s=0!=(128&t.flags);if((n=s)||(n=(null===e||null!==e.memoizedState)&&0!=(2&sa.current)),n&&(i=!0,t.flags&=-129),n=0!=(32&t.flags),t.flags&=-33,null===e){if(n_){if(i?se(t):sr(t),n_){var l,u=nN;if(l=u){r:{for(l=u,u=nI;8!==l.nodeType;)if(!u||null===(l=uE(l.nextSibling))){u=null;break r}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==ny?{id:nv,overflow:nb}:null,retryLane:0x20000000,hydrationErrors:null},(l=nn(18,null,null,0)).stateNode=u,l.return=t,t.child=l,nS=t,nN=null,l=!0):l=!1}l||nD(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return uk(u)?t.lanes=32:t.lanes=0x20000000,null;sn(t)}return(u=a.children,a=a.fallback,i)?(sr(t),u=sU({mode:"hidden",children:u},i=t.mode),a=nl(a,i,r,null),u.return=t,a.return=t,u.sibling=a,t.child=u,(i=t.child).memoizedState=sO(r),i.childLanes=sR(e,n,r),t.memoizedState=sP,a):(se(t),sM(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(se(t),t.flags&=-257,t=sF(e,t,r)):null!==t.memoizedState?(sr(t),t.child=e.child,t.flags|=128,t=null):(sr(t),i=a.fallback,u=t.mode,a=sU({mode:"visible",children:a.children},u),i=nl(i,u,r,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,i6(t,e.child,null,r),(a=t.child).memoizedState=sO(r),a.childLanes=sR(e,n,r),t.memoizedState=sP,t=i);else if(se(t),uk(u)){if(n=u.nextSibling&&u.nextSibling.dataset)var c=n.dgst;n=c,(a=Error(o(419))).stack="",a.digest=n,nL({value:a,source:null,stack:null}),t=sF(e,t,r)}else if(sw||nq(e,t,r,!1),n=0!=(r&e.childLanes),sw||n){if(null!==(n=oj)&&0!==(a=0!=((a=0!=(42&(a=r&-r))?1:eT(a))&(n.suspendedLanes|r))?0:a)&&a!==l.retryLane)throw l.retryLane=a,r7(e,a),lt(n,e,a),sx;"$?"===u.data||ld(),t=sF(e,t,r)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,nN=uE(u.nextSibling),nS=t,n_=!0,nT=null,nI=!1,null!==e&&(nm[ng++]=nv,nm[ng++]=nb,nm[ng++]=ny,nv=e.id,nb=e.overflow,ny=t),t=sM(t,a.children),t.flags|=4096);return t}return i?(sr(t),i=a.fallback,u=t.mode,c=(l=e.child).sibling,(a=ni(l,{mode:"hidden",children:a.children})).subtreeFlags=0x3e00000&l.subtreeFlags,null!==c?i=ni(c,i):(i=nl(i,u,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,null===(u=e.child.memoizedState)?u=sO(r):(null!==(l=u.cachePool)?(c=nZ._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=at(),u={baseLanes:u.baseLanes|r,cachePool:l}),i.memoizedState=u,i.childLanes=sR(e,n,r),t.memoizedState=sP,a):(se(t),e=(r=e.child).sibling,(r=ni(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function sM(e,t){return(t=sU({mode:"visible",children:t},e.mode)).return=e,e.child=t}function sU(e,t){return(e=nn(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function sF(e,t,r){return i6(t,e.child,null,r),e=sM(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sV(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),nB(e.return,t,r)}function sz(e,t,r,n,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function sB(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(sk(e,t,n.children,r),0!=(2&(n=sa.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&sV(e,r,t);else if(19===e.tag)sV(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(z(sa,n),a){case"forwards":for(a=null,r=t.child;null!==r;)null!==(e=r.alternate)&&null===si(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),sz(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===si(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}sz(t,!0,r,null,i);break;case"together":sz(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function sH(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),oB|=t.lanes,0==(r&t.childLanes)){if(null===e)return null;else if(nq(e,t,r,!1),0==(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=ni(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=ni(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function sq(e,t){return 0!=(e.lanes&t)||!!(null!==(e=e.dependencies)&&n$(e))}function s$(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)sw=!0;else{if(!sq(e,r)&&0==(128&t.flags))return sw=!1,function(e,t,r){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),nV(t,nZ,e.memoizedState.cache),nO();break;case 27:case 5:K(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:nV(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n){if(null!==n.dehydrated)return se(t),t.flags|=128,null;if(0!=(r&t.child.childLanes))return sL(e,t,r);return se(t),null!==(e=sH(e,t,r))?e.sibling:null}se(t);break;case 19:var a=0!=(128&e.flags);if((n=0!=(r&t.childLanes))||(nq(e,t,r,!1),n=0!=(r&t.childLanes)),a){if(n)return sB(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),z(sa,sa.current),!n)return null;break;case 22:case 23:return t.lanes=0,s_(e,t,r);case 24:nV(t,nZ,e.memoizedState.cache)}return sH(e,t,r)}(e,t,r);sw=0!=(131072&e.flags)}else sw=!1,n_&&0!=(1048576&t.flags)&&nw(t,np,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,a=n._init;if(n=a(n._payload),t.type=n,"function"==typeof n)na(n)?(e=sc(n,e),t.tag=1,t=sA(null,t,n,e,r)):(t.tag=0,t=sC(null,t,n,e,r));else{if(null!=n){if((a=n.$$typeof)===E){t.tag=11,t=sE(null,t,n,e,r);break e}else if(a===_){t.tag=14,t=sS(null,t,n,e,r);break e}}throw Error(o(306,t=function e(t){if(null==t)return null;if("function"==typeof t)return t.$$typeof===j?null:t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case N:return"SuspenseList";case I:return"Activity"}if("object"==typeof t)switch(t.$$typeof){case m:return"Portal";case k:return(t.displayName||"Context")+".Provider";case x:return(t._context.displayName||"Context")+".Consumer";case E:var r=t.render;return(t=t.displayName)||(t=""!==(t=r.displayName||r.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case _:return null!==(r=t.displayName||null)?r:e(t.type)||"Memo";case T:r=t._payload,t=t._init;try{return e(t(r))}catch(e){}}return null}(n)||n,""))}}return t;case 0:return sC(e,t,t.type,t.pendingProps,r);case 1:return a=sc(n=t.type,t.pendingProps),sA(e,t,n,a,r);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));n=t.pendingProps;var i=t.memoizedState;a=i.element,ap(e,t),aw(t,n,null,r);var s=t.memoizedState;if(nV(t,nZ,n=s.cache),n!==i.cache&&nH(t,[nZ],r,!0),ax(),n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=sj(e,t,n,r);break e}else if(n!==a){nL(a=r1(Error(o(424)),t)),t=sj(e,t,n,r);break e}else for(nN=uE((e=9===(e=t.stateNode.containerInfo).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e).firstChild),nS=t,n_=!0,nT=null,nI=!0,r=i8(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling;else{if(nO(),n===a){t=sH(e,t,r);break e}sk(e,t,n,r)}t=t.child}return t;case 26:return sI(e,t),null===e?(r=uO(t.type,null,t.pendingProps,null))?t.memoizedState=r:n_||(r=t.type,e=t.pendingProps,(n=uu(q.current).createElement(r))[eA]=t,n[ej]=e,us(n,r,e),eq(n),t.stateNode=n):t.memoizedState=uO(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&n_&&(n=t.stateNode=u_(t.type,t.pendingProps,q.current),nS=t,nI=!0,a=nN,ub(t.type)?(uS=a,nN=uE(n.firstChild)):nN=a),sk(e,t,t.pendingProps.children,r),sI(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&n_&&((a=n=nN)&&(null!==(n=function(e,t,r,n){for(;1===e.nodeType;){if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[eU])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence")||a!==r.rel||e.getAttribute("href")!==(null==r.href||""===r.href?null:r.href)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin)||e.getAttribute("title")!==(null==r.title?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==r.src?null:r.src)||e.getAttribute("type")!==(null==r.type?null:r.type)||e.getAttribute("crossorigin")!==(null==r.crossOrigin?null:r.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==r.name?null:""+r.name;if("hidden"===r.type&&e.getAttribute("name")===a)return e}if(null===(e=uE(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,nI))?(t.stateNode=n,nS=t,nN=uE(n.firstChild),nI=!1,a=!0):a=!1),a||nD(t)),K(t),a=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,n=i.children,uh(a,i)?n=null:null!==s&&uh(a,s)&&(t.flags|=32),null!==t.memoizedState&&(u0._currentValue=a=aB(e,t,a$,null,null,r)),sI(e,t),sk(e,t,n,r),t.child;case 6:return null===e&&n_&&((e=r=nN)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;)if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r||null===(e=uE(e.nextSibling)))return null;return e}(r,t.pendingProps,nI))?(t.stateNode=r,nS=t,nN=null,e=!0):e=!1),e||nD(t)),null;case 13:return sL(e,t,r);case 4:return W(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=i6(t,null,n,r):sk(e,t,n,r),t.child;case 11:return sE(e,t,t.type,t.pendingProps,r);case 7:return sk(e,t,t.pendingProps,r),t.child;case 8:case 12:return sk(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,nV(t,t.type,n.value),sk(e,t,n.children,r),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,nW(t),n=n(a=nG(a)),t.flags|=1,sk(e,t,n,r),t.child;case 14:return sS(e,t,t.type,t.pendingProps,r);case 15:return sN(e,t,t.type,t.pendingProps,r);case 19:return sB(e,t,r);case 31:return n=t.pendingProps,r=t.mode,n={mode:n.mode,children:n.children},null===e?(r=sU(n,r)).ref=t.ref:(r=ni(e.child,n)).ref=t.ref,t.child=r,r.return=t,t=r;case 22:return s_(e,t,r);case 24:return nW(t),n=nG(nZ),null===e?(null===(a=n9())&&(a=oj,i=n0(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=r),a=i),t.memoizedState={parent:n,cache:a},af(t),nV(t,nZ,a)):(0!=(e.lanes&r)&&(ap(e,t),aw(t,null,null,r),ax()),a=e.memoizedState,i=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),nV(t,nZ,n)):(nV(t,nZ,n=i.cache),n!==a.cache&&nH(t,[nZ],r,!0))),sk(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function sW(e){e.flags|=4}function sG(e,t){if("stylesheet"!==t.type||0!=(4&t.state.loading))e.flags&=-0x1000001;else if(e.flags|=0x1000000,!uG(t)){if(null!==(t=i7.current)&&((4194048&oO)===oO?null!==i9:(0x3c00000&oO)!==oO&&0==(0x20000000&oO)||t!==i9))throw au=ai,an;e.flags|=8192}}function sK(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?ek():0x20000000,e.lanes|=t,oW|=t)}function sQ(e,t){if(!n_)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function sY(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=0x3e00000&a.subtreeFlags,n|=0x3e00000&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function sX(e,t){switch(nE(t),t.tag){case 3:nz(nZ),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:sn(t);break;case 19:V(sa);break;case 10:nz(t.type);break;case 22:case 23:sn(t),aI(),null!==e&&V(n7);break;case 24:nz(nZ)}}function sJ(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var a=n.next;r=a;do{if((r.tag&e)===e){n=void 0;var i=r.create;r.inst.destroy=n=i()}r=r.next}while(r!==a)}}catch(e){l_(t,t.return,e)}}function sZ(e,t,r){try{var n=t.updateQueue,a=null!==n?n.lastEffect:null;if(null!==a){var i=a.next;n=i;do{if((n.tag&e)===e){var s=n.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,a=t;try{o()}catch(e){l_(a,r,e)}}}n=n.next}while(n!==i)}}catch(e){l_(t,t.return,e)}}function s0(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{aE(t,r)}catch(t){l_(e,e.return,t)}}}function s1(e,t,r){r.props=sc(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(r){l_(e,t,r)}}function s2(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"==typeof r?e.refCleanup=r(n):r.current=n}}catch(r){l_(e,t,r)}}function s5(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"==typeof n)try{n()}catch(r){l_(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof r)try{r(null)}catch(r){l_(e,t,r)}else r.current=null}function s3(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(t){l_(e,e.return,t)}}function s4(e,t,r){try{var n=e.stateNode;(function(e,t,r,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,s=null,l=null,u=null,c=null,d=null;for(p in r){var h=r[p];if(r.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":u=h;default:n.hasOwnProperty(p)||ua(e,t,p,null,n,h)}}for(var f in n){var p=n[f];if(h=r[f],n.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":a=p;break;case"checked":c=p;break;case"defaultChecked":d=p;break;case"value":s=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&ua(e,t,f,p,n,h)}}tr(e,s,l,u,c,d,i,a);return;case"select":for(i in p=s=l=f=null,r)if(u=r[i],r.hasOwnProperty(i)&&null!=u)switch(i){case"value":break;case"multiple":p=u;default:n.hasOwnProperty(i)||ua(e,t,i,null,n,u)}for(a in n)if(i=n[a],u=r[a],n.hasOwnProperty(a)&&(null!=i||null!=u))switch(a){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":s=i;default:i!==u&&ua(e,t,a,i,n,u)}t=l,r=s,n=p,null!=f?ti(e,!!r,f,!1):!!n!=!!r&&(null!=t?ti(e,!!r,t,!0):ti(e,!!r,r?[]:"",!1));return;case"textarea":for(l in p=f=null,r)if(a=r[l],r.hasOwnProperty(l)&&null!=a&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ua(e,t,l,null,n,a)}for(s in n)if(a=n[s],i=r[s],n.hasOwnProperty(s)&&(null!=a||null!=i))switch(s){case"value":f=a;break;case"defaultValue":p=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(o(91));break;default:a!==i&&ua(e,t,s,a,n,i)}ts(e,f,p);return;case"option":for(var m in r)f=r[m],r.hasOwnProperty(m)&&null!=f&&!n.hasOwnProperty(m)&&("selected"===m?e.selected=!1:ua(e,t,m,null,n,f));for(u in n)f=n[u],p=r[u],n.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p)&&("selected"===u?e.selected=f&&"function"!=typeof f&&"symbol"!=typeof f:ua(e,t,u,f,n,p));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)f=r[g],r.hasOwnProperty(g)&&null!=f&&!n.hasOwnProperty(g)&&ua(e,t,g,null,n,f);for(c in n)if(f=n[c],p=r[c],n.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:ua(e,t,c,f,n,p)}return;default:if(th(t)){for(var y in r)f=r[y],r.hasOwnProperty(y)&&void 0!==f&&!n.hasOwnProperty(y)&&ui(e,t,y,void 0,n,f);for(d in n)f=n[d],p=r[d],n.hasOwnProperty(d)&&f!==p&&(void 0!==f||void 0!==p)&&ui(e,t,d,f,n,p);return}}for(var v in r)f=r[v],r.hasOwnProperty(v)&&null!=f&&!n.hasOwnProperty(v)&&ua(e,t,v,null,n,f);for(h in n)f=n[h],p=r[h],n.hasOwnProperty(h)&&f!==p&&(null!=f||null!=p)&&ua(e,t,h,f,n,p)})(n,e.type,r,t),n[ej]=t}catch(t){l_(e,e.return,t)}}function s6(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ub(e.type)||4===e.tag}function s8(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||s6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ub(e.type)||2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function s7(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&ub(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(s7(e,t,r),e=e.sibling;null!==e;)s7(e,t,r),e=e.sibling}function s9(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);us(t,n,r),t[eA]=e,t[ej]=r}catch(t){l_(e,e.return,t)}}var oe=!1,ot=!1,or=!1,on="function"==typeof WeakSet?WeakSet:Set,oa=null;function oi(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:og(e,r),4&n&&sJ(5,r);break;case 1:if(og(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(e){l_(r,r.return,e)}else{var a=sc(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(a,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){l_(r,r.return,e)}}64&n&&s0(r),512&n&&s2(r,r.return);break;case 3:if(og(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{aE(e,t)}catch(e){l_(r,r.return,e)}}break;case 27:null===t&&4&n&&s9(r);case 26:case 5:og(e,r),null===t&&4&n&&s3(r),512&n&&s2(r,r.return);break;case 12:default:og(e,r);break;case 13:og(e,r),4&n&&oc(e,r),64&n&&null!==(e=r.memoizedState)&&null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$?"!==e.data||"complete"===r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=lD.bind(null,r));break;case 22:if(!(n=null!==r.memoizedState||oe)){t=null!==t&&null!==t.memoizedState||ot,a=oe;var i=ot;oe=n,(ot=t)&&!i?function e(t,r,n){for(n=n&&0!=(8772&r.subtreeFlags),r=r.child;null!==r;){var a=r.alternate,i=t,s=r,o=s.flags;switch(s.tag){case 0:case 11:case 15:e(i,s,n),sJ(4,s);break;case 1:if(e(i,s,n),"function"==typeof(i=(a=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(e){l_(a,a.return,e)}if(null!==(i=(a=s).updateQueue)){var l=a.stateNode;try{var u=i.shared.hiddenCallbacks;if(null!==u)for(i.shared.hiddenCallbacks=null,i=0;i<u.length;i++)ak(u[i],l)}catch(e){l_(a,a.return,e)}}n&&64&o&&s0(s),s2(s,s.return);break;case 27:s9(s);case 26:case 5:e(i,s,n),n&&null===a&&4&o&&s3(s),s2(s,s.return);break;case 12:default:e(i,s,n);break;case 13:e(i,s,n),n&&4&o&&oc(i,s);break;case 22:null===s.memoizedState&&e(i,s,n),s2(s,s.return);case 30:}r=r.sibling}}(e,r,0!=(8772&r.subtreeFlags)):og(e,r),oe=a,ot=i}case 30:}}var os=null,oo=!1;function ol(e,t,r){for(r=r.child;null!==r;)ou(e,t,r),r=r.sibling}function ou(e,t,r){if(ed&&"function"==typeof ed.onCommitFiberUnmount)try{ed.onCommitFiberUnmount(ec,r)}catch(e){}switch(r.tag){case 26:ot||s5(r,t),ol(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:ot||s5(r,t);var n=os,a=oo;ub(r.type)&&(os=r.stateNode,oo=!1),ol(e,t,r),uT(r.stateNode),os=n,oo=a;break;case 5:ot||s5(r,t);case 6:if(n=os,a=oo,os=null,ol(e,t,r),os=n,oo=a,null!==os)if(oo)try{(9===os.nodeType?os.body:"HTML"===os.nodeName?os.ownerDocument.body:os).removeChild(r.stateNode)}catch(e){l_(r,t,e)}else try{os.removeChild(r.stateNode)}catch(e){l_(r,t,e)}break;case 18:null!==os&&(oo?(ux(9===(e=os).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),ck(e)):ux(os,r.stateNode));break;case 4:n=os,a=oo,os=r.stateNode.containerInfo,oo=!0,ol(e,t,r),os=n,oo=a;break;case 0:case 11:case 14:case 15:ot||sZ(2,r,t),ot||sZ(4,r,t),ol(e,t,r);break;case 1:ot||(s5(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount&&s1(r,t,n)),ol(e,t,r);break;case 21:default:ol(e,t,r);break;case 22:ot=(n=ot)||null!==r.memoizedState,ol(e,t,r),ot=n}}function oc(e,t){if(null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{ck(e)}catch(e){l_(t,t.return,e)}}function od(e,t){var r=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new on),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new on),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var n=lA.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}function oh(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n],i=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(ub(l.type)){os=l.stateNode,oo=!1;break e}break;case 5:os=l.stateNode,oo=!1;break e;case 3:case 4:os=l.stateNode.containerInfo,oo=!0;break e}l=l.return}if(null===os)throw Error(o(160));ou(i,s,a),os=null,oo=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)op(t,e),t=t.sibling}var of=null;function op(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:oh(t,e),om(e),4&n&&(sZ(3,e,e.return),sJ(3,e),sZ(5,e,e.return));break;case 1:oh(t,e),om(e),512&n&&(ot||null===r||s5(r,r.return)),64&n&&oe&&null!==(e=e.updateQueue)&&null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n));break;case 26:var a=of;if(oh(t,e),om(e),512&n&&(ot||null===r||s5(r,r.return)),4&n){var i=null!==r?r.memoizedState:null;if(n=e.memoizedState,null===r)if(null===n)if(null===e.stateNode){e:{n=e.type,r=e.memoizedProps,a=a.ownerDocument||a;t:switch(n){case"title":(!(i=a.getElementsByTagName("title")[0])||i[eU]||i[eA]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(n),a.head.insertBefore(i,a.querySelector("head > title"))),us(i,n,r),i[eA]=e,eq(i),n=i;break e;case"link":var s=u$("link","href",a).get(n+(r.href||""));if(s){for(var l=0;l<s.length;l++)if((i=s[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&i.getAttribute("rel")===(null==r.rel?null:r.rel)&&i.getAttribute("title")===(null==r.title?null:r.title)&&i.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){s.splice(l,1);break t}}us(i=a.createElement(n),n,r),a.head.appendChild(i);break;case"meta":if(s=u$("meta","content",a).get(n+(r.content||""))){for(l=0;l<s.length;l++)if((i=s[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&i.getAttribute("name")===(null==r.name?null:r.name)&&i.getAttribute("property")===(null==r.property?null:r.property)&&i.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&i.getAttribute("charset")===(null==r.charSet?null:r.charSet)){s.splice(l,1);break t}}us(i=a.createElement(n),n,r),a.head.appendChild(i);break;default:throw Error(o(468,n))}i[eA]=e,eq(i),n=i}e.stateNode=n}else uW(a,e.type,e.stateNode);else e.stateNode=uV(a,n,e.memoizedProps);else i!==n?(null===i?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):i.count--,null===n?uW(a,e.type,e.stateNode):uV(a,n,e.memoizedProps)):null===n&&null!==e.stateNode&&s4(e,e.memoizedProps,r.memoizedProps)}break;case 27:oh(t,e),om(e),512&n&&(ot||null===r||s5(r,r.return)),null!==r&&4&n&&s4(e,e.memoizedProps,r.memoizedProps);break;case 5:if(oh(t,e),om(e),512&n&&(ot||null===r||s5(r,r.return)),32&e.flags){a=e.stateNode;try{tl(a,"")}catch(t){l_(e,e.return,t)}}4&n&&null!=e.stateNode&&(a=e.memoizedProps,s4(e,a,null!==r?r.memoizedProps:a)),1024&n&&(or=!0);break;case 6:if(oh(t,e),om(e),4&n){if(null===e.stateNode)throw Error(o(162));n=e.memoizedProps,r=e.stateNode;try{r.nodeValue=n}catch(t){l_(e,e.return,t)}}break;case 3:if(uq=null,a=of,of=uD(t.containerInfo),oh(t,e),of=a,om(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{ck(t.containerInfo)}catch(t){l_(e,e.return,t)}or&&(or=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var r=t;e(r),5===r.tag&&1024&r.flags&&r.stateNode.reset(),t=t.sibling}}(e));break;case 4:n=of,of=uD(e.stateNode.containerInfo),oh(t,e),om(e),of=n;break;case 12:default:oh(t,e),om(e);break;case 13:oh(t,e),om(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==r&&null!==r.memoizedState)&&(oY=et()),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,od(e,n));break;case 22:a=null!==e.memoizedState;var u=null!==r&&null!==r.memoizedState,c=oe,d=ot;if(oe=c||a,ot=d||u,oh(t,e),ot=d,oe=c,om(e),8192&n)e:for((t=e.stateNode)._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||u||oe||ot||function e(t){for(t=t.child;null!==t;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:sZ(4,r,r.return),e(r);break;case 1:s5(r,r.return);var n=r.stateNode;"function"==typeof n.componentWillUnmount&&s1(r,r.return,n),e(r);break;case 27:uT(r.stateNode);case 26:case 5:s5(r,r.return),e(r);break;case 22:null===r.memoizedState&&e(r);break;default:e(r)}t=t.sibling}}(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){u=r=t;try{if(i=u.stateNode,a)s=i.style,"function"==typeof s.setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var h=u.memoizedProps.style,f=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"==typeof f?"":(""+f).trim()}}catch(e){l_(u,u.return,e)}}}else if(6===t.tag){if(null===r){u=t;try{u.stateNode.nodeValue=a?"":u.memoizedProps}catch(e){l_(u,u.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&n&&null!==(n=e.updateQueue)&&null!==(r=n.retryQueue)&&(n.retryQueue=null,od(e,r));break;case 19:oh(t,e),om(e),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,od(e,n));case 30:case 21:}}function om(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(s6(n)){r=n;break}n=n.return}if(null==r)throw Error(o(160));switch(r.tag){case 27:var a=r.stateNode,i=s8(e);s7(e,i,a);break;case 5:var s=r.stateNode;32&r.flags&&(tl(s,""),r.flags&=-33);var l=s8(e);s7(e,l,s);break;case 3:case 4:var u=r.stateNode.containerInfo,c=s8(e);!function e(t,r,n){var a=t.tag;if(5===a||6===a)t=t.stateNode,r?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(t,r):((r=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(t),null!=(n=n._reactRootContainer)||null!==r.onclick||(r.onclick=un));else if(4!==a&&(27===a&&ub(t.type)&&(n=t.stateNode,r=null),null!==(t=t.child)))for(e(t,r,n),t=t.sibling;null!==t;)e(t,r,n),t=t.sibling}(e,c,u);break;default:throw Error(o(161))}}catch(t){l_(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function og(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)oi(e,t.alternate,t),t=t.sibling}function oy(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&n1(r))}function ov(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&n1(e))}function ob(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ox(e,t,r,n),t=t.sibling}function ox(e,t,r,n){var a=t.flags;switch(t.tag){case 0:case 11:case 15:ob(e,t,r,n),2048&a&&sJ(9,t);break;case 1:case 13:default:ob(e,t,r,n);break;case 3:ob(e,t,r,n),2048&a&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&n1(e)));break;case 12:if(2048&a){ob(e,t,r,n),e=t.stateNode;try{var i=t.memoizedProps,s=i.id,o=i.onPostCommit;"function"==typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){l_(t,t.return,e)}}else ob(e,t,r,n);break;case 23:break;case 22:i=t.stateNode,s=t.alternate,null!==t.memoizedState?2&i._visibility?ob(e,t,r,n):ow(e,t):2&i._visibility?ob(e,t,r,n):(i._visibility|=2,function e(t,r,n,a,i){for(i=i&&0!=(10256&r.subtreeFlags),r=r.child;null!==r;){var s=r,o=s.flags;switch(s.tag){case 0:case 11:case 15:e(t,s,n,a,i),sJ(8,s);break;case 23:break;case 22:var l=s.stateNode;null!==s.memoizedState?2&l._visibility?e(t,s,n,a,i):ow(t,s):(l._visibility|=2,e(t,s,n,a,i)),i&&2048&o&&oy(s.alternate,s);break;case 24:e(t,s,n,a,i),i&&2048&o&&ov(s.alternate,s);break;default:e(t,s,n,a,i)}r=r.sibling}}(e,t,r,n,0!=(10256&t.subtreeFlags))),2048&a&&oy(s,t);break;case 24:ob(e,t,r,n),2048&a&&ov(t.alternate,t)}}function ow(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=t,n=r.flags;switch(r.tag){case 22:ow(e,r),2048&n&&oy(r.alternate,r);break;case 24:ow(e,r),2048&n&&ov(r.alternate,r);break;default:ow(e,r)}t=t.sibling}}var ok=8192;function oE(e){if(e.subtreeFlags&ok)for(e=e.child;null!==e;)oS(e),e=e.sibling}function oS(e){switch(e.tag){case 26:oE(e),e.flags&ok&&null!==e.memoizedState&&function(e,t,r){if(null===uK)throw Error(o(475));var n=uK;if("stylesheet"===t.type&&("string"!=typeof r.media||!1!==matchMedia(r.media).matches)&&0==(4&t.state.loading)){if(null===t.instance){var a=uR(r.href),i=e.querySelector(uL(a));if(i){null!==(e=i._p)&&"object"==typeof e&&"function"==typeof e.then&&(n.count++,n=uY.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=i,eq(i);return}i=e.ownerDocument||e,r=uM(r),(a=uI.get(a))&&uB(r,a),eq(i=i.createElement("link"));var s=i;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),us(i,"link",r),t.instance=i}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0==(3&t.state.loading)&&(n.count++,t=uY.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(of,e.memoizedState,e.memoizedProps);break;case 5:default:oE(e);break;case 3:case 4:var t=of;of=uD(e.stateNode.containerInfo),oE(e),of=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=ok,ok=0x1000000,oE(e),ok=t):oE(e))}}function oN(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function o_(e){var t=e.deletions;if(0!=(16&e.flags)){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];oa=n,oI(n,e)}oN(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)oT(e),e=e.sibling}function oT(e){switch(e.tag){case 0:case 11:case 15:o_(e),2048&e.flags&&sZ(9,e,e.return);break;case 3:case 12:default:o_(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,function e(t){var r=t.deletions;if(0!=(16&t.flags)){if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];oa=a,oI(a,t)}oN(t)}for(t=t.child;null!==t;){switch((r=t).tag){case 0:case 11:case 15:sZ(8,r,r.return),e(r);break;case 22:2&(n=r.stateNode)._visibility&&(n._visibility&=-3,e(r));break;default:e(r)}t=t.sibling}}(e)):o_(e)}}function oI(e,t){for(;null!==oa;){var r=oa;switch(r.tag){case 0:case 11:case 15:sZ(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:n1(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,oa=n;else for(r=e;null!==oa;){var a=(n=oa).sibling,i=n.return;if(!function e(t){var r=t.alternate;null!==r&&(t.alternate=null,e(r)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(r=t.stateNode)&&eF(r),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(n),n===r){oa=null;break}if(null!==a){a.return=i,oa=a;break}oa=i}}}var oC={getCacheForType:function(e){var t=nG(nZ),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r}},oD="function"==typeof WeakMap?WeakMap:Map,oA=0,oj=null,oP=null,oO=0,oR=0,oL=null,oM=!1,oU=!1,oF=!1,oV=0,oz=0,oB=0,oH=0,oq=0,o$=0,oW=0,oG=null,oK=null,oQ=!1,oY=0,oX=1/0,oJ=null,oZ=null,o0=0,o1=null,o2=null,o5=0,o3=0,o4=null,o6=null,o8=0,o7=null;function o9(){if(0!=(2&oA)&&0!==oO)return oO&-oO;if(null!==O.T){var e=n3;return 0!==e?e:l$()}return eC()}function le(){0===o$&&(o$=0==(0x20000000&oO)||n_?ew():0x20000000);var e=i7.current;return null!==e&&(e.flags|=32),o$}function lt(e,t,r){(e===oj&&(2===oR||9===oR)||null!==e.cancelPendingCommit)&&(lo(e,0),la(e,oO,o$,!1)),eS(e,r),(0==(2&oA)||e!==oj)&&(e===oj&&(0==(2&oA)&&(oH|=r),4===oz&&la(e,oO,o$,!1)),lU(e))}function lr(e,t,r){if(0!=(6&oA))throw Error(o(327));for(var n=!r&&0==(124&t)&&0==(t&e.expiredLanes)||ex(e,t),a=n?function(e,t){var r=oA;oA|=2;var n=lu(),a=lc();oj!==e||oO!==t?(oJ=null,oX=et()+500,lo(e,t)):oU=ex(e,t);e:for(;;)try{if(0!==oR&&null!==oP){t=oP;var i=oL;t:switch(oR){case 1:oR=0,oL=null,lm(e,t,i,1);break;case 2:case 9:if(as(i)){oR=0,oL=null,lp(t);break}t=function(){2!==oR&&9!==oR||oj!==e||(oR=7),lU(e)},i.then(t,t);break e;case 3:oR=7;break e;case 4:oR=5;break e;case 7:as(i)?(oR=0,oL=null,lp(t)):(oR=0,oL=null,lm(e,t,i,7));break;case 5:var s=null;switch(oP.tag){case 26:s=oP.memoizedState;case 5:case 27:var l=oP;if(s?uG(s):1){oR=0,oL=null;var u=l.sibling;if(null!==u)oP=u;else{var c=l.return;null!==c?(oP=c,lg(c)):oP=null}break t}}oR=0,oL=null,lm(e,t,i,5);break;case 6:oR=0,oL=null,lm(e,t,i,6);break;case 8:ls(),oz=6;break e;default:throw Error(o(462))}}for(;null!==oP&&!Z();)lf(oP);break}catch(t){ll(e,t)}return(nF=nU=null,O.H=n,O.A=a,oA=r,null!==oP)?0:(oj=null,oO=0,r4(),oz)}(e,t):lh(e,t,!0),i=n;;){if(0===a)oU&&!n&&la(e,t,0,!1);else{if(r=e.current.alternate,i&&!function(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&null!==(r=t.updateQueue)&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!rT(i(),a))return!1}catch(e){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)){a=lh(e,t,!1),i=!1;continue}if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!=(s=-0x20000001&e.pendingLanes)?s:0x20000000&s?0x20000000:0;if(0!==s){t=s;e:{a=oG;var l=e.current.memoizedState.isDehydrated;if(l&&(lo(e,s).flags|=256),2!==(s=lh(e,s,!1))){if(oF&&!l){e.errorRecoveryDisabledLanes|=i,oH|=i,a=4;break e}i=oK,oK=a,null!==i&&(null===oK?oK=i:oK.push.apply(oK,i))}a=s}if(i=!1,2!==a)continue}}if(1===a){lo(e,0),la(e,t,0,!0);break}e:{switch(n=e,i=a){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:la(n,t,o$,!oM);break e;case 2:oK=null;break;case 3:case 5:break;default:throw Error(o(329))}if((0x3c00000&t)===t&&10<(a=oY+300-et())){if(la(n,t,o$,!oM),0!==eb(n,0,!0))break e;n.timeoutHandle=up(ln.bind(null,n,r,oK,oJ,oQ,t,o$,oH,oW,oM,i,2,-0,0),a);break e}ln(n,r,oK,oJ,oQ,t,o$,oH,oW,oM,i,0,-0,0)}}break}lU(e)}function ln(e,t,r,n,a,i,s,l,u,c,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||0x1002000==(0x1002000&h))&&(uK={stylesheets:null,count:0,unsuspend:uQ},oS(t),null!==(h=function(){if(null===uK)throw Error(o(475));var e=uK;return e.stylesheets&&0===e.count&&uJ(e,e.stylesheets),0<e.count?function(t){var r=setTimeout(function(){if(e.stylesheets&&uJ(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(r)}}:null}()))){e.cancelPendingCommit=h(lv.bind(null,e,t,i,r,n,a,s,l,u,d,1,f,p)),la(e,i,s,!c);return}lv(e,t,i,r,n,a,s,l,u)}function la(e,t,r,n){t&=~oq,t&=~oH,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var a=t;0<a;){var i=31-ef(a),s=1<<i;n[i]=-1,a&=~s}0!==r&&eN(e,r,t)}function li(){return 0!=(6&oA)||(lF(0,!1),!1)}function ls(){if(null!==oP){if(0===oR)var e=oP.return;else e=oP,nF=nU=null,aK(e),iZ=null,i0=0,e=oP;for(;null!==e;)sX(e.alternate,e),e=e.return;oP=null}}function lo(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,um(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),ls(),oj=e,oP=r=ni(e.current,null),oO=t,oR=0,oL=null,oM=!1,oU=ex(e,t),oF=!1,oW=o$=oq=oH=oB=oz=0,oK=oG=null,oQ=!1,0!=(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var a=31-ef(n),i=1<<a;t|=e[a],n&=~i}return oV=t,r4(),r}function ll(e,t){aD=null,O.H=iQ,t===ar||t===aa?(t=ac(),oR=3):t===an?(t=ac(),oR=4):oR=t===sx?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,oL=t,null===oP&&(oz=1,sm(e,r1(t,e.current)))}function lu(){var e=O.H;return O.H=iQ,null===e?iQ:e}function lc(){var e=O.A;return O.A=oC,e}function ld(){oz=4,oM||(4194048&oO)!==oO&&null!==i7.current||(oU=!0),0==(0x7ffffff&oB)&&0==(0x7ffffff&oH)||null===oj||la(oj,oO,o$,!1)}function lh(e,t,r){var n=oA;oA|=2;var a=lu(),i=lc();(oj!==e||oO!==t)&&(oJ=null,lo(e,t)),t=!1;var s=oz;e:for(;;)try{if(0!==oR&&null!==oP){var o=oP,l=oL;switch(oR){case 8:ls(),s=6;break e;case 3:case 2:case 9:case 6:null===i7.current&&(t=!0);var u=oR;if(oR=0,oL=null,lm(e,o,l,u),r&&oU){s=0;break e}break;default:u=oR,oR=0,oL=null,lm(e,o,l,u)}}(function(){for(;null!==oP;)lf(oP)})(),s=oz;break}catch(t){ll(e,t)}return t&&e.shellSuspendCounter++,nF=nU=null,oA=n,O.H=a,O.A=i,null===oP&&(oj=null,oO=0,r4()),s}function lf(e){var t=s$(e.alternate,e,oV);e.memoizedProps=e.pendingProps,null===t?lg(e):oP=t}function lp(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=sD(r,t,t.pendingProps,t.type,void 0,oO);break;case 11:t=sD(r,t,t.pendingProps,t.type.render,t.ref,oO);break;case 5:aK(t);default:sX(r,t),t=s$(r,t=oP=ns(t,oV),oV)}e.memoizedProps=e.pendingProps,null===t?lg(e):oP=t}function lm(e,t,r,n){nF=nU=null,aK(t),iZ=null,i0=0;var a=t.return;try{if(function(e,t,r,n,a){if(r.flags|=32768,null!==n&&"object"==typeof n&&"function"==typeof n.then){if(null!==(t=r.alternate)&&nq(t,r,a,!0),null!==(r=i7.current)){switch(r.tag){case 13:return null===i9?ld():null===r.alternate&&0===oz&&(oz=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===ai?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),lT(e,n,a)),!1;case 22:return r.flags|=65536,n===ai?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),lT(e,n,a)),!1}throw Error(o(435,r.tag))}return lT(e,n,a),ld(),!1}if(n_)return null!==(t=i7.current)?(0==(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==nC&&nL(r1(e=Error(o(422),{cause:n}),r))):(n!==nC&&nL(r1(t=Error(o(423),{cause:n}),r)),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,n=r1(n,r),a=sy(e.stateNode,n,a),av(e,a),4!==oz&&(oz=2)),!1;var i=Error(o(520),{cause:n});if(i=r1(i,r),null===oG?oG=[i]:oG.push(i),4!==oz&&(oz=2),null===t)return!0;n=r1(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,e=sy(r.stateNode,n,e),av(r,e),!1;case 1:if(t=r.type,i=r.stateNode,0==(128&r.flags)&&("function"==typeof t.getDerivedStateFromError||null!==i&&"function"==typeof i.componentDidCatch&&(null===oZ||!oZ.has(i))))return r.flags|=65536,a&=-a,r.lanes|=a,sb(a=sv(a),e,r,n),av(r,a),!1}r=r.return}while(null!==r)return!1}(e,a,t,r,oO)){oz=1,sm(e,r1(r,e.current)),oP=null;return}}catch(t){if(null!==a)throw oP=a,t;oz=1,sm(e,r1(r,e.current)),oP=null;return}32768&t.flags?(n_||1===n?e=!0:oU||0!=(0x20000000&oO)?e=!1:(oM=e=!0,(2===n||9===n||3===n||6===n)&&null!==(n=i7.current)&&13===n.tag&&(n.flags|=16384)),ly(t,e)):lg(t)}function lg(e){var t=e;do{if(0!=(32768&t.flags))return void ly(t,oM);e=t.return;var r=function(e,t,r){var n=t.pendingProps;switch(nE(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return sY(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),nz(nZ),G(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===e||null===e.child)&&(nP(t)?sW(t):null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,nR())),sY(t),null;case 26:return r=t.memoizedState,null===e?(sW(t),null!==r?(sY(t),sG(t,r)):(sY(t),t.flags&=-0x1000001)):r?r!==e.memoizedState?(sW(t),sY(t),sG(t,r)):(sY(t),t.flags&=-0x1000001):(e.memoizedProps!==n&&sW(t),sY(t),t.flags&=-0x1000001),null;case 27:Q(t),r=q.current;var a=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&sW(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return sY(t),null}e=B.current,nP(t)?nA(t,e):(e=u_(a,n,r),t.stateNode=e,sW(t))}return sY(t),null;case 5:if(Q(t),r=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&sW(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return sY(t),null}if(e=B.current,nP(t))nA(t,e);else{switch(a=uu(q.current),e){case 1:e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":e=a.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":e=a.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":(e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof n.is?a.createElement("select",{is:n.is}):a.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"==typeof n.is?a.createElement(r,{is:n.is}):a.createElement(r)}}e[eA]=t,e[ej]=n;e:for(a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&27!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(t.stateNode=e,us(e,r,n),r){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break;case"img":e=!0;break;default:e=!1}e&&sW(t)}}return sY(t),t.flags&=-0x1000001,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&sW(t);else{if("string"!=typeof n&&null===t.stateNode)throw Error(o(166));if(e=q.current,nP(t)){if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(a=nS))switch(a.tag){case 27:case 5:n=a.memoizedProps}e[eA]=t,(e=!!(e.nodeValue===r||null!==n&&!0===n.suppressHydrationWarning||ur(e.nodeValue,r)))||nD(t)}else(e=uu(e).createTextNode(n))[eA]=t,t.stateNode=e}return sY(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=nP(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[eA]=t}else nO(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;sY(t),a=!1}else a=nR(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a){if(256&t.flags)return sn(t),t;return sn(t),null}}if(sn(t),0!=(128&t.flags))return t.lanes=r,t;if(r=null!==n,e=null!==e&&null!==e.memoizedState,r){n=t.child,a=null,null!==n.alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(a=n.alternate.memoizedState.cachePool.pool);var i=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(i=n.memoizedState.cachePool.pool),i!==a&&(n.flags|=2048)}return r!==e&&r&&(t.child.flags|=8192),sK(t,t.updateQueue),sY(t),null;case 4:return G(),null===e&&l2(t.stateNode.containerInfo),sY(t),null;case 10:return nz(t.type),sY(t),null;case 19:if(V(sa),null===(a=t.memoizedState))return sY(t),null;if(n=0!=(128&t.flags),null===(i=a.rendering))if(n)sQ(a,!1);else{if(0!==oz||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=si(e))){for(t.flags|=128,sQ(a,!1),e=i.updateQueue,t.updateQueue=e,sK(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)ns(r,e),r=r.sibling;return z(sa,1&sa.current|2),t.child}e=e.sibling}null!==a.tail&&et()>oX&&(t.flags|=128,n=!0,sQ(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=si(i))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,sK(t,e),sQ(a,!0),null===a.tail&&"hidden"===a.tailMode&&!i.alternate&&!n_)return sY(t),null}else 2*et()-a.renderingStartTime>oX&&0x20000000!==r&&(t.flags|=128,n=!0,sQ(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=a.last)?e.sibling=i:t.child=i,a.last=i)}if(null!==a.tail)return t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=et(),t.sibling=null,e=sa.current,z(sa,n?1&e|2:1&e),t;return sY(t),null;case 22:case 23:return sn(t),aI(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!=(0x20000000&r)&&0==(128&t.flags)&&(sY(t),6&t.subtreeFlags&&(t.flags|=8192)):sY(t),null!==(r=t.updateQueue)&&sK(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&V(n7),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),nz(nZ),sY(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}(t.alternate,t,oV);if(null!==r){oP=r;return}if(null!==(t=t.sibling)){oP=t;return}oP=t=e}while(null!==t)0===oz&&(oz=5)}function ly(e,t){do{var r=function(e,t){switch(nE(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return nz(nZ),G(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(sn(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));nO()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(sa),null;case 4:return G(),null;case 10:return nz(t.type),null;case 22:case 23:return sn(t),aI(),null!==e&&V(n7),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return nz(nZ),null;default:return null}}(e.alternate,e);if(null!==r){r.flags&=32767,oP=r;return}if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling)){oP=e;return}oP=e=r}while(null!==e)oz=6,oP=null}function lv(e,t,r,n,a,i,s,l,u){e.cancelPendingCommit=null;do lE();while(0!==o0)if(0!=(6&oA))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(!function(e,t,r,n,a,i){var s=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(r=s&~r;0<r;){var c=31-ef(r),d=1<<c;o[c]=0,l[c]=-1;var h=u[c];if(null!==h)for(u[c]=null,c=0;c<h.length;c++){var f=h[c];null!==f&&(f.lane&=-0x20000001)}r&=~d}0!==n&&eN(e,n,0),0!==i&&0===a&&0!==e.tag&&(e.suspendedLanes|=i&~(s&~t))}(e,r,i=t.lanes|t.childLanes|r3,s,l,u),e===oj&&(oP=oj=null,oO=0),o2=t,o1=e,o5=r,o3=i,o4=a,o6=n,0!=(10256&t.subtreeFlags)||0!=(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(ei,function(){return lS(!0),null})):(e.callbackNode=null,e.callbackPriority=0),n=0!=(13878&t.flags),0!=(13878&t.subtreeFlags)||n){n=O.T,O.T=null,a=R.p,R.p=2,s=oA,oA|=4;try{!function(e,t){if(e=e.containerInfo,uo=u8,rj(e=rA(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a,i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(e){r=null;break e}var l=0,u=-1,c=-1,d=0,h=0,f=e,p=null;t:for(;;){for(;f!==r||0!==i&&3!==f.nodeType||(u=l+i),f!==s||0!==n&&3!==f.nodeType||(c=l+n),3===f.nodeType&&(l+=f.nodeValue.length),null!==(a=f.firstChild);)p=f,f=a;for(;;){if(f===e)break t;if(p===r&&++d===i&&(u=l),p===s&&++h===n&&(c=l),null!==(a=f.nextSibling))break;p=(f=p).parentNode}f=a}r=-1===u||-1===c?null:{start:u,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ul={focusedElem:e,selectionRange:r},u8=!1,oa=t;null!==oa;)if(e=(t=oa).child,0!=(1024&t.subtreeFlags)&&null!==e)e.return=t,oa=e;else for(;null!==oa;){switch(s=(t=oa).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!=(1024&e)&&null!==s){e=void 0,r=t,i=s.memoizedProps,s=s.memoizedState,n=r.stateNode;try{var m=sc(r.type,i,r.elementType===r.type);e=n.getSnapshotBeforeUpdate(m,s),n.__reactInternalSnapshotBeforeUpdate=e}catch(e){l_(r,r.return,e)}}break;case 3:if(0!=(1024&e)){if(9===(r=(e=t.stateNode.containerInfo).nodeType))uw(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":uw(e);break;default:e.textContent=""}}break;default:if(0!=(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,oa=e;break}oa=t.return}}(e,t,r)}finally{oA=s,R.p=a,O.T=n}}o0=1,lb(),lx(),lw()}}function lb(){if(1===o0){o0=0;var e=o1,t=o2,r=0!=(13878&t.flags);if(0!=(13878&t.subtreeFlags)||r){r=O.T,O.T=null;var n=R.p;R.p=2;var a=oA;oA|=4;try{op(t,e);var i=ul,s=rA(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(s!==o&&o&&o.ownerDocument&&function e(t,r){return!!t&&!!r&&(t===r||(!t||3!==t.nodeType)&&(r&&3===r.nodeType?e(t,r.parentNode):"contains"in t?t.contains(r):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(r))))}(o.ownerDocument.documentElement,o)){if(null!==l&&rj(o)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in o)o.selectionStart=u,o.selectionEnd=Math.min(c,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(s=g,g=m,m=s);var y=rD(o,m),v=rD(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}u8=!!uo,ul=uo=null}finally{oA=a,R.p=n,O.T=r}}e.current=t,o0=2}}function lx(){if(2===o0){o0=0;var e=o1,t=o2,r=0!=(8772&t.flags);if(0!=(8772&t.subtreeFlags)||r){r=O.T,O.T=null;var n=R.p;R.p=2;var a=oA;oA|=4;try{oi(e,t.alternate,t)}finally{oA=a,R.p=n,O.T=r}}o0=3}}function lw(){if(4===o0||3===o0){o0=0,ee();var e=o1,t=o2,r=o5,n=o6;0!=(10256&t.subtreeFlags)||0!=(10256&t.flags)?o0=5:(o0=0,o2=o1=null,lk(e,e.pendingLanes));var a=e.pendingLanes;if(0===a&&(oZ=null),eI(r),t=t.stateNode,ed&&"function"==typeof ed.onCommitFiberRoot)try{ed.onCommitFiberRoot(ec,t,void 0,128==(128&t.current.flags))}catch(e){}if(null!==n){t=O.T,a=R.p,R.p=2,O.T=null;try{for(var i=e.onRecoverableError,s=0;s<n.length;s++){var o=n[s];i(o.value,{componentStack:o.stack})}}finally{O.T=t,R.p=a}}0!=(3&o5)&&lE(),lU(e),a=e.pendingLanes,0!=(4194090&r)&&0!=(42&a)?e===o7?o8++:(o8=0,o7=e):o8=0,lF(0,!1)}}function lk(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,n1(t))}function lE(e){return lb(),lx(),lw(),lS(e)}function lS(){if(5!==o0)return!1;var e=o1,t=o3;o3=0;var r=eI(o5),n=O.T,a=R.p;try{R.p=32>r?32:r,O.T=null,r=o4,o4=null;var i=o1,s=o5;if(o0=0,o2=o1=null,o5=0,0!=(6&oA))throw Error(o(331));var l=oA;if(oA|=4,oT(i.current),ox(i,i.current,s,r),oA=l,lF(0,!1),ed&&"function"==typeof ed.onPostCommitFiberRoot)try{ed.onPostCommitFiberRoot(ec,i)}catch(e){}return!0}finally{R.p=a,O.T=n,lk(e,t)}}function lN(e,t,r){t=r1(r,t),t=sy(e.stateNode,t,2),null!==(e=ag(e,t,2))&&(eS(e,2),lU(e))}function l_(e,t,r){if(3===e.tag)lN(e,e,r);else for(;null!==t;){if(3===t.tag){lN(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===oZ||!oZ.has(n))){e=r1(r,e),null!==(n=ag(t,r=sv(2),2))&&(sb(r,n,t,e),eS(n,2),lU(n));break}}t=t.return}}function lT(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new oD;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(oF=!0,a.add(r),e=lI.bind(null,e,t,r),t.then(e,e))}function lI(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,oj===e&&(oO&r)===r&&(4===oz||3===oz&&(0x3c00000&oO)===oO&&300>et()-oY?0==(2&oA)&&lo(e,0):oq|=r,oW===oO&&(oW=0)),lU(e)}function lC(e,t){0===t&&(t=ek()),null!==(e=r7(e,t))&&(eS(e,t),lU(e))}function lD(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),lC(e,r)}function lA(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==n&&n.delete(t),lC(e,r)}var lj=null,lP=null,lO=!1,lR=!1,lL=!1,lM=0;function lU(e){e!==lP&&null===e.next&&(null===lP?lj=lP=e:lP=lP.next=e),lR=!0,lO||(lO=!0,uy(function(){0!=(6&oA)?X(en,lV):lz()}))}function lF(e,t){if(!lL&&lR){lL=!0;do for(var r=!1,n=lj;null!==n;){if(!t)if(0!==e){var a=n.pendingLanes;if(0===a)var i=0;else{var s=n.suspendedLanes,o=n.pingedLanes;i=0xc000095&(i=(1<<31-ef(42|e)+1)-1&(a&~(s&~o)))?0xc000095&i|1:i?2|i:0}0!==i&&(r=!0,lq(n,i))}else i=oO,0==(3&(i=eb(n,n===oj?i:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||ex(n,i)||(r=!0,lq(n,i));n=n.next}while(r)lL=!1}}function lV(){lz()}function lz(){lR=lO=!1;var e,t=0;0!==lM&&(((e=window.event)&&"popstate"===e.type?e===uf||(uf=e,0):(uf=null,1))||(t=lM),lM=0);for(var r=et(),n=null,a=lj;null!==a;){var i=a.next,s=lB(a,r);0===s?(a.next=null,null===n?lj=i:n.next=i,null===i&&(lP=n)):(n=a,(0!==t||0!=(3&s))&&(lR=!0)),a=i}lF(t,!1)}function lB(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=-0x3c00001&e.pendingLanes;0<i;){var s=31-ef(i),o=1<<s,l=a[s];-1===l?(0==(o&r)||0!=(o&n))&&(a[s]=function(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(t=oj,r=oO,r=eb(e,e===t?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===oR||9===oR)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&J(n),e.callbackNode=null,e.callbackPriority=0;if(0==(3&r)||ex(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&J(n),eI(r)){case 2:case 8:r=ea;break;case 32:default:r=ei;break;case 0x10000000:r=eo}return r=X(r,n=lH.bind(null,e)),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&J(n),e.callbackPriority=2,e.callbackNode=null,2}function lH(e,t){if(0!==o0&&5!==o0)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(lE(!0)&&e.callbackNode!==r)return null;var n=oO;return 0===(n=eb(e,e===oj?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(lr(e,n,t),lB(e,et()),null!=e.callbackNode&&e.callbackNode===r?lH.bind(null,e):null)}function lq(e,t){if(lE())return null;lr(e,t,!0)}function l$(){return 0===lM&&(lM=ew()),lM}function lW(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:tm(""+e)}function lG(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var lK=0;lK<rJ.length;lK++){var lQ=rJ[lK];rZ(lQ.toLowerCase(),"on"+(lQ[0].toUpperCase()+lQ.slice(1)))}rZ(rq,"onAnimationEnd"),rZ(r$,"onAnimationIteration"),rZ(rW,"onAnimationStart"),rZ("dblclick","onDoubleClick"),rZ("focusin","onFocus"),rZ("focusout","onBlur"),rZ(rG,"onTransitionRun"),rZ(rK,"onTransitionStart"),rZ(rQ,"onTransitionCancel"),rZ(rY,"onTransitionEnd"),eK("onMouseEnter",["mouseout","mouseover"]),eK("onMouseLeave",["mouseout","mouseover"]),eK("onPointerEnter",["pointerout","pointerover"]),eK("onPointerLeave",["pointerout","pointerover"]),eG("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eG("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eG("onBeforeInput",["compositionend","keypress","textInput","paste"]),eG("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eG("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eG("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lY="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lY));function lJ(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var o=n[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=u;try{i(a)}catch(e){sd(e)}a.currentTarget=null,i=l}else for(s=0;s<n.length;s++){if(l=(o=n[s]).instance,u=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;i=o,a.currentTarget=u;try{i(a)}catch(e){sd(e)}a.currentTarget=null,i=l}}}}function lZ(e,t){var r=t[eO];void 0===r&&(r=t[eO]=new Set);var n=e+"__bubble";r.has(n)||(l5(t,e,2,!1),r.add(n))}function l0(e,t,r){var n=0;t&&(n|=4),l5(r,e,n,t)}var l1="_reactListening"+Math.random().toString(36).slice(2);function l2(e){if(!e[l1]){e[l1]=!0,e$.forEach(function(t){"selectionchange"!==t&&(lX.has(t)||l0(t,!1,e),l0(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[l1]||(t[l1]=!0,l0("selectionchange",!1,t))}}function l5(e,t,r,n){switch(ca(t)){case 2:var a=u7;break;case 8:a=u9;break;default:a=ce}r=a.bind(null,t,r,e),a=void 0,tN&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function l3(e,t,r,n,a){var i=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var o=n.stateNode.containerInfo;if(o===a)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&s.stateNode.containerInfo===a)return;s=s.return}for(;null!==o;){if(null===(s=eV(o)))return;if(5===(l=s.tag)||6===l||26===l||27===l){n=i=s;continue e}o=o.parentNode}}n=n.return}tk(function(){var n=i,a=ty(r),s=[];e:{var o=rX.get(e);if(void 0!==o){var l=tq,c=e;switch(e){case"keypress":if(0===tA(r))break e;case"keydown":case"keyup":l=t4;break;case"focusin":c="focus",l=tY;break;case"focusout":c="blur",l=tY;break;case"beforeblur":case"afterblur":l=tY;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=tK;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=tQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=t8;break;case rq:case r$:case rW:l=tX;break;case rY:l=t7;break;case"scroll":case"scrollend":l=tW;break;case"wheel":l=t9;break;case"copy":case"cut":case"paste":l=tJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=t6;break;case"toggle":case"beforetoggle":l=re}var d=0!=(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=n;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=tE(m,f))&&d.push(l4(m,g,p)),h)break;m=m.return}0<d.length&&(o=new l(o,c,null,r,a),s.push({event:o,listeners:d}))}}if(0==(7&t)){if((o="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(o&&r!==tg&&(c=r.relatedTarget||r.fromElement)&&(eV(c)||c[eP])))&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(c=r.relatedTarget||r.toElement,l=n,null!==(c=c?eV(c):null)&&(h=u(c),d=c.tag,c!==h||5!==d&&27!==d&&6!==d)&&(c=null)):(l=null,c=n),l!==c)){if(d=tK,g="onMouseLeave",f="onMouseEnter",m="mouse",("pointerout"===e||"pointerover"===e)&&(d=t6,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==l?o:eB(l),p=null==c?o:eB(c),(o=new d(g,m+"leave",l,r,a)).target=h,o.relatedTarget=p,g=null,eV(a)===n&&((d=new d(f,m+"enter",c,r,a)).target=p,d.relatedTarget=h,g=d),h=g,l&&c)t:{for(d=l,f=c,m=0,p=d;p;p=l8(p))m++;for(p=0,g=f;g;g=l8(g))p++;for(;0<m-p;)d=l8(d),m--;for(;0<p-m;)f=l8(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break t;d=l8(d),f=l8(f)}d=null}else d=null;null!==l&&l7(s,o,l,d,!1),null!==c&&null!==h&&l7(s,h,c,d,!0)}e:{if("select"===(l=(o=n?eB(n):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var y,v=ry;else if(rd(o))if(rv)v=r_;else{v=rS;var b=rE}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)?v=rN:n&&th(n.elementType)&&(v=ry);if(v&&(v=v(e,n))){rh(s,v,r,a);break e}b&&b(e,o,n),"focusout"===e&&n&&"number"===o.type&&null!=n.memoizedProps.value&&ta(o,"number",o.value)}switch(b=n?eB(n):window,e){case"focusin":(rd(b)||"true"===b.contentEditable)&&(rO=b,rR=n,rL=null);break;case"focusout":rL=rR=rO=null;break;case"mousedown":rM=!0;break;case"contextmenu":case"mouseup":case"dragend":rM=!1,rU(s,r,a);break;case"selectionchange":if(rP)break;case"keydown":case"keyup":rU(s,r,a)}if(rr)t:{switch(e){case"compositionstart":var x="onCompositionStart";break t;case"compositionend":x="onCompositionEnd";break t;case"compositionupdate":x="onCompositionUpdate";break t}x=void 0}else ru?ro(e,r)&&(x="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(x="onCompositionStart");x&&(ri&&"ko"!==r.locale&&(ru||"onCompositionStart"!==x?"onCompositionEnd"===x&&ru&&(y=tD()):(tI="value"in(tT=a)?tT.value:tT.textContent,ru=!0)),0<(b=l6(n,x)).length&&(x=new tZ(x,e,null,r,a),s.push({event:x,listeners:b}),y?x.data=y:null!==(y=rl(r))&&(x.data=y))),(y=ra?function(e,t){switch(e){case"compositionend":return rl(t);case"keypress":if(32!==t.which)return null;return rs=!0," ";case"textInput":return" "===(e=t.data)&&rs?null:e;default:return null}}(e,r):function(e,t){if(ru)return"compositionend"===e||!rr&&ro(e,t)?(e=tD(),tC=tI=tT=null,ru=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ri&&"ko"!==t.locale?null:t.data}}(e,r))&&0<(x=l6(n,"onBeforeInput")).length&&(b=new tZ("onBeforeInput","beforeinput",null,r,a),s.push({event:b,listeners:x}),b.data=y);var w=e;if("submit"===w&&n&&n.stateNode===a){var k=lW((a[ej]||null).action),E=r.submitter;E&&null!==(w=(w=E[ej]||null)?lW(w.formAction):E.getAttribute("formAction"))&&(k=w,E=null);var S=new tq("action","action",null,r,a);s.push({event:S,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==lM){var e=E?lG(a,E):new FormData(a);iR(n,{pending:!0,data:e,method:a.method,action:k},null,e)}}else"function"==typeof k&&(S.preventDefault(),iR(n,{pending:!0,data:e=E?lG(a,E):new FormData(a),method:a.method,action:k},k,e))},currentTarget:a}]})}}lJ(s,t)})}function l4(e,t,r){return{instance:e,listener:t,currentTarget:r}}function l6(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,i=a.stateNode;if(5!==(a=a.tag)&&26!==a&&27!==a||null===i||(null!=(a=tE(e,r))&&n.unshift(l4(e,a,i)),null!=(a=tE(e,t))&&n.push(l4(e,a,i))),3===e.tag)return n;e=e.return}return[]}function l8(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag&&27!==e.tag)return e||null}function l7(e,t,r,n,a){for(var i=t._reactName,s=[];null!==r&&r!==n;){var o=r,l=o.alternate,u=o.stateNode;if(o=o.tag,null!==l&&l===n)break;5!==o&&26!==o&&27!==o||null===u||(l=u,a?null!=(u=tE(r,i))&&s.unshift(l4(r,u,l)):a||null!=(u=tE(r,i))&&s.push(l4(r,u,l))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var l9=/\r\n?/g,ue=/\u0000|\uFFFD/g;function ut(e){return("string"==typeof e?e:""+e).replace(l9,"\n").replace(ue,"")}function ur(e,t){return t=ut(t),ut(e)===t}function un(){}function ua(e,t,r,n,a,i){switch(r){case"children":"string"==typeof n?"body"===t||"textarea"===t&&""===n||tl(e,n):("number"==typeof n||"bigint"==typeof n)&&"body"!==t&&tl(e,""+n);break;case"className":eZ(e,"class",n);break;case"tabIndex":eZ(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":eZ(e,r,n);break;case"style":td(e,n,i);break;case"data":if("object"!==t){eZ(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==r)||null==n||"function"==typeof n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=tm(""+n),e.setAttribute(r,n);break;case"action":case"formAction":if("function"==typeof n){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===r?("input"!==t&&ua(e,t,"name",a.name,a,null),ua(e,t,"formEncType",a.formEncType,a,null),ua(e,t,"formMethod",a.formMethod,a,null),ua(e,t,"formTarget",a.formTarget,a,null)):(ua(e,t,"encType",a.encType,a,null),ua(e,t,"method",a.method,a,null),ua(e,t,"target",a.target,a,null))),null==n||"symbol"==typeof n||"boolean"==typeof n){e.removeAttribute(r);break}n=tm(""+n),e.setAttribute(r,n);break;case"onClick":null!=n&&(e.onclick=un);break;case"onScroll":null!=n&&lZ("scroll",e);break;case"onScrollEnd":null!=n&&lZ("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(o(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=r}}break;case"multiple":e.multiple=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"muted":e.muted=n&&"function"!=typeof n&&"symbol"!=typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":case"innerText":case"textContent":break;case"xlinkHref":if(null==n||"function"==typeof n||"boolean"==typeof n||"symbol"==typeof n){e.removeAttribute("xlink:href");break}r=tm(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""+n):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===n?e.setAttribute(r,""):!1!==n&&null!=n&&"function"!=typeof n&&"symbol"!=typeof n?e.setAttribute(r,n):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!=typeof n&&"symbol"!=typeof n&&!isNaN(n)&&1<=n?e.setAttribute(r,n):e.removeAttribute(r);break;case"rowSpan":case"start":null==n||"function"==typeof n||"symbol"==typeof n||isNaN(n)?e.removeAttribute(r):e.setAttribute(r,n);break;case"popover":lZ("beforetoggle",e),lZ("toggle",e),eJ(e,"popover",n);break;case"xlinkActuate":e0(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":e0(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":e0(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":e0(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":e0(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":e0(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":e0(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":e0(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":e0(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":eJ(e,"is",n);break;default:2<r.length&&("o"===r[0]||"O"===r[0])&&("n"===r[1]||"N"===r[1])||eJ(e,r=tf.get(r)||r,n)}}function ui(e,t,r,n,a,i){switch(r){case"style":td(e,n,i);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!=typeof n||!("__html"in n))throw Error(o(61));if(null!=(r=n.__html)){if(null!=a.children)throw Error(o(60));e.innerHTML=r}}break;case"children":"string"==typeof n?tl(e,n):("number"==typeof n||"bigint"==typeof n)&&tl(e,""+n);break;case"onScroll":null!=n&&lZ("scroll",e);break;case"onScrollEnd":null!=n&&lZ("scrollend",e);break;case"onClick":null!=n&&(e.onclick=un);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:if(!eW.hasOwnProperty(r))e:{if("o"===r[0]&&"n"===r[1]&&(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"==typeof(i=null!=(i=e[ej]||null)?i[r]:null)&&e.removeEventListener(t,i,a),"function"==typeof n)){"function"!=typeof i&&null!==i&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,n,a);break e}r in e?e[r]=n:!0===n?e.setAttribute(r,""):eJ(e,r,n)}}}function us(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lZ("error",e),lZ("load",e);var n,a=!1,i=!1;for(n in r)if(r.hasOwnProperty(n)){var s=r[n];if(null!=s)switch(n){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ua(e,t,n,s,r,null)}}i&&ua(e,t,"srcSet",r.srcSet,r,null),a&&ua(e,t,"src",r.src,r,null);return;case"input":lZ("invalid",e);var l=n=s=i=null,u=null,c=null;for(a in r)if(r.hasOwnProperty(a)){var d=r[a];if(null!=d)switch(a){case"name":i=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":n=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:ua(e,t,a,d,r,null)}}tn(e,n,l,u,c,s,i,!1),e8(e);return;case"select":for(i in lZ("invalid",e),a=s=n=null,r)if(r.hasOwnProperty(i)&&null!=(l=r[i]))switch(i){case"value":n=l;break;case"defaultValue":s=l;break;case"multiple":a=l;default:ua(e,t,i,l,r,null)}t=n,r=s,e.multiple=!!a,null!=t?ti(e,!!a,t,!1):null!=r&&ti(e,!!a,r,!0);return;case"textarea":for(s in lZ("invalid",e),n=i=a=null,r)if(r.hasOwnProperty(s)&&null!=(l=r[s]))switch(s){case"value":a=l;break;case"defaultValue":i=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:ua(e,t,s,l,r,null)}to(e,a,i,n),e8(e);return;case"option":for(u in r)r.hasOwnProperty(u)&&null!=(a=r[u])&&("selected"===u?e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a:ua(e,t,u,a,r,null));return;case"dialog":lZ("beforetoggle",e),lZ("toggle",e),lZ("cancel",e),lZ("close",e);break;case"iframe":case"object":lZ("load",e);break;case"video":case"audio":for(a=0;a<lY.length;a++)lZ(lY[a],e);break;case"image":lZ("error",e),lZ("load",e);break;case"details":lZ("toggle",e);break;case"embed":case"source":case"link":lZ("error",e),lZ("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in r)if(r.hasOwnProperty(c)&&null!=(a=r[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ua(e,t,c,a,r,null)}return;default:if(th(t)){for(d in r)r.hasOwnProperty(d)&&void 0!==(a=r[d])&&ui(e,t,d,a,r,void 0);return}}for(l in r)r.hasOwnProperty(l)&&null!=(a=r[l])&&ua(e,t,l,a,r,null)}var uo=null,ul=null;function uu(e){return 9===e.nodeType?e:e.ownerDocument}function uc(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ud(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function uh(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var uf=null,up="function"==typeof setTimeout?setTimeout:void 0,um="function"==typeof clearTimeout?clearTimeout:void 0,ug="function"==typeof Promise?Promise:void 0,uy="function"==typeof queueMicrotask?queueMicrotask:void 0!==ug?function(e){return ug.resolve(null).then(e).catch(uv)}:up;function uv(e){setTimeout(function(){throw e})}function ub(e){return"head"===e}function ux(e,t){var r=t,n=0,a=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0<n&&8>n){r=n;var s=e.ownerDocument;if(1&r&&uT(s.documentElement),2&r&&uT(s.body),4&r)for(uT(r=s.head),s=r.firstChild;s;){var o=s.nextSibling,l=s.nodeName;s[eU]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===s.rel.toLowerCase()||r.removeChild(s),s=o}}if(0===a){e.removeChild(i),ck(t);return}a--}else"$"===r||"$?"===r||"$!"===r?a++:n=r.charCodeAt(0)-48;else n=0;r=i}while(r)ck(t)}function uw(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":uw(r),eF(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function uk(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function uE(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var uS=null;function uN(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function u_(e,t,r){switch(t=uu(r),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function uT(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);eF(e)}var uI=new Map,uC=new Set;function uD(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var uA=R.d;R.d={f:function(){var e=uA.f(),t=li();return e||t},r:function(e){var t=ez(e);null!==t&&5===t.tag&&"form"===t.type?iM(t):uA.r(e)},D:function(e){uA.D(e),uP("dns-prefetch",e,null)},C:function(e,t){uA.C(e,t),uP("preconnect",e,t)},L:function(e,t,r){if(uA.L(e,t,r),uj&&e&&t){var n='link[rel="preload"][as="'+tt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(n+='[imagesrcset="'+tt(r.imageSrcSet)+'"]',"string"==typeof r.imageSizes&&(n+='[imagesizes="'+tt(r.imageSizes)+'"]')):n+='[href="'+tt(e)+'"]';var a=n;switch(t){case"style":a=uR(e);break;case"script":a=uU(e)}uI.has(a)||(e=h({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),uI.set(a,e),null!==uj.querySelector(n)||"style"===t&&uj.querySelector(uL(a))||"script"===t&&uj.querySelector(uF(a))||(us(t=uj.createElement("link"),"link",e),eq(t),uj.head.appendChild(t)))}},m:function(e,t){if(uA.m(e,t),uj&&e){var r=t&&"string"==typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+tt(r)+'"][href="'+tt(e)+'"]',a=n;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=uU(e)}if(!uI.has(a)&&(e=h({rel:"modulepreload",href:e},t),uI.set(a,e),null===uj.querySelector(n))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(uj.querySelector(uF(a)))return}us(r=uj.createElement("link"),"link",e),eq(r),uj.head.appendChild(r)}}},X:function(e,t){if(uA.X(e,t),uj&&e){var r=eH(uj).hoistableScripts,n=uU(e),a=r.get(n);a||((a=uj.querySelector(uF(n)))||(e=h({src:e,async:!0},t),(t=uI.get(n))&&uH(e,t),eq(a=uj.createElement("script")),us(a,"link",e),uj.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(n,a))}},S:function(e,t,r){if(uA.S(e,t,r),uj&&e){var n=eH(uj).hoistableStyles,a=uR(e);t=t||"default";var i=n.get(a);if(!i){var s={loading:0,preload:null};if(i=uj.querySelector(uL(a)))s.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},r),(r=uI.get(a))&&uB(e,r);var o=i=uj.createElement("link");eq(o),us(o,"link",e),o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),o.addEventListener("load",function(){s.loading|=1}),o.addEventListener("error",function(){s.loading|=2}),s.loading|=4,uz(i,t,uj)}i={type:"stylesheet",instance:i,count:1,state:s},n.set(a,i)}}},M:function(e,t){if(uA.M(e,t),uj&&e){var r=eH(uj).hoistableScripts,n=uU(e),a=r.get(n);a||((a=uj.querySelector(uF(n)))||(e=h({src:e,async:!0,type:"module"},t),(t=uI.get(n))&&uH(e,t),eq(a=uj.createElement("script")),us(a,"link",e),uj.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(n,a))}}};var uj="undefined"==typeof document?null:document;function uP(e,t,r){if(uj&&"string"==typeof t&&t){var n=tt(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"==typeof r&&(n+='[crossorigin="'+r+'"]'),uC.has(n)||(uC.add(n),e={rel:e,crossOrigin:r,href:t},null===uj.querySelector(n)&&(us(t=uj.createElement("link"),"link",e),eq(t),uj.head.appendChild(t)))}}function uO(e,t,r,n){var a=(a=q.current)?uD(a):null;if(!a)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof r.precedence&&"string"==typeof r.href?(t=uR(r.href),(n=(r=eH(a).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"==typeof r.href&&"string"==typeof r.precedence){e=uR(r.href);var i,s,l,u,c=eH(a).hoistableStyles,d=c.get(e);if(d||(a=a.ownerDocument||a,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=a.querySelector(uL(e)))&&!c._p&&(d.instance=c,d.state.loading=5),uI.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},uI.set(e,r),c||(i=a,s=e,l=r,u=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(u.preload=s=i.createElement("link"),s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),us(s,"link",l),eq(s),i.head.appendChild(s))))),t&&null===n)throw Error(o(528,""));return d}if(t&&null!==n)throw Error(o(529,""));return null;case"script":return t=r.async,"string"==typeof(r=r.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=uU(r),(n=(r=eH(a).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},r.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function uR(e){return'href="'+tt(e)+'"'}function uL(e){return'link[rel="stylesheet"]['+e+"]"}function uM(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function uU(e){return'[src="'+tt(e)+'"]'}function uF(e){return"script[async]"+e}function uV(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+tt(r.href)+'"]');if(n)return t.instance=n,eq(n),n;var a=h({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return eq(n=(e.ownerDocument||e).createElement("style")),us(n,"style",a),uz(n,r.precedence,e),t.instance=n;case"stylesheet":a=uR(r.href);var i=e.querySelector(uL(a));if(i)return t.state.loading|=4,t.instance=i,eq(i),i;n=uM(r),(a=uI.get(a))&&uB(n,a),eq(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),us(i,"link",n),t.state.loading|=4,uz(i,r.precedence,e),t.instance=i;case"script":if(i=uU(r.src),a=e.querySelector(uF(i)))return t.instance=a,eq(a),a;return n=r,(a=uI.get(i))&&uH(n=h({},r),a),eq(a=(e=e.ownerDocument||e).createElement("script")),us(a,"link",n),e.head.appendChild(a),t.instance=a;case"void":return null;default:throw Error(o(443,t.type))}return"stylesheet"===t.type&&0==(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,uz(n,r.precedence,e)),t.instance}function uz(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),a=n.length?n[n.length-1]:null,i=a,s=0;s<n.length;s++){var o=n[s];if(o.dataset.precedence===t)i=o;else if(i!==a)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function uB(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function uH(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var uq=null;function u$(e,t,r){if(null===uq){var n=new Map,a=uq=new Map;a.set(r,n)}else(n=(a=uq).get(r))||(n=new Map,a.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),a=0;a<r.length;a++){var i=r[a];if(!(i[eU]||i[eA]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var s=i.getAttribute(t)||"";s=e+s;var o=n.get(s);o?o.push(i):n.set(s,[i])}}return n}function uW(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function uG(e){return"stylesheet"!==e.type||0!=(3&e.state.loading)}var uK=null;function uQ(){}function uY(){if(this.count--,0===this.count){if(this.stylesheets)uJ(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var uX=null;function uJ(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,uX=new Map,t.forEach(uZ,e),uX=null,uY.call(e))}function uZ(e,t){if(!(4&t.state.loading)){var r=uX.get(e);if(r)var n=r.get(null);else{r=new Map,uX.set(e,r);for(var a=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<a.length;i++){var s=a[i];("LINK"===s.nodeName||"not all"!==s.getAttribute("media"))&&(r.set(s.dataset.precedence,s),n=s)}n&&r.set(null,n)}s=(a=t.instance).getAttribute("data-precedence"),(i=r.get(s)||n)===n&&r.set(null,a),r.set(s,a),this.count++,n=uY.bind(this),a.addEventListener("load",n),a.addEventListener("error",n),i?i.parentNode.insertBefore(a,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(a,e.firstChild),t.state.loading|=4}}var u0={$$typeof:k,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function u1(e,t,r,n,a,i,s,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=eE(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eE(0),this.hiddenUpdates=eE(null),this.identifierPrefix=n,this.onUncaughtError=a,this.onCaughtError=i,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function u2(e,t,r,n,a,i,s,o,l,u,c,d){return e=new u1(e,t,r,s,o,l,u,d),t=1,!0===i&&(t|=24),i=nn(3,null,null,t),e.current=i,i.stateNode=e,t=n0(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:n,isDehydrated:r,cache:t},af(i),e}function u5(e,t,r,n,a,i){a=a?nt:nt,null===n.context?n.context=a:n.pendingContext=a,(n=am(t)).payload={element:r},null!==(i=void 0===i?null:i)&&(n.callback=i),null!==(r=ag(e,n,t))&&(lt(r,e,t),ay(r,e,t))}function u3(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function u4(e,t){u3(e,t),(e=e.alternate)&&u3(e,t)}function u6(e){if(13===e.tag){var t=r7(e,0x4000000);null!==t&&lt(t,e,0x4000000),u4(e,0x4000000)}}var u8=!0;function u7(e,t,r,n){var a=O.T;O.T=null;var i=R.p;try{R.p=2,ce(e,t,r,n)}finally{R.p=i,O.T=a}}function u9(e,t,r,n){var a=O.T;O.T=null;var i=R.p;try{R.p=8,ce(e,t,r,n)}finally{R.p=i,O.T=a}}function ce(e,t,r,n){if(u8){var a=ct(n);if(null===a)l3(e,t,n,cr,r),cf(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return cs=cp(cs,e,t,r,n,a),!0;case"dragenter":return co=cp(co,e,t,r,n,a),!0;case"mouseover":return cl=cp(cl,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return cu.set(i,cp(cu.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,cc.set(i,cp(cc.get(i)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(cf(e,n),4&t&&-1<ch.indexOf(e)){for(;null!==a;){var i=ez(a);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var s=ev(i.pendingLanes);if(0!==s){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;s;){var l=1<<31-ef(s);o.entanglements[1]|=l,s&=~l}lU(i),0==(6&oA)&&(oX=et()+500,lF(0,!1))}}break;case 13:null!==(o=r7(i,2))&&lt(o,i,2),li(),u4(i,2)}if(null===(i=ct(n))&&l3(e,t,n,cr,r),i===a)break;a=i}null!==a&&n.stopPropagation()}else l3(e,t,n,null,r)}}function ct(e){return cn(e=ty(e))}var cr=null;function cn(e){if(cr=null,null!==(e=eV(e))){var t=u(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=c(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cr=e,null}function ca(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case en:return 2;case ea:return 8;case ei:case es:return 32;case eo:return 0x10000000;default:return 32}default:return 32}}var ci=!1,cs=null,co=null,cl=null,cu=new Map,cc=new Map,cd=[],ch="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cf(e,t){switch(e){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":cl=null;break;case"pointerover":case"pointerout":cu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(t.pointerId)}}function cp(e,t,r,n,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},null!==t&&null!==(t=ez(t))&&u6(t)):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a)),e}function cm(e){var t=eV(e.target);if(null!==t){var r=u(t);if(null!==r){if(13===(t=r.tag)){if(null!==(t=c(r))){e.blockedOn=t,function(e,t){var r=R.p;try{return R.p=e,t()}finally{R.p=r}}(e.priority,function(){if(13===r.tag){var e=o9(),t=r7(r,e=eT(e));null!==t&&lt(t,r,e),u4(r,e)}});return}}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===r.tag?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cg(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=ct(e.nativeEvent);if(null!==r)return null!==(t=ez(r))&&u6(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);tg=n,r.target.dispatchEvent(n),tg=null,t.shift()}return!0}function cy(e,t,r){cg(e)&&r.delete(t)}function cv(){ci=!1,null!==cs&&cg(cs)&&(cs=null),null!==co&&cg(co)&&(co=null),null!==cl&&cg(cl)&&(cl=null),cu.forEach(cy),cc.forEach(cy)}function cb(e,t){e.blockedOn===t&&(e.blockedOn=null,ci||(ci=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,cv)))}var cx=null;function cw(e){cx!==e&&(cx=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){cx===e&&(cx=null);for(var t=0;t<e.length;t+=3){var r=e[t],n=e[t+1],a=e[t+2];if("function"!=typeof n)if(null===cn(n||r))continue;else break;var i=ez(r);null!==i&&(e.splice(t,3),t-=3,iR(i,{pending:!0,data:a,method:r.method,action:n},n,a))}}))}function ck(e){function t(t){return cb(t,e)}null!==cs&&cb(cs,e),null!==co&&cb(co,e),null!==cl&&cb(cl,e),cu.forEach(t),cc.forEach(t);for(var r=0;r<cd.length;r++){var n=cd[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<cd.length&&null===(r=cd[0]).blockedOn;)cm(r),null===r.blockedOn&&cd.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var a=r[n],i=r[n+1],s=a[ej]||null;if("function"==typeof i)s||cw(r);else if(s){var o=null;if(i&&i.hasAttribute("formAction")){if(a=i,s=i[ej]||null)o=s.formAction;else if(null!==cn(a))continue}else o=s.action;"function"==typeof o?r[n+1]=o:(r.splice(n,3),n-=3),cw(r)}}}function cE(e){this._internalRoot=e}function cS(e){this._internalRoot=e}cS.prototype.render=cE.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));u5(t.current,o9(),e,t,null,null)},cS.prototype.unmount=cE.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;u5(e.current,2,null,e,null,null),li(),t[eP]=null}},cS.prototype.unstable_scheduleHydration=function(e){if(e){var t=eC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cd.length&&0!==t&&t<cd[r].priority;r++);cd.splice(r,0,e),0===r&&cm(e)}};var cN=i.version;if("19.1.1"!==cN)throw Error(o(527,cN,"19.1.1"));if(R.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(o(188));throw Error(o(268,e=Object.keys(e).join(",")))}return e=null===(e=null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=u(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return d(a),e;if(i===n)return d(a),t;i=i.sibling}throw Error(o(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(t))?function e(t){var r=t.tag;if(5===r||26===r||27===r||6===r)return t;for(t=t.child;null!==t;){if(null!==(r=e(t)))return r;t=t.sibling}return null}(e):null)?null:e.stateNode},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var c_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!c_.isDisabled&&c_.supportsFiber)try{ec=c_.inject({bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"}),ed=c_}catch(e){}}tR=function(e,t){if(!l(e))throw Error(o(299));var r=!1,n="",a=sh,i=sf,s=sp,u=null;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(s=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&(u=t.unstable_transitionCallbacks)),t=u2(e,1,!1,null,null,r,n,a,i,s,u,null),e[eP]=t.current,l2(e),new cE(t)},tL=function(e,t,r){if(!l(e))throw Error(o(299));var n=!1,a="",i=sh,s=sf,u=sp,c=null,d=null;return null!=r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onUncaughtError&&(i=r.onUncaughtError),void 0!==r.onCaughtError&&(s=r.onCaughtError),void 0!==r.onRecoverableError&&(u=r.onRecoverableError),void 0!==r.unstable_transitionCallbacks&&(c=r.unstable_transitionCallbacks),void 0!==r.formState&&(d=r.formState)),(t=u2(e,1,!0,t,null!=r?r:null,n,a,i,s,u,c,d)).context=nt,r=t.current,(a=am(n=eT(n=o9()))).callback=null,ag(r,a,n),r=n,t.current.lanes=r,eS(t,r),lU(t),e[eP]=t.current,l2(e),new cS(t)},tM="19.1.1"}),k("fO90s",function(e,t){e.exports=w("1wAW3")}),k("1wAW3",function(t,r){function n(e,t){var r=e.length;for(e.push(t);0<r;){var n=r-1>>>1,a=e[n];if(0<s(a,t))e[n]=t,e[r]=a,r=n;else break}}function a(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,r))u<a&&0>s(c,l)?(e[n]=c,e[u]=r,n=u):(e[n]=l,e[o]=r,n=o);else if(u<a&&0>s(c,r))e[n]=c,e[u]=r,n=u;else break}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(e(t.exports,"unstable_now",()=>o,e=>o=e),e(t.exports,"unstable_IdlePriority",()=>l,e=>l=e),e(t.exports,"unstable_ImmediatePriority",()=>u,e=>u=e),e(t.exports,"unstable_LowPriority",()=>c,e=>c=e),e(t.exports,"unstable_NormalPriority",()=>d,e=>d=e),e(t.exports,"unstable_Profiling",()=>h,e=>h=e),e(t.exports,"unstable_UserBlockingPriority",()=>f,e=>f=e),e(t.exports,"unstable_cancelCallback",()=>p,e=>p=e),e(t.exports,"unstable_forceFrameRate",()=>m,e=>m=e),e(t.exports,"unstable_getCurrentPriorityLevel",()=>g,e=>g=e),e(t.exports,"unstable_next",()=>y,e=>y=e),e(t.exports,"unstable_requestPaint",()=>v,e=>v=e),e(t.exports,"unstable_runWithPriority",()=>b,e=>b=e),e(t.exports,"unstable_scheduleCallback",()=>x,e=>x=e),e(t.exports,"unstable_shouldYield",()=>w,e=>w=e),e(t.exports,"unstable_wrapCallback",()=>k,e=>k=e),o=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,l,u,c,d,h,f,p,m,g,y,v,b,x,w,k,E,S=performance;o=function(){return S.now()}}else{var N=Date,_=N.now();o=function(){return N.now()-_}}var T=[],I=[],C=1,D=null,A=3,j=!1,P=!1,O=!1,R=!1,L="function"==typeof setTimeout?setTimeout:null,M="function"==typeof clearTimeout?clearTimeout:null,U="undefined"!=typeof setImmediate?setImmediate:null;function F(e){for(var t=a(I);null!==t;){if(null===t.callback)i(I);else if(t.startTime<=e)i(I),t.sortIndex=t.expirationTime,n(T,t);else break;t=a(I)}}function V(e){if(O=!1,F(e),!P)if(null!==a(T))P=!0,z||(z=!0,E());else{var t=a(I);null!==t&&Q(V,t.startTime-e)}}var z=!1,B=-1,H=5,q=-1;function $(){return!!R||!(o()-q<H)}function W(){if(R=!1,z){var e=o();q=e;var t=!0;try{e:{P=!1,O&&(O=!1,M(B),B=-1),j=!0;var r=A;try{t:{for(F(e),D=a(T);null!==D&&!(D.expirationTime>e&&$());){var n=D.callback;if("function"==typeof n){D.callback=null,A=D.priorityLevel;var s=n(D.expirationTime<=e);if(e=o(),"function"==typeof s){D.callback=s,F(e),t=!0;break t}D===a(T)&&i(T),F(e)}else i(T);D=a(T)}if(null!==D)t=!0;else{var l=a(I);null!==l&&Q(V,l.startTime-e),t=!1}}break e}finally{D=null,A=r,j=!1}}}finally{t?E():z=!1}}}if("function"==typeof U)E=function(){U(W)};else if("undefined"!=typeof MessageChannel){var G=new MessageChannel,K=G.port2;G.port1.onmessage=W,E=function(){K.postMessage(null)}}else E=function(){L(W,0)};function Q(e,t){B=L(function(){e(o())},t)}l=5,u=1,c=4,d=3,h=null,f=2,p=function(e){e.callback=null},m=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<e?Math.floor(1e3/e):5},g=function(){return A},y=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var r=A;A=t;try{return e()}finally{A=r}},v=function(){R=!0},b=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=A;A=e;try{return t()}finally{A=r}},x=function(e,t,r){var i=o();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?i+r:i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=0x3fffffff;break;case 4:s=1e4;break;default:s=5e3}return s=r+s,e={id:C++,callback:t,priorityLevel:e,startTime:r,expirationTime:s,sortIndex:-1},r>i?(e.sortIndex=r,n(I,e),null===a(T)&&e===a(I)&&(O?(M(B),B=-1):O=!0,Q(V,r-i))):(e.sortIndex=s,n(T,e),P||j||(P=!0,z||(z=!0,E()))),e},w=$,k=function(e){var t=A;return function(){var r=A;A=t;try{return e.apply(this,arguments)}finally{A=r}}}}),k("acw62",function(e,t){e.exports=w("9Qu0I")}),k("1u0KT",function(e,t){!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=w("5R2tS")}),k("5R2tS",function(t,r){e(t.exports,"__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE",()=>n,e=>n=e),e(t.exports,"createPortal",()=>a,e=>a=e),e(t.exports,"flushSync",()=>i,e=>i=e),e(t.exports,"preconnect",()=>s,e=>s=e),e(t.exports,"prefetchDNS",()=>o,e=>o=e),e(t.exports,"preinit",()=>l,e=>l=e),e(t.exports,"preinitModule",()=>u,e=>u=e),e(t.exports,"preload",()=>c,e=>c=e),e(t.exports,"preloadModule",()=>d,e=>d=e),e(t.exports,"requestFormReset",()=>h,e=>h=e),e(t.exports,"unstable_batchedUpdates",()=>f,e=>f=e),e(t.exports,"useFormState",()=>p,e=>p=e),e(t.exports,"useFormStatus",()=>m,e=>m=e),e(t.exports,"version",()=>g,e=>g=e);var n,a,i,s,o,l,u,c,d,h,f,p,m,g,y=w("acw62");function v(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function b(){}var x={d:{f:b,r:function(){throw Error(v(522))},D:b,C:b,L:b,m:b,X:b,S:b,M:b},p:0,findDOMNode:null},k=Symbol.for("react.portal"),E=y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}n=x,a=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(v(299));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},i=function(e){var t=E.T,r=x.p;try{if(E.T=null,x.p=2,e)return e()}finally{E.T=t,x.p=r,x.d.f()}},s=function(e,t){"string"==typeof e&&(t=t?"string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:null,x.d.C(e,t))},o=function(e){"string"==typeof e&&x.d.D(e)},l=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var r=t.as,n=S(r,t.crossOrigin),a="string"==typeof t.integrity?t.integrity:void 0,i="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===r?x.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:a,fetchPriority:i}):"script"===r&&x.d.X(e,{crossOrigin:n,integrity:a,fetchPriority:i,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},u=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var r=S(t.as,t.crossOrigin);x.d.M(e,{crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&x.d.M(e)},c=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var r=t.as,n=S(r,t.crossOrigin);x.d.L(e,r,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},d=function(e,t){if("string"==typeof e)if(t){var r=S(t.as,t.crossOrigin);x.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:r,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else x.d.m(e)},h=function(e){x.d.r(e)},f=function(e,t){return e(t)},p=function(e,t,r){return E.H.useFormState(e,t,r)},m=function(){return E.H.useHostTransitionStatus()},g="19.1.1"}),k("g8dzF",function(t,r){e(t.exports,"notificationService",()=>i),w("ilpIi");var n=w("9HrqM"),a=w("e0EYX");let i=new class{async sendNotification(e){try{let t=await (0,n.addDoc)((0,n.collection)(a.db,"notifications"),{...e,createdAt:n.Timestamp.now(),read:!1});console.log("Notificación enviada con ID:",t.id)}catch(e){throw console.error("Error al enviar notificación:",e),e}}async markAsRead(e){try{let t=(0,n.doc)(a.db,"notifications",e);await (0,n.updateDoc)(t,{read:!0})}catch(e){throw console.error("Error al marcar notificación como leída:",e),e}}async getNotificationsForUser(e){try{let t=(0,n.query)((0,n.collection)(a.db,"notifications"),(0,n.where)("userId","==",e),(0,n.orderBy)("createdAt","desc"));return(await (0,n.getDocs)(t)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error al obtener notificaciones:",e),[]}}subscribeToUserNotifications(e,t){try{let r=(0,n.query)((0,n.collection)(a.db,"notifications"),(0,n.where)("userId","==",e),(0,n.orderBy)("createdAt","desc"));return(0,n.onSnapshot)(r,e=>{let r=e.docs.map(e=>({id:e.id,...e.data()}));t(r)},e=>{console.error("Error en la suscripción de notificaciones:",e),t([])})}catch(e){return console.error("Error al suscribirse a notificaciones:",e),()=>{}}}}}),k("ilpIi",function(t,r){e(t.exports,"addDoc",()=>w("9HrqM").addDoc),e(t.exports,"collection",()=>w("9HrqM").collection),e(t.exports,"deleteDoc",()=>w("9HrqM").deleteDoc),e(t.exports,"doc",()=>w("9HrqM").doc),e(t.exports,"documentId",()=>w("9HrqM").documentId),e(t.exports,"getDoc",()=>w("9HrqM").getDoc),e(t.exports,"getDocs",()=>w("9HrqM").getDocs),e(t.exports,"getFirestore",()=>w("9HrqM").getFirestore),e(t.exports,"onSnapshot",()=>w("9HrqM").onSnapshot),e(t.exports,"orderBy",()=>w("9HrqM").orderBy),e(t.exports,"query",()=>w("9HrqM").query),e(t.exports,"serverTimestamp",()=>w("9HrqM").serverTimestamp),e(t.exports,"setDoc",()=>w("9HrqM").setDoc),e(t.exports,"Timestamp",()=>w("9HrqM").Timestamp),e(t.exports,"updateDoc",()=>w("9HrqM").updateDoc),e(t.exports,"where",()=>w("9HrqM").where),e(t.exports,"writeBatch",()=>w("9HrqM").writeBatch),w("9HrqM")}),k("9HrqM",function(t,r){e(t.exports,"Timestamp",()=>F),e(t.exports,"collection",()=>aA),e(t.exports,"doc",()=>aj),e(t.exports,"getFirestore",()=>aL),e(t.exports,"documentId",()=>aV),e(t.exports,"query",()=>il),e(t.exports,"where",()=>ic),e(t.exports,"orderBy",()=>ip),e(t.exports,"getDoc",()=>iS),e(t.exports,"getDocs",()=>i_),e(t.exports,"setDoc",()=>iT),e(t.exports,"updateDoc",()=>iI),e(t.exports,"deleteDoc",()=>iC),e(t.exports,"addDoc",()=>iD),e(t.exports,"onSnapshot",()=>iA),e(t.exports,"serverTimestamp",()=>iL),e(t.exports,"writeBatch",()=>iM);var n,a,i,s,o=w("7xvHX"),l=w("eryG9"),u=w("5Z2ef"),c=w("gMVVg"),d=w("cozvr"),h=w("4rHck"),f=w("6ZWSX").Buffer;let p="@firebase/firestore";class m{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}m.UNAUTHENTICATED=new m(null),m.GOOGLE_CREDENTIALS=new m("google-credentials-uid"),m.FIRST_PARTY=new m("first-party-uid"),m.MOCK_USER=new m("mock-user");let g="10.14.0",y=new(0,u.Logger)("@firebase/firestore");function v(){return y.logLevel}function b(e,...t){if(y.logLevel<=u.LogLevel.DEBUG){let r=t.map(E);y.debug(`Firestore (${g}): ${e}`,...r)}}function x(e,...t){if(y.logLevel<=u.LogLevel.ERROR){let r=t.map(E);y.error(`Firestore (${g}): ${e}`,...r)}}function k(e,...t){if(y.logLevel<=u.LogLevel.WARN){let r=t.map(E);y.warn(`Firestore (${g}): ${e}`,...r)}}function E(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function S(e="Unexpected state"){let t=`FIRESTORE (${g}) INTERNAL ASSERTION FAILED: `+e;throw x(t),Error(t)}let N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _ extends c.FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class T{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class I{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(m.UNAUTHENTICATED))}shutdown(){}}class D{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class A{constructor(e){this.t=e,this.currentUser=m.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){void 0===this.o||S();let r=this.i,n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve(),a=new T;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new T,e.enqueueRetryable(()=>n(this.currentUser))};let i=()=>{let t=a;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},s=e=>{b("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?s(e):(b("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new T)}},0),i()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(b("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?("string"==typeof t.accessToken||S(),new I(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return null===e||"string"==typeof e||S(),new m(e)}}class j{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=m.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class P{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new j(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(m.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){void 0===this.o||S();let r=e=>{null!=e.error&&b("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.R;return this.R=e.token,b("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{b("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.A.getImmediate({optional:!0});e?n(e):b("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?("string"==typeof e.token||S(),this.R=e.token,new O(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class L{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let n=function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let e=0;e<40;e++)r[e]=Math.floor(256*Math.random());return r}(40);for(let a=0;a<n.length;++a)r.length<20&&n[a]<t&&(r+=e.charAt(n[a]%e.length))}return r}}function M(e,t){return e<t?-1:+(e>t)}function U(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}class F{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new _(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new _(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return F.fromMillis(Date.now())}static fromDate(e){return F.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new F(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?M(this.nanoseconds,e.nanoseconds):M(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class V{constructor(e){this.timestamp=e}static fromTimestamp(e){return new V(e)}static min(){return new V(new F(0,0))}static max(){return new V(new F(0x3afff4417f,0x3b9ac9ff))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class z{constructor(e,t,r){void 0===t?t=0:t>e.length&&S(),void 0===r?r=e.length-t:r>e.length-t&&S(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===z.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof z?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.get(n),a=t.get(n);if(r<a)return -1;if(r>a)return 1}return e.length<t.length?-1:+(e.length>t.length)}}class B extends z{construct(e,t,r){return new B(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new _(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new B(t)}static emptyPath(){return new B([])}}let H=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class q extends z{construct(e,t,r){return new q(e,t,r)}static isValidIdentifier(e){return H.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),q.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new q(["__name__"])}static fromServerFormat(e){let t=[],r="",n=0,a=()=>{if(0===r.length)throw new _(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},i=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new _(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new _(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?i=!i:"."!==t||i?r+=t:a(),n++}if(a(),i)throw new _(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new q(t)}static emptyPath(){return new q([])}}class ${constructor(e){this.path=e}static fromPath(e){return new $(B.fromString(e))}static fromName(e){return new $(B.fromString(e).popFirst(5))}static empty(){return new $(B.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===B.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return B.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $(new B(e.slice()))}}class W{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new W(V.min(),$.empty(),-1)}static max(){return new W(V.max(),$.empty(),-1)}}class G{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function K(e){if(e.code!==N.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;b("LocalStore","Unexpectedly lost primary lease")}class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof Q?t:Q.resolve(t)}catch(e){return Q.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,r)=>{t(e)})}static reject(e){return new Q((t,r)=>{r(e)})}static waitFor(e){return new Q((t,r)=>{let n=0,a=0,i=!1;e.forEach(e=>{++n,e.next(()=>{++a,i&&a===n&&t()},e=>r(e))}),i=!0,a===n&&t()})}static or(e){let t=Q.resolve(!1);for(let r of e)t=t.next(e=>e?Q.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new Q((r,n)=>{let a=e.length,i=Array(a),s=0;for(let o=0;o<a;o++){let l=o;t(e[l]).next(e=>{i[l]=e,++s===a&&r(i)},e=>n(e))}})}static doWhile(e,t){return new Q((r,n)=>{let a=()=>{!0===e()?t().next(()=>{a()},n):r()};a()})}}function Y(e){return"IndexedDbTransactionError"===e.name}class X{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}function J(e){return 0===e&&1/e==-1/0}function Z(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function ee(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function et(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}X.oe=-1;class er{constructor(e,t){this.comparator=e,this.root=t||ea.EMPTY}insert(e,t){return new er(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ea.BLACK,null,null))}remove(e){return new er(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ea.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new en(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new en(this.root,e,this.comparator,!1)}getReverseIterator(){return new en(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new en(this.root,e,this.comparator,!0)}}class en{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&n&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ea{constructor(e,t,r,n,a){this.key=e,this.value=t,this.color=null!=r?r:ea.RED,this.left=null!=n?n:ea.EMPTY,this.right=null!=a?a:ea.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,a){return new ea(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,a=r(e,n.key);return(n=a<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===a?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return ea.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return ea.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,ea.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,ea.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();let e=this.left.check();if(e!==this.right.check())throw S();return e+ +!this.isRed()}}ea.EMPTY=null,ea.RED=!0,ea.BLACK=!1,ea.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(e,t,r,n,a){return this}insert(e,t,r){return new ea(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ei{constructor(e){this.comparator=e,this.data=new er(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new es(this.data.getIterator())}getIteratorFrom(e){return new es(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof ei)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new ei(this.comparator);return t.data=e,t}}class es{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class eo{constructor(e){this.fields=e,e.sort(q.comparator)}static empty(){return new eo([])}unionWith(e){let t=new ei(q.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new eo(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return U(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class el extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class eu{constructor(e){this.binaryString=e}static fromBase64String(e){return new eu(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new el("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new eu(function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return M(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}eu.EMPTY_BYTE_STRING=new eu("");let ec=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ed(e){if(e||S(),"string"==typeof e){let t=0,r=ec.exec(e);if(r||S(),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:eh(e.seconds),nanos:eh(e.nanos)}}function eh(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ef(e){return"string"==typeof e?eu.fromBase64String(e):eu.fromUint8Array(e)}function ep(e){var t,r;return"server_timestamp"===(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{}).__type__)?void 0:r.stringValue)}function em(e){let t=e.mapValue.fields.__previous_value__;return ep(t)?em(t):t}function eg(e){let t=ed(e.mapValue.fields.__local_write_time__.timestampValue);return new F(t.seconds,t.nanos)}class ey{constructor(e,t,r,n,a,i,s,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l}}class ev{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ev("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ev&&e.projectId===this.projectId&&e.database===this.database}}let eb={};function ex(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ep(e)?4:eR(e)?0x1fffffffffffff:eP(e)?10:11:S()}function ew(e,t){if(e===t)return!0;let r=ex(e);if(r!==ex(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return eg(e).isEqual(eg(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=ed(e.timestampValue),a=ed(t.timestampValue);return n.seconds===a.seconds&&n.nanos===a.nanos;case 5:return e.stringValue===t.stringValue;case 6:return ef(e.bytesValue).isEqual(ef(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return eh(e.geoPointValue.latitude)===eh(t.geoPointValue.latitude)&&eh(e.geoPointValue.longitude)===eh(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return eh(e.integerValue)===eh(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=eh(e.doubleValue),n=eh(t.doubleValue);return r===n?J(r)===J(n):isNaN(r)&&isNaN(n)}return!1;case 9:return U(e.arrayValue.values||[],t.arrayValue.values||[],ew);case 10:case 11:let i=e.mapValue.fields||{},s=t.mapValue.fields||{};if(Z(i)!==Z(s))return!1;for(let e in i)if(i.hasOwnProperty(e)&&(void 0===s[e]||!ew(i[e],s[e])))return!1;return!0;default:return S()}}function ek(e,t){return void 0!==(e.values||[]).find(e=>ew(e,t))}function eE(e,t){if(e===t)return 0;let r=ex(e),n=ex(t);if(r!==n)return M(r,n);switch(r){case 0:case 0x1fffffffffffff:return 0;case 1:return M(e.booleanValue,t.booleanValue);case 2:let a=eh(e.integerValue||e.doubleValue),i=eh(t.integerValue||t.doubleValue);return a<i?-1:a>i?1:a===i?0:isNaN(a)?isNaN(i)?0:-1:1;case 3:return eS(e.timestampValue,t.timestampValue);case 4:return eS(eg(e),eg(t));case 5:return M(e.stringValue,t.stringValue);case 6:return function(e,t){let r=ef(e),n=ef(t);return r.compareTo(n)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=M(r[e],n[e]);if(0!==t)return t}return M(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){let r=M(eh(e.latitude),eh(t.latitude));return 0!==r?r:M(eh(e.longitude),eh(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return eN(e.arrayValue,t.arrayValue);case 10:return function(e,t){var r,n,a,i;let s=e.fields||{},o=t.fields||{},l=null==(r=s.value)?void 0:r.arrayValue,u=null==(n=o.value)?void 0:n.arrayValue,c=M((null==(a=null==l?void 0:l.values)?void 0:a.length)||0,(null==(i=null==u?void 0:u.values)?void 0:i.length)||0);return 0!==c?c:eN(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===eb&&t===eb)return 0;if(e===eb)return 1;if(t===eb)return -1;let r=e.fields||{},n=Object.keys(r),a=t.fields||{},i=Object.keys(a);n.sort(),i.sort();for(let e=0;e<n.length&&e<i.length;++e){let t=M(n[e],i[e]);if(0!==t)return t;let s=eE(r[n[e]],a[i[e]]);if(0!==s)return s}return M(n.length,i.length)}(e.mapValue,t.mapValue);default:throw S()}}function eS(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return M(e,t);let r=ed(e),n=ed(t),a=M(r.seconds,n.seconds);return 0!==a?a:M(r.nanos,n.nanos)}function eN(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=eE(r[e],n[e]);if(t)return t}return M(r.length,n.length)}function e_(e){var t,r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){let t=ed(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ef(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,$.fromName(t).toString()):"geoPointValue"in e?(r=e.geoPointValue,`geo(${r.latitude},${r.longitude})`):"arrayValue"in e?function(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=e_(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let a of t)n?n=!1:r+=",",r+=`${a}:${e_(e.fields[a])}`;return r+"}"}(e.mapValue):S()}function eT(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function eI(e){return!!e&&"integerValue"in e}function eC(e){return!!e&&"arrayValue"in e}function eD(e){return!!e&&"nullValue"in e}function eA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ej(e){return!!e&&"mapValue"in e}function eP(e){var t,r;return"__vector__"===(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{}).__type__)?void 0:r.stringValue)}function eO(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return ee(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=eO(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=eO(e.arrayValue.values[r]);return t}return Object.assign({},e)}function eR(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class eL{constructor(e){this.value=e}static empty(){return new eL({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!ej(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=eO(t)}setAll(e){let t=q.emptyPath(),r={},n=[];e.forEach((e,a)=>{if(!t.isImmediateParentOf(a)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=a.popLast()}e?r[a.lastSegment()]=eO(e):n.push(a.lastSegment())});let a=this.getFieldsMap(t);this.applyChanges(a,r,n)}delete(e){let t=this.field(e.popLast());ej(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ew(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];ej(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(ee(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new eL(eO(this.value))}}class eM{constructor(e,t,r,n,a,i,s){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=a,this.data=i,this.documentState=s}static newInvalidDocument(e){return new eM(e,0,V.min(),V.min(),V.min(),eL.empty(),0)}static newFoundDocument(e,t,r,n){return new eM(e,1,t,V.min(),r,n,0)}static newNoDocument(e,t){return new eM(e,2,t,V.min(),V.min(),eL.empty(),0)}static newUnknownDocument(e,t){return new eM(e,3,t,V.min(),V.min(),eL.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(V.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=eL.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=eL.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof eM&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new eM(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class eU{constructor(e,t){this.position=e,this.inclusive=t}}function eF(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){let i=t[a],s=e.position[a];if(n=i.field.isKeyField()?$.comparator($.fromName(s.referenceValue),r.key):eE(s,r.data.field(i.field)),"desc"===i.dir&&(n*=-1),0!==n)break}return n}function eV(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!ew(e.position[r],t.position[r]))return!1;return!0}class ez{constructor(e,t="asc"){this.field=e,this.dir=t}}class eB{}class eH extends eB{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new eG(e,t,r):"array-contains"===t?new eX(e,r):"in"===t?new eJ(e,r):"not-in"===t?new eZ(e,r):"array-contains-any"===t?new e0(e,r):new eH(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new eK(e,r):new eQ(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(eE(t,this.value)):null!==t&&ex(this.value)===ex(t)&&this.matchesComparison(eE(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return S()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class eq extends eB{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new eq(e,t)}matches(e){return e$(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function e$(e){return"and"===e.op}function eW(e){for(let t of e.filters)if(t instanceof eq)return!1;return!0}class eG extends eH{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}}class eK extends eH{constructor(e,t){super(e,"in",t),this.keys=eY("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eQ extends eH{constructor(e,t){super(e,"not-in",t),this.keys=eY("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eY(e,t){var r;return((null==(r=t.arrayValue)?void 0:r.values)||[]).map(e=>$.fromName(e.referenceValue))}class eX extends eH{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return eC(t)&&ek(t.arrayValue,this.value)}}class eJ extends eH{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&ek(this.value.arrayValue,t)}}class eZ extends eH{constructor(e,t){super(e,"not-in",t)}matches(e){if(ek(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&!ek(this.value.arrayValue,t)}}class e0 extends eH{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!eC(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ek(this.value.arrayValue,e))}}class e1{constructor(e,t=null,r=[],n=[],a=null,i=null,s=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=a,this.startAt=i,this.endAt=s,this.ue=null}}function e2(e,t=null,r=[],n=[],a=null,i=null,s=null){return new e1(e,t,r,n,a,i,s)}function e5(e){if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof eH)return t.field.canonicalString()+t.op.toString()+e_(t.value);if(eW(t)&&e$(t))return t.filters.map(t=>e(t)).join(",");{let r=t.filters.map(t=>e(t)).join(",");return`${t.op}(${r})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>e_(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>e_(e)).join(",")),e.ue=t}return e.ue}function e3(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let a=0;a<e.orderBy.length;a++){var r,n;if(r=e.orderBy[a],n=t.orderBy[a],!(r.dir===n.dir&&r.field.isEqual(n.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!function e(t,r){return t instanceof eH?r instanceof eH&&t.op===r.op&&t.field.isEqual(r.field)&&ew(t.value,r.value):t instanceof eq?r instanceof eq&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((t,n,a)=>t&&e(n,r.filters[a]),!0):void S()}(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!eV(e.startAt,t.startAt)&&eV(e.endAt,t.endAt)}function e4(e){return $.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class e6{constructor(e,t=null,r=[],n=[],a=null,i="F",s=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=a,this.limitType=i,this.startAt=s,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function e8(e){return new e6(e)}function e7(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function e9(e){return null!==e.collectionGroup}function te(e){if(null===e.ce){let t;e.ce=[];let r=new Set;for(let t of e.explicitOrderBy)e.ce.push(t),r.add(t.field.canonicalString());let n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new ei(q.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{r.has(t.canonicalString())||t.isKeyField()||e.ce.push(new ez(t,n))}),r.has(q.keyField().canonicalString())||e.ce.push(new ez(q.keyField(),n))}return e.ce}function tt(e){return e.le||(e.le=function(e,t){if("F"===e.limitType)return e2(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new ez(e.field,t)});let r=e.endAt?new eU(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new eU(e.startAt.position,e.startAt.inclusive):null;return e2(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}(e,te(e))),e.le}function tr(e,t){let r=e.filters.concat([t]);return new e6(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function tn(e,t,r){return new e6(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function ta(e,t){return e3(tt(e),tt(t))&&e.limitType===t.limitType}function ti(e){return`${e5(tt(e))}|lt:${e.limitType}`}function ts(e){var t;let r;return`Query(target=${r=(t=tt(e)).path.canonicalString(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof eH?`${t.field.canonicalString()} ${t.op} ${e_(t.value)}`:t instanceof eq?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(e=>e_(e)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(e=>e_(e)).join(",")),`Target(${r})`}; limitType=${e.limitType})`}function to(e,t){return t.isFoundDocument()&&function(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):$.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(e,t)&&function(e,t){for(let r of te(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(!e.startAt||!!function(e,t,r){let n=eF(e,t,r);return e.inclusive?n<=0:n<0}(e.startAt,te(e),t))&&(!e.endAt||!!function(e,t,r){let n=eF(e,t,r);return e.inclusive?n>=0:n>0}(e.endAt,te(e),t))}function tl(e){return(t,r)=>{let n=!1;for(let a of te(e)){let e=function(e,t,r){let n=e.field.isKeyField()?$.comparator(t.key,r.key):function(e,t,r){let n=t.data.field(e),a=r.data.field(e);return null!==n&&null!==a?eE(n,a):S()}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return S()}}(a,t,r);if(0!==e)return e;n=n||a.field.isKeyField()}return 0}}class tu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){ee(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return et(this.inner)}size(){return this.innerSize}}let tc=new er($.comparator),td=new er($.comparator);function th(...e){let t=td;for(let r of e)t=t.insert(r.key,r);return t}function tf(e){let t=td;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function tp(){return new tu(e=>e.toString(),(e,t)=>e.isEqual(t))}let tm=new er($.comparator),tg=new ei($.comparator);function ty(...e){let t=tg;for(let r of e)t=t.add(r);return t}let tv=new ei(M);function tb(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:J(t)?"-0":t}}function tx(e){return{integerValue:""+e}}class tw{constructor(){this._=void 0}}function tk(e,t){return e instanceof tI?eI(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class tE extends tw{}class tS extends tw{constructor(e){super(),this.elements=e}}function tN(e,t){let r=tD(t);for(let t of e.elements)r.some(e=>ew(e,t))||r.push(t);return{arrayValue:{values:r}}}class t_ extends tw{constructor(e){super(),this.elements=e}}function tT(e,t){let r=tD(t);for(let t of e.elements)r=r.filter(e=>!ew(e,t));return{arrayValue:{values:r}}}class tI extends tw{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function tC(e){return eh(e.integerValue||e.doubleValue)}function tD(e){return eC(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class tA{constructor(e,t){this.field=e,this.transform=t}}class tj{constructor(e,t){this.version=e,this.transformResults=t}}class tP{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tP}static exists(e){return new tP(void 0,e)}static updateTime(e){return new tP(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function tO(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class tR{}function tL(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new tq(e.key,tP.none()):new tF(e.key,e.data,tP.none());{let r=e.data,n=eL.empty(),a=new ei(q.comparator);for(let e of t.fields)if(!a.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),a=a.add(e)}return new tV(e.key,n,new eo(a.toArray()),tP.none())}}function tM(e,t,r,n){return e instanceof tF?function(e,t,r,n){if(!tO(e.precondition,t))return r;let a=e.value.clone(),i=tH(e.fieldTransforms,n,t);return a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,r,n):e instanceof tV?function(e,t,r,n){if(!tO(e.precondition,t))return r;let a=tH(e.fieldTransforms,n,t),i=t.data;return(i.setAll(tz(e)),i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,n):tO(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}function tU(e,t){var r,n;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===r&&void 0===n||!(!r||!n)&&U(r,n,(e,t)=>{var r,n;return e.field.isEqual(t.field)&&(r=e.transform,n=t.transform,r instanceof tS&&n instanceof tS||r instanceof t_&&n instanceof t_?U(r.elements,n.elements,ew):r instanceof tI&&n instanceof tI?ew(r.Pe,n.Pe):r instanceof tE&&n instanceof tE)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class tF extends tR{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class tV extends tR{constructor(e,t,r,n,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function tz(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function tB(e,t,r){var n;let a=new Map;e.length===r.length||S();for(let i=0;i<r.length;i++){let s=e[i],o=s.transform,l=t.data.field(s.field);a.set(s.field,(n=r[i],o instanceof tS?tN(o,l):o instanceof t_?tT(o,l):n))}return a}function tH(e,t,r){let n=new Map;for(let a of e){let e=a.transform,i=r.data.field(a.field);n.set(a.field,e instanceof tE?function(e,t){let r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ep(t)&&(t=em(t)),t&&(r.fields.__previous_value__=t),{mapValue:r}}(t,i):e instanceof tS?tN(e,i):e instanceof t_?tT(e,i):function(e,t){let r=tk(e,t),n=tC(r)+tC(e.Pe);return eI(r)&&eI(e.Pe)?tx(n):tb(e.serializer,n)}(e,i))}return n}class tq extends tR{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class t$ extends tR{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tW{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&function(e,t,r){e instanceof tF?function(e,t,r){let n=e.value.clone(),a=tB(e.fieldTransforms,t,r.transformResults);n.setAll(a),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}(e,t,r):e instanceof tV?function(e,t,r){if(!tO(e.precondition,t))return t.convertToUnknownDocument(r.version);let n=tB(e.fieldTransforms,t,r.transformResults),a=t.data;a.setAll(tz(e)),a.setAll(n),t.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(e,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=tM(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=tM(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=tp();return this.mutations.forEach(n=>{let a=e.get(n.key),i=a.overlayedDocument,s=this.applyToLocalView(i,a.mutatedFields),o=tL(i,s=t.has(n.key)?null:s);null!==o&&r.set(n.key,o),i.isValidDocument()||i.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ty())}isEqual(e){return this.batchId===e.batchId&&U(this.mutations,e.mutations,(e,t)=>tU(e,t))&&U(this.baseMutations,e.baseMutations,(e,t)=>tU(e,t))}}class tG{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){e.mutations.length===r.length||S();let n=tm,a=e.mutations;for(let e=0;e<a.length;e++)n=n.insert(a[e].key,r[e].version);return new tG(e,t,r,n)}}class tK{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class tQ{constructor(e,t){this.count=e,this.unchangedNames=t}}function tY(e){if(void 0===e)return x("GRPC error has no .code"),N.UNKNOWN;switch(e){case n.OK:return N.OK;case n.CANCELLED:return N.CANCELLED;case n.UNKNOWN:return N.UNKNOWN;case n.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case n.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case n.INTERNAL:return N.INTERNAL;case n.UNAVAILABLE:return N.UNAVAILABLE;case n.UNAUTHENTICATED:return N.UNAUTHENTICATED;case n.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case n.NOT_FOUND:return N.NOT_FOUND;case n.ALREADY_EXISTS:return N.ALREADY_EXISTS;case n.PERMISSION_DENIED:return N.PERMISSION_DENIED;case n.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case n.ABORTED:return N.ABORTED;case n.OUT_OF_RANGE:return N.OUT_OF_RANGE;case n.UNIMPLEMENTED:return N.UNIMPLEMENTED;case n.DATA_LOSS:return N.DATA_LOSS;default:return S()}}(a=n||(n={}))[a.OK=0]="OK",a[a.CANCELLED=1]="CANCELLED",a[a.UNKNOWN=2]="UNKNOWN",a[a.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",a[a.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",a[a.NOT_FOUND=5]="NOT_FOUND",a[a.ALREADY_EXISTS=6]="ALREADY_EXISTS",a[a.PERMISSION_DENIED=7]="PERMISSION_DENIED",a[a.UNAUTHENTICATED=16]="UNAUTHENTICATED",a[a.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",a[a.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",a[a.ABORTED=10]="ABORTED",a[a.OUT_OF_RANGE=11]="OUT_OF_RANGE",a[a.UNIMPLEMENTED=12]="UNIMPLEMENTED",a[a.INTERNAL=13]="INTERNAL",a[a.UNAVAILABLE=14]="UNAVAILABLE",a[a.DATA_LOSS=15]="DATA_LOSS";let tX=new(0,d.Integer)([0xffffffff,0xffffffff],0);function tJ(e){let t=(new TextEncoder).encode(e),r=new(0,d.Md5);return r.update(t),new Uint8Array(r.digest())}function tZ(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new(0,d.Integer)([r,n],0),new(0,d.Integer)([a,i],0)]}class t0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new t1(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new t1(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new t1(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=d.Integer.fromNumber(this.Ie)}Ee(e,t,r){let n=e.add(t.multiply(d.Integer.fromNumber(r)));return 1===n.compare(tX)&&(n=new(0,d.Integer)([n.getBits(0),n.getBits(1)],0)),n.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;let[t,r]=tZ(tJ(e));for(let e=0;e<this.hashCount;e++){let n=this.Ee(t,r,e);if(!this.de(n))return!1}return!0}static create(e,t,r){let n=new t0(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,t);return r.forEach(e=>n.insert(e)),n}insert(e){if(0===this.Ie)return;let[t,r]=tZ(tJ(e));for(let e=0;e<this.hashCount;e++){let n=this.Ee(t,r,e);this.Ae(n)}}Ae(e){let t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class t1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class t2{constructor(e,t,r,n,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,t5.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new t2(V.min(),n,new er(M),tc,ty())}}class t5{constructor(e,t,r,n,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new t5(r,t,ty(),ty(),ty())}}class t3{constructor(e,t,r,n){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=n}}class t4{constructor(e,t){this.targetId=e,this.me=t}}class t6{constructor(e,t,r=eu.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class t8{constructor(){this.fe=0,this.ge=re(),this.pe=eu.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ty(),t=ty(),r=ty();return this.ge.forEach((n,a)=>{switch(a){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:S()}}),new t5(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=re()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,this.fe>=0||S()}Ne(){this.we=!0,this.ye=!0}}class t7{constructor(e){this.Le=e,this.Be=new Map,this.ke=tc,this.qe=t9(),this.Qe=new er(M)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:S()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,r=e.me.count,n=this.Je(t);if(n){let a=n.target;if(e4(a))if(0===r){let e=new $(a.path);this.Ue(t,e,eM.newNoDocument(e,V.min()))}else 1===r||S();else{let n=this.Ye(t);if(n!==r){let r=this.Ze(e),a=r?this.Xe(r,e,n):1;0!==a&&(this.je(t),this.Qe=this.Qe.insert(t,2===a?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){let t,r,n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:a="",padding:i=0},hashCount:s=0}=n;try{t=ef(a).toUint8Array()}catch(e){if(e instanceof el)return k("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new t0(t,i,s)}catch(e){return k(e instanceof t1?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ie?null:r}Xe(e,t,r){return 2*(t.me.count!==r-this.nt(e,t.targetId))}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),n=0;return r.forEach(r=>{let a=this.Le.tt(),i=`projects/${a.projectId}/databases/${a.database}/documents/${r.path.canonicalString()}`;e.mightContain(i)||(this.Ue(t,r,null),n++)}),n}rt(e){let t=new Map;this.Be.forEach((r,n)=>{let a=this.Je(n);if(a){if(r.current&&e4(a.target)){let t=new $(a.target.path);null!==this.ke.get(t)||this.it(n,t)||this.Ue(n,t,eM.newNoDocument(t,e))}r.be&&(t.set(n,r.ve()),r.Ce())}});let r=ty();this.qe.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.Je(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.ke.forEach((t,r)=>r.setReadTime(e));let n=new t2(e,t,this.Qe,this.ke,r);return this.ke=tc,this.qe=t9(),this.Qe=new er(M),n}$e(e,t){if(!this.ze(e))return;let r=2*!!this.it(e,t.key);this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let n=this.Ge(e);this.it(e,t)?n.Fe(t,1):n.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new t8,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ei(M),this.qe=this.qe.insert(e,t)),t}ze(e){let t=null!==this.Je(e);return t||b("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new t8),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function t9(){return new er($.comparator)}function re(){return new er($.comparator)}let rt={asc:"ASCENDING",desc:"DESCENDING"},rr={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rn={and:"AND",or:"OR"};class ra{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ri(e,t){return e.useProto3Json||null==t?t:{value:t}}function rs(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ro(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function rl(e){return e||S(),V.fromTimestamp(function(e){let t=ed(e);return new F(t.seconds,t.nanos)}(e))}function ru(e,t){return rc(e,t).canonicalString()}function rc(e,t){let r=new B(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?r:r.child(t)}function rd(e){let t=B.fromString(e);return rx(t)||S(),t}function rh(e,t){return ru(e.databaseId,t.path)}function rf(e,t){let r=rd(t);if(r.get(1)!==e.databaseId.projectId)throw new _(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new _(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new $(rg(r))}function rp(e,t){return ru(e.databaseId,t)}function rm(e){return new B(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function rg(e){return e.length>4&&"documents"===e.get(4)||S(),e.popFirst(5)}function ry(e,t,r){return{name:rh(e,t),fields:r.value.mapValue.fields}}function rv(e){return{fieldPath:e.canonicalString()}}function rb(e){return q.fromServerFormat(e.fieldPath)}function rx(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class rw{constructor(e,t,r,n,a=V.min(),i=V.min(),s=eu.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new rw(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rw(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rw(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rk{constructor(e){this.ct=e}}class rE{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(+!!e.booleanValue);else if("integerValue"in e)this.dt(t,15),t.At(eh(e.integerValue));else if("doubleValue"in e){let r=eh(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),J(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=ed(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ef(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?eR(e)?this.dt(t,Number.MAX_SAFE_INTEGER):eP(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):S()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};for(let e of(this.dt(t,55),Object.keys(r)))this.Vt(e,t),this.Tt(r[e],t)}wt(e,t){var r,n;let a=e.fields||{};this.dt(t,53);let i="value",s=(null==(n=null==(r=a[i].arrayValue)?void 0:r.values)?void 0:n.length)||0;this.dt(t,15),t.At(eh(s)),this.Vt(i,t),this.Tt(a[i],t)}bt(e,t){let r=e.values||[];for(let e of(this.dt(t,50),r))this.Tt(e,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(e=>{this.dt(t,60),this.Dt(e,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}rE.vt=new rE;class rS{constructor(){this.un=new rN}addToCollectionParentIndex(e,t){return this.un.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(W.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(W.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class rN{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new ei(B.comparator),a=!n.has(r);return this.index[t]=n.add(r),a}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new ei(B.comparator)).toArray()}}new Uint8Array(0);class r_{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new r_(e,r_.DEFAULT_COLLECTION_PERCENTILE,r_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}r_.DEFAULT_COLLECTION_PERCENTILE=10,r_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,r_.DEFAULT=new r_(0x2800000,r_.DEFAULT_COLLECTION_PERCENTILE,r_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),r_.DISABLED=new r_(-1,0,0);class rT{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new rT(0)}static kn(){return new rT(-1)}}class rI{constructor(){this.changes=new tu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,eM.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rD{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&tM(r.mutation,e,eo.empty(),F.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ty()).next(()=>t))}getLocalViewOfDocuments(e,t,r=ty()){let n=tp();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=th();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=tp();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ty()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let a=tc,i=tp(),s=tp();return t.forEach((e,t)=>{let s=r.get(t.key);n.has(t.key)&&(void 0===s||s.mutation instanceof tV)?a=a.insert(t.key,t):void 0!==s?(i.set(t.key,s.mutation.getFieldMask()),tM(s.mutation,t,s.mutation.getFieldMask(),F.now())):i.set(t.key,eo.empty())}),this.recalculateAndSaveOverlays(e,a).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var r;return s.set(e,new rC(t,null!=(r=i.get(e))?r:null))}),s))}recalculateAndSaveOverlays(e,t){let r=tp(),n=new er((e,t)=>e-t),a=ty();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let a of e)a.keys().forEach(e=>{let i=t.get(e);if(null===i)return;let s=r.get(e)||eo.empty();s=a.applyToLocalView(i,s),r.set(e,s);let o=(n.get(a.batchId)||ty()).add(e);n=n.insert(a.batchId,o)})}).next(()=>{let i=[],s=n.getReverseIterator();for(;s.hasNext();){let n=s.getNext(),o=n.key,l=n.value,u=tp();l.forEach(e=>{if(!a.has(e)){let n=tL(t.get(e),r.get(e));null!==n&&u.set(e,n),a=a.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,u))}return Q.waitFor(i)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return $.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):e9(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(a=>{let i=n-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-a.size):Q.resolve(tp()),s=-1,o=a;return i.next(t=>Q.forEach(t,(t,r)=>(s<r.largestBatchId&&(s=r.largestBatchId),a.get(t)?Q.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,a)).next(()=>this.computeViews(e,o,t,ty())).next(e=>({batchId:s,changes:tf(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(e=>{let t=th();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){let a=t.collectionGroup,i=th();return this.indexManager.getCollectionParents(e,a).next(s=>Q.forEach(s,s=>{let o=new e6(s.child(a),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,o,r,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,r,n){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,n))).next(e=>{a.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,eM.newInvalidDocument(n)))});let r=th();return e.forEach((e,n)=>{let i=a.get(e);void 0!==i&&tM(i.mutation,n,eo.empty(),F.now()),to(t,n)&&(r=r.insert(e,n))}),r})}}class rA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Q.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,{id:t.id,version:t.version,createTime:rl(t.createTime)}),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,{name:t.name,query:function(e){let t=function(e){var t;let r,n=function(e){let t=rd(e);return 4===t.length?B.emptyPath():rg(t)}(e.parent),a=e.structuredQuery,i=a.from?a.from.length:0,s=null;if(i>0){1===i||S();let e=a.from[0];e.allDescendants?s=e.collectionId:n=n.child(e.collectionId)}let o=[];a.where&&(o=function(e){var t;let r=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=rb(e.unaryFilter.field);return eH.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=rb(e.unaryFilter.field);return eH.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=rb(e.unaryFilter.field);return eH.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=rb(e.unaryFilter.field);return eH.create(a,"!=",{nullValue:"NULL_VALUE"});default:return S()}}(t):void 0!==t.fieldFilter?eH.create(rb(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?eq.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return S()}}(t.compositeFilter.op)):S()}(e);return r instanceof eq&&eW(t=r)&&e$(t)?r.getFilters():[r]}(a.where));let l=[];a.orderBy&&(l=a.orderBy.map(e=>new ez(rb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let u=null;a.limit&&(u=null==(r="object"==typeof(t=a.limit)?t.value:t)?null:r);let c=null;a.startAt&&(c=function(e){let t=!!e.before;return new eU(e.values||[],t)}(a.startAt));let d=null;return a.endAt&&(d=function(e){let t=!e.before;return new eU(e.values||[],t)}(a.endAt)),new e6(n,s,l,o,u,"F",c,d)}({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?tn(t,t.limit,"L"):t}(t.bundledQuery),readTime:rl(t.readTime)}),Q.resolve()}}class rj{constructor(){this.overlays=new er($.comparator),this.Ir=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){let r=tp();return Q.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.ht(e,t,n)}),Q.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.Ir.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){let n=tp(),a=t.length+1,i=new $(t.child("")),s=this.overlays.getIteratorFrom(i);for(;s.hasNext();){let e=s.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===a&&e.largestBatchId>r&&n.set(e.getKey(),e)}return Q.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let a=new er((e,t)=>e-t),i=this.overlays.getIterator();for(;i.hasNext();){let e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=a.get(e.largestBatchId);null===t&&(t=tp(),a=a.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let s=tp(),o=a.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=n)););return Q.resolve(s)}ht(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.Ir.get(n.largestBatchId).delete(r.key);this.Ir.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new tK(t,r));let a=this.Ir.get(t);void 0===a&&(a=ty(),this.Ir.set(t,a)),this.Ir.set(t,a.add(r.key))}}class rP{constructor(){this.sessionToken=eu.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}class rO{constructor(){this.Tr=new ei(rR.Er),this.dr=new ei(rR.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new rR(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Vr(new rR(e,t))}mr(e,t){e.forEach(e=>this.removeReference(e,t))}gr(e){let t=new $(new B([])),r=new rR(t,e),n=new rR(t,e+1),a=[];return this.dr.forEachInRange([r,n],e=>{this.Vr(e),a.push(e.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new B([])),r=new rR(t,e),n=new rR(t,e+1),a=ty();return this.dr.forEachInRange([r,n],e=>{a=a.add(e.key)}),a}containsKey(e){let t=new rR(e,0),r=this.Tr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class rR{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||M(e.wr,t.wr)}static Ar(e,t){return M(e.wr,t.wr)||$.comparator(e.key,t.key)}}class rL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ei(rR.Er)}checkEmpty(e){return Q.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let i=new tW(a,t,r,n);for(let t of(this.mutationQueue.push(i),n))this.br=this.br.add(new rR(t.key,a)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return Q.resolve(i)}lookupMutationBatch(e,t){return Q.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=this.vr(t+1),n=r<0?0:r;return Q.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new rR(t,0),n=new rR(t,1/0),a=[];return this.br.forEachInRange([r,n],e=>{let t=this.Dr(e.wr);a.push(t)}),Q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ei(M);return t.forEach(e=>{let t=new rR(e,0),n=new rR(e,1/0);this.br.forEachInRange([t,n],e=>{r=r.add(e.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,a=r;$.isDocumentKey(a)||(a=a.child(""));let i=new rR(new $(a),0),s=new ei(M);return this.br.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(s=s.add(e.wr)),!0)},i),Q.resolve(this.Cr(s))}Cr(e){let t=[];return e.forEach(e=>{let r=this.Dr(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){0===this.Fr(t.batchId,"removed")||S(),this.mutationQueue.shift();let r=this.br;return Q.forEach(t.mutations,n=>{let a=new rR(n.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new rR(t,0),n=this.br.firstAfterOrEqual(r);return Q.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,t){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rM{constructor(e){this.Mr=e,this.docs=new er($.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),a=n?n.size:0,i=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():eM.newInvalidDocument(t))}getEntries(e,t){let r=tc;return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():eM.newInvalidDocument(e))}),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let a=tc,i=t.path,s=new $(i.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){let{key:e,value:{document:s}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||0>=function(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=$.comparator(e.documentKey,t.documentKey))?r:M(e.largestBatchId,t.largestBatchId)}(new W(s.readTime,s.key,-1),r)||(n.has(s.key)||to(t,s))&&(a=a.insert(s.key,s.mutableCopy()))}return Q.resolve(a)}getAllFromCollectionGroup(e,t,r,n){S()}Or(e,t){return Q.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new rU(this)}getSize(e){return Q.resolve(this.size)}}class rU extends rI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.cr.addEntry(e,n)):this.cr.removeEntry(r)}),Q.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class rF{constructor(e){this.persistence=e,this.Nr=new tu(e=>e5(e),e3),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Lr=0,this.Br=new rO,this.targetCount=0,this.kr=rT.Bn()}forEachTarget(e,t){return this.Nr.forEach((e,r)=>t(r)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),Q.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new rT(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.Kn(t),Q.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let n=0,a=[];return this.Nr.forEach((i,s)=>{s.sequenceNumber<=t&&null===r.get(s.targetId)&&(this.Nr.delete(i),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),n++)}),Q.waitFor(a).next(()=>n)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let n=this.persistence.referenceDelegate,a=[];return n&&t.forEach(t=>{a.push(n.markPotentiallyOrphaned(e,t))}),Q.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this.Br.containsKey(t))}}class rV{constructor(e,t){this.qr={},this.overlays={},this.Qr=new X(0),this.Kr=!1,this.Kr=!0,this.$r=new rP,this.referenceDelegate=e(this),this.Ur=new rF(this),this.indexManager=new rS,this.remoteDocumentCache=new rM(e=>this.referenceDelegate.Wr(e)),this.serializer=new rk(t),this.Gr=new rA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new rL(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){b("MemoryPersistence","Starting transaction:",e);let n=new rz(this.Qr.next());return this.referenceDelegate.zr(),r(n).next(e=>this.referenceDelegate.jr(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Hr(e,t){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class rz extends G{constructor(e){super(),this.currentSequenceNumber=e}}class rB{constructor(e){this.persistence=e,this.Jr=new rO,this.Yr=null}static Zr(e){return new rB(e)}get Xr(){if(this.Yr)return this.Yr;throw S()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(e=>this.Xr.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Xr.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{let n=$.fromPath(r);return this.ei(e,n).next(e=>{e||t.removeEntry(n,V.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(e=>{e?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Q.or([()=>Q.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class rH{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=n}static Wi(e,t){let r=ty(),n=ty();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new rH(e,t.fromCache,r,n)}}class rq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class r${constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,c.isSafari)()?8:function(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}((0,c.getUA)())>0?6:4}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,n){let a={result:null};return this.Yi(e,t).next(e=>{a.result=e}).next(()=>{if(!a.result)return this.Zi(e,t,n,r).next(e=>{a.result=e})}).next(()=>{if(a.result)return;let r=new rq;return this.Xi(e,t,r).next(n=>{if(a.result=n,this.zi)return this.es(e,t,r,n.size)})}).next(()=>a.result)}es(e,t,r,n){return r.documentReadCount<this.ji?(v()<=u.LogLevel.DEBUG&&b("QueryEngine","SDK will not create cache indexes for query:",ts(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(v()<=u.LogLevel.DEBUG&&b("QueryEngine","Query:",ts(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.Hi*n?(v()<=u.LogLevel.DEBUG&&b("QueryEngine","The SDK decides to create cache indexes for query:",ts(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tt(t))):Q.resolve())}Yi(e,t){if(e7(t))return Q.resolve(null);let r=tt(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=tt(t=tn(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let a=ty(...n);return this.Ji.getDocuments(e,a).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let i=this.ts(t,n);return this.ns(t,i,a,r.readTime)?this.Yi(e,tn(t,null,"F")):this.rs(e,i,t,r)}))})))}Zi(e,t,r,n){return e7(t)||n.isEqual(V.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(a=>{let i=this.ts(t,a);return this.ns(t,i,r,n)?Q.resolve(null):(v()<=u.LogLevel.DEBUG&&b("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ts(t)),this.rs(e,i,t,function(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new W(V.fromTimestamp(1e9===n?new F(r+1,0):new F(r,n)),$.empty(),-1)}(n,0)).next(e=>e))})}ts(e,t){let r=new ei(tl(e));return t.forEach((t,n)=>{to(e,n)&&(r=r.add(n))}),r}ns(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(n)>0)}Xi(e,t,r){return v()<=u.LogLevel.DEBUG&&b("QueryEngine","Using full collection scan to execute query:",ts(t)),this.Ji.getDocumentsMatchingQuery(e,t,W.min(),r)}rs(e,t,r,n){return this.Ji.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class rW{constructor(e,t,r,n){this.persistence=e,this.ss=t,this.serializer=n,this.os=new er(M),this._s=new tu(e=>e5(e),e3),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}async function rG(e,t){return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(a=>(n=a,e.ls(t),e.mutationQueue.getAllMutationBatches(r))).next(t=>{let a=[],i=[],s=ty();for(let e of n)for(let t of(a.push(e.batchId),e.mutations))s=s.add(t.key);for(let e of t)for(let t of(i.push(e.batchId),e.mutations))s=s.add(t.key);return e.localDocuments.getDocuments(r,s).next(e=>({hs:e,removedBatchIds:a,addedBatchIds:i}))})})}function rK(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}async function rQ(e,t,r){let n=e.os.get(t);try{r||await e.persistence.runTransaction("Release target",r?"readwrite":"readwrite-primary",t=>e.persistence.referenceDelegate.removeTarget(t,n))}catch(e){if(!Y(e))throw e;b("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}e.os=e.os.remove(t),e._s.delete(n.target)}function rY(e,t,r){let n=V.min(),a=ty();return e.persistence.runTransaction("Execute query","readwrite",i=>(function(e,t,r){let n=e._s.get(r);return void 0!==n?Q.resolve(e.os.get(n)):e.Ur.getTargetData(t,r)})(e,i,tt(t)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,e.Ur.getMatchingKeysForTargetId(i,t.targetId).next(e=>{a=e})}).next(()=>e.ss.getDocumentsMatchingQuery(i,t,r?n:V.min(),r?a:ty())).next(r=>{var n,i,s;let o;return n=e,i=t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2)),s=r,o=n.us.get(i)||V.min(),s.forEach((e,t)=>{t.readTime.compareTo(o)>0&&(o=t.readTime)}),n.us.set(i,o),{documents:r,Ts:a}}))}class rX{constructor(){this.activeTargetIds=tv}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class rJ{constructor(){this.so=new rX,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new rX,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rZ{_o(e){}shutdown(){}}class r0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){for(let e of(b("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.ho))e(0)}lo(){for(let e of(b("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.ho))e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let r1=null;function r2(){return null===r1?r1=0x10000000+Math.round(0x80000000*Math.random()):r1++,"0x"+r1.toString(16)}let r5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}let r4="WebChannelConnection";class r6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Do=t+"://"+e.host,this.vo=`projects/${r}/databases/${n}`,this.Co="(default)"===this.databaseId.database?`project_id=${r}`:`project_id=${r}&database_id=${n}`}get Fo(){return!1}Mo(e,t,r,n,a){let i=r2(),s=this.xo(e,t.toUriEncodedString());b("RestConnection",`Sending RPC '${e}' ${i}:`,s,r);let o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,n,a),this.No(e,s,o,r).then(t=>(b("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw k("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",s,"request:",r),t})}Lo(e,t,r,n,a,i){return this.Mo(e,t,r,n,a)}Oo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+g}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}xo(e,t){let r=r5[e];return`${this.Do}/v1/${t}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,n){let a=r2();return new Promise((i,s)=>{let o=new(0,h.XhrIo);o.setWithCredentials(!0),o.listenOnce(h.EventType.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case h.ErrorCode.NO_ERROR:let t=o.getResponseJson();b(r4,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case h.ErrorCode.TIMEOUT:b(r4,`RPC '${e}' ${a} timed out`),s(new _(N.DEADLINE_EXCEEDED,"Request time out"));break;case h.ErrorCode.HTTP_ERROR:let r=o.getStatus();if(b(r4,`RPC '${e}' ${a} failed with status:`,r,"response text:",o.getResponseText()),r>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=null==e?void 0:e.error;if(t&&t.status&&t.message){let e=function(e){let t=e.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(t)>=0?t:N.UNKNOWN}(t.status);s(new _(e,t.message))}else s(new _(N.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new _(N.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{b(r4,`RPC '${e}' ${a} completed.`)}});let l=JSON.stringify(n);b(r4,`RPC '${e}' ${a} sending request:`,n),o.send(t,"POST",l,r,15)})}Bo(e,t,r){let a=r2(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=(0,h.createWebChannelTransport)(),o=(0,h.getStatEventTarget)(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let c=i.join("");b(r4,`Creating RPC '${e}' stream ${a}: ${c}`,l);let d=s.createWebChannel(c,l),f=!1,p=!1,m=new r3({Io:t=>{p?b(r4,`Not sending because RPC '${e}' stream ${a} is closed:`,t):(f||(b(r4,`Opening RPC '${e}' stream ${a} transport.`),d.open(),f=!0),b(r4,`RPC '${e}' stream ${a} sending:`,t),d.send(t))},To:()=>d.close()}),g=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(e){setTimeout(()=>{throw e},0)}})};return g(d,h.WebChannel.EventType.OPEN,()=>{p||(b(r4,`RPC '${e}' stream ${a} transport opened.`),m.yo())}),g(d,h.WebChannel.EventType.CLOSE,()=>{p||(p=!0,b(r4,`RPC '${e}' stream ${a} transport closed`),m.So())}),g(d,h.WebChannel.EventType.ERROR,t=>{p||(p=!0,k(r4,`RPC '${e}' stream ${a} transport errored:`,t),m.So(new _(N.UNAVAILABLE,"The operation could not be completed")))}),g(d,h.WebChannel.EventType.MESSAGE,t=>{var r;if(!p){let i=t.data[0];i||S();let s=i.error||(null==(r=i[0])?void 0:r.error);if(s){b(r4,`RPC '${e}' stream ${a} received error:`,s);let t=s.status,r=function(e){let t=n[e];if(void 0!==t)return tY(t)}(t),i=s.message;void 0===r&&(r=N.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),p=!0,m.So(new _(r,i)),d.close()}else b(r4,`RPC '${e}' stream ${a} received:`,i),m.bo(i)}}),g(o,h.Event.STAT_EVENT,t=>{t.stat===h.Stat.PROXY?b(r4,`RPC '${e}' stream ${a} detected buffering proxy`):t.stat===h.Stat.NOPROXY&&b(r4,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function r8(){return"undefined"!=typeof document?document:null}function r7(e){return new ra(e,!0)}class r9{constructor(e,t,r=1e3,n=1.5,a=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=n,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),n=Math.max(0,t-r);n>0&&b("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,n,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class ne{constructor(e,t,r,n,a,i,s,o){this.ui=e,this.Ho=r,this.Jo=n,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new r9(e,t)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,4!==e?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(x(t.toString()),x("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.Yo===t&&this.P_(e,r)},t=>{e(()=>{let e=new _(N.UNKNOWN,"Fetching auth token failed: "+t.message);return this.I_(e)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(e=>{r(()=>this.I_(e))}),this.stream.onMessage(e=>{r(()=>1==++this.e_?this.E_(e):this.onNext(e))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return b("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(b("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nt extends ne{constructor(e,t,r,n,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,i),this.serializer=a}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=function(e,t){let r;if("targetChange"in t){var n,a;t.targetChange;let i="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:S(),s=t.targetChange.targetIds||[],o=(a=t.targetChange.resumeToken,e.useProto3Json?(void 0===a||"string"==typeof a||S(),eu.fromBase64String(a||"")):(void 0===a||a instanceof f||a instanceof Uint8Array||S(),eu.fromUint8Array(a||new Uint8Array))),l=t.targetChange.cause;r=new t6(i,s,o,l&&new _(void 0===l.code?N.UNKNOWN:tY(l.code),l.message||"")||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let a=rf(e,n.document.name),i=rl(n.document.updateTime),s=n.document.createTime?rl(n.document.createTime):V.min(),o=new eL({mapValue:{fields:n.document.fields}}),l=eM.newFoundDocument(a,i,s,o);r=new t3(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let a=rf(e,n.document),i=n.readTime?rl(n.readTime):V.min(),s=eM.newNoDocument(a,i);r=new t3([],n.removedTargetIds||[],s.key,s)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let a=rf(e,n.document);r=new t3([],n.removedTargetIds||[],a,null)}else{if(!("filter"in t))return S();{t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:a}=e,i=new tQ(n,a);r=new t4(e.targetId,i)}}return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return V.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?V.min():t.readTime?rl(t.readTime):V.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=rm(this.serializer),t.addTarget=function(e,t){let r,n=t.target;if((r=e4(n)?{documents:{documents:[rp(e,n.path)]}}:{query:function(e,t){var r,n;let a,i={structuredQuery:{}},s=t.path;null!==t.collectionGroup?(a=s,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=rp(e,a);let o=function(e){if(0!==e.length)return function e(t){return t instanceof eH?function(e){if("=="===e.op){if(eA(e.value))return{unaryFilter:{field:rv(e.field),op:"IS_NAN"}};if(eD(e.value))return{unaryFilter:{field:rv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(eA(e.value))return{unaryFilter:{field:rv(e.field),op:"IS_NOT_NAN"}};if(eD(e.value))return{unaryFilter:{field:rv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rv(e.field),op:rr[e.op],value:e.value}}}(t):t instanceof eq?function(t){let r=t.getFilters().map(t=>e(t));return 1===r.length?r[0]:{compositeFilter:{op:rn[t.op],filters:r}}}(t):S()}(eq.create(e,"and"))}(t.filters);o&&(i.structuredQuery.where=o);let l=function(e){if(0!==e.length)return e.map(e=>({field:rv(e.field),direction:rt[e.dir]}))}(t.orderBy);l&&(i.structuredQuery.orderBy=l);let u=ri(e,t.limit);return null!==u&&(i.structuredQuery.limit=u),t.startAt&&(i.structuredQuery.startAt={before:(r=t.startAt).inclusive,values:r.position}),t.endAt&&(i.structuredQuery.endAt={before:!(n=t.endAt).inclusive,values:n.position}),{_t:i,parent:a}}(e,n)._t}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=ro(e,t.resumeToken);let n=ri(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(V.min())>0){r.readTime=rs(e,t.snapshotVersion.toTimestamp());let n=ri(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}(this.serializer,e);let r=function(e,t){let r=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return S()}}(t.purpose);return null==r?null:{"goog-listen-tags":r}}(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=rm(this.serializer),t.removeTarget=e,this.a_(t)}}class nr extends ne{constructor(e,t,r,n,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,i),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return e.streamToken||S(),this.lastStreamToken=e.streamToken,e.writeResults&&0!==e.writeResults.length&&S(),this.listener.f_()}onNext(e){var t,r;e.streamToken||S(),this.lastStreamToken=e.streamToken,this.t_.reset();let n=(t=e.writeResults,r=e.commitTime,t&&t.length>0?(void 0!==r||S(),t.map(e=>{let t;return(t=e.updateTime?rl(e.updateTime):rl(r)).isEqual(V.min())&&(t=rl(r)),new tj(t,e.transformResults||[])})):[]),a=rl(e.commitTime);return this.listener.g_(a,n)}p_(){let e={};e.database=rm(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>(function(e,t){var r;let n;if(t instanceof tF)n={update:ry(e,t.key,t.value)};else if(t instanceof tq)n={delete:rh(e,t.key)};else if(t instanceof tV)n={update:ry(e,t.key,t.data),updateMask:function(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}(t.fieldMask)};else{if(!(t instanceof t$))return S();n={verify:rh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let r=t.transform;if(r instanceof tE)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof tS)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof t_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof tI)return{fieldPath:t.field.canonicalString(),increment:r.Pe};throw S()})(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:rs(e,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:S()),n})(this.serializer,e))};this.a_(t)}}class nn extends class{}{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.y_=!1}w_(){if(this.y_)throw new _(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,n){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Mo(e,rc(t,r),n,a,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _(N.UNKNOWN,e.toString())})}Lo(e,t,r,n,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Lo(e,rc(t,r),n,i,s,a)).catch(e=>{throw"FirebaseError"===e.name?(e.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _(N.UNKNOWN,e.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class na{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(x(t),this.D_=!1):b("OnlineStateTracker",t)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class ni{constructor(e,t,r,n,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(e=>{r.enqueueAndForget(async()=>{np(this)&&(b("RemoteStore","Restarting streams for network reachability change."),await async function(e){e.L_.add(4),await no(e),e.q_.set("Unknown"),e.L_.delete(4),await ns(e)}(this))})}),this.q_=new na(r,n)}}async function ns(e){if(np(e))for(let t of e.B_)await t(!0)}async function no(e){for(let t of e.B_)await t(!1)}function nl(e,t){e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),nf(e)?nh(e):nD(e).r_()&&nc(e,t))}function nu(e,t){let r=nD(e);e.N_.delete(t),r.r_()&&nd(e,t),0===e.N_.size&&(r.r_()?r.o_():np(e)&&e.q_.set("Unknown"))}function nc(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(V.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}nD(e).A_(t)}function nd(e,t){e.Q_.xe(t),nD(e).R_(t)}function nh(e){e.Q_=new t7({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),nD(e).start(),e.q_.v_()}function nf(e){return np(e)&&!nD(e).n_()&&e.N_.size>0}function np(e){return 0===e.L_.size}async function nm(e){e.q_.set("Online")}async function ng(e){e.N_.forEach((t,r)=>{nc(e,t)})}async function ny(e,t){e.Q_=void 0,nf(e)?(e.q_.M_(t),nh(e)):e.q_.set("Unknown")}async function nv(e,t,r){if(e.q_.set("Online"),t instanceof t6&&2===t.state&&t.cause)try{await async function(e,t){let r=t.cause;for(let n of t.targetIds)e.N_.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.N_.delete(n),e.Q_.removeTarget(n))}(e,t)}catch(r){b("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await nb(e,r)}else if(t instanceof t3?e.Q_.Ke(t):t instanceof t4?e.Q_.He(t):e.Q_.We(t),!r.isEqual(V.min()))try{let t=await rK(e.localStore);r.compareTo(t)>=0&&await function(e,t){let r=e.Q_.rt(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let a=e.N_.get(n);a&&e.N_.set(n,a.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let n=e.N_.get(t);if(!n)return;e.N_.set(t,n.withResumeToken(eu.EMPTY_BYTE_STRING,n.snapshotVersion)),nd(e,t);let a=new rw(n.target,t,r,n.sequenceNumber);nc(e,a)}),e.remoteSyncer.applyRemoteEvent(r)}(e,r)}catch(t){b("RemoteStore","Failed to raise snapshot:",t),await nb(e,t)}}async function nb(e,t,r){if(!Y(t))throw t;e.L_.add(1),await no(e),e.q_.set("Offline"),r||(r=()=>rK(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{b("RemoteStore","Retrying IndexedDB access"),await r(),e.L_.delete(1),await ns(e)})}function nx(e,t){return t().catch(r=>nb(e,r,t))}async function nw(e){var t;let r=nA(e),n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;np(t=e)&&t.O_.length<10;)try{let t=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}(e.localStore,n);if(null===t){0===e.O_.length&&r.o_();break}n=t.batchId,function(e,t){e.O_.push(t);let r=nA(e);r.r_()&&r.V_&&r.m_(t.mutations)}(e,t)}catch(t){await nb(e,t)}nk(e)&&nE(e)}function nk(e){return np(e)&&!nA(e).n_()&&e.O_.length>0}function nE(e){nA(e).start()}async function nS(e){nA(e).p_()}async function nN(e){let t=nA(e);for(let r of e.O_)t.m_(r.mutations)}async function n_(e,t,r){let n=e.O_.shift(),a=tG.from(n,t,r);await nx(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await nw(e)}async function nT(e,t){t&&nA(e).V_&&await async function(e,t){var r;if(function(e){switch(e){default:return S();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}(r=t.code)&&r!==N.ABORTED){let r=e.O_.shift();nA(e).s_(),await nx(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await nw(e)}}(e,t),nk(e)&&nE(e)}async function nI(e,t){e.asyncQueue.verifyOperationInProgress(),b("RemoteStore","RemoteStore received new credentials");let r=np(e);e.L_.add(3),await no(e),r&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await ns(e)}async function nC(e,t){t?(e.L_.delete(2),await ns(e)):t||(e.L_.add(2),await no(e),e.q_.set("Unknown"))}function nD(e){var t,r,n;return e.K_||(t=e.datastore,r=e.asyncQueue,n={Eo:nm.bind(null,e),Ro:ng.bind(null,e),mo:ny.bind(null,e),d_:nv.bind(null,e)},t.w_(),e.K_=new nt(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n),e.B_.push(async t=>{t?(e.K_.s_(),nf(e)?nh(e):e.q_.set("Unknown")):(await e.K_.stop(),e.Q_=void 0)})),e.K_}function nA(e){var t,r,n;return e.U_||(t=e.datastore,r=e.asyncQueue,n={Eo:()=>Promise.resolve(),Ro:nS.bind(null,e),mo:nT.bind(null,e),f_:nN.bind(null,e),g_:n_.bind(null,e)},t.w_(),e.U_=new nr(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n),e.B_.push(async t=>{t?(e.U_.s_(),await nw(e)):(await e.U_.stop(),e.O_.length>0&&(b("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))})),e.U_}class nj{constructor(e,t,r,n,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=a,this.deferred=new T,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,a){let i=new nj(e,t,Date.now()+r,n,a);return i.start(r),i}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function nP(e,t){if(x("AsyncQueue",`${t}: ${e}`),Y(e))return new _(N.UNAVAILABLE,`${t}: ${e}`);throw e}class nO{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(e,t)=>$.comparator(e.key,t.key),this.keyedMap=th(),this.sortedSet=new er(this.comparator)}static emptySet(e){return new nO(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nO)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new nO;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class nR{constructor(){this.W_=new er($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(t,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(t):1===e.type&&2===r.type?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):S():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class nL{constructor(e,t,r,n,a,i,s,o,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,a){let i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new nL(e,t,nO.emptySet(t),i,r,n,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ta(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class nM{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nU{constructor(){this.queries=nF(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(e,t){let r=e.queries;e.queries=nF(),r.forEach((e,r)=>{for(let e of r.j_)e.onError(t)})}(this,new _(N.ABORTED,"Firestore shutting down"))}}function nF(){return new tu(e=>ti(e),ta)}async function nV(e,t){let r=3,n=t.query,a=e.queries.get(n);a?!a.H_()&&t.J_()&&(r=2):(a=new nM,r=+!t.J_());try{switch(r){case 0:a.z_=await e.onListen(n,!0);break;case 1:a.z_=await e.onListen(n,!1);break;case 2:await e.onFirstRemoteStoreListen(n)}}catch(r){let e=nP(r,`Initialization of query '${ts(t.query)}' failed`);return void t.onError(e)}e.queries.set(n,a),a.j_.push(t),t.Z_(e.onlineState),a.z_&&t.X_(a.z_)&&nq(e)}async function nz(e,t){let r=t.query,n=3,a=e.queries.get(r);if(a){let e=a.j_.indexOf(t);e>=0&&(a.j_.splice(e,1),0===a.j_.length?n=+!t.J_():!a.H_()&&t.J_()&&(n=2))}switch(n){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function nB(e,t){let r=!1;for(let n of t){let t=n.query,a=e.queries.get(t);if(a){for(let e of a.j_)e.X_(n)&&(r=!0);a.z_=n}}r&&nq(e)}function nH(e,t,r){let n=e.queries.get(t);if(n)for(let e of n.j_)e.onError(r);e.queries.delete(t)}function nq(e){e.Y_.forEach(e=>{e.next()})}(s=i||(i={})).ea="default",s.Cache="cache";class n${constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new nL(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){return!(e.fromCache&&this.J_())||(!this.options._a||"Offline"===t)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}oa(e){e=nL.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==i.Cache}}class nW{constructor(e){this.key=e}}class nG{constructor(e){this.key=e}}class nK{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ty(),this.mutatedKeys=ty(),this.Aa=tl(e),this.Ra=new nO(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new nR,n=t?t.Ra:this.Ra,a=t?t.mutatedKeys:this.mutatedKeys,i=n,s=!1,o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=to(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(r.track({type:3,doc:c}),f=!0):this.ga(u,c)||(r.track({type:2,doc:c}),f=!0,(o&&this.Aa(c,o)>0||l&&0>this.Aa(c,l))&&(s=!0)):!u&&c?(r.track({type:0,doc:c}),f=!0):u&&!c&&(r.track({type:1,doc:u}),f=!0,(o||l)&&(s=!0)),f&&(c?(i=i.add(c),a=h?a.add(e):a.delete(e)):(i=i.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){let e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),a=a.delete(e.key),r.track({type:1,doc:e})}return{Ra:i,fa:r,ns:s,mutatedKeys:a}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){let a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let i=e.fa.G_();i.sort((e,t)=>(function(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return r(e)-r(t)})(e.type,t.type)||this.Aa(e.doc,t.doc)),this.pa(r),n=null!=n&&n;let s=t&&!n?this.ya():[],o=0===this.da.size&&this.current&&!n?1:0,l=o!==this.Ea;return(this.Ea=o,0!==i.length||l)?{snapshot:new nL(this.query,e.Ra,a,i,e.mutatedKeys,0===o,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:s}:{wa:s}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nR,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ty(),this.Ra.forEach(e=>{this.Sa(e.key)&&(this.da=this.da.add(e.key))});let t=[];return e.forEach(e=>{this.da.has(e)||t.push(new nG(e))}),this.da.forEach(r=>{e.has(r)||t.push(new nW(r))}),t}ba(e){this.Ta=e.Ts,this.da=ty();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return nL.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class nQ{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class nY{constructor(e){this.key=e,this.va=!1}}class nX{constructor(e,t,r,n,a,i){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Ca={},this.Fa=new tu(e=>ti(e),ta),this.Ma=new Map,this.xa=new Set,this.Oa=new er($.comparator),this.Na=new Map,this.La=new rO,this.Ba={},this.ka=new Map,this.qa=rT.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}async function nJ(e,t,r=!0){let n,a=au(e),i=a.Fa.get(t);return i?(a.sharedClientState.addLocalQueryTarget(i.targetId),n=i.view.Da()):n=await n0(a,t,r,!0),n}async function nZ(e,t){let r=au(e);await n0(r,t,!0,!1)}async function n0(e,t,r,n){var a,i;let s,o=await (a=e.localStore,i=tt(t),a.persistence.runTransaction("Allocate target","readwrite",e=>{let t;return a.Ur.getTargetData(e,i).next(r=>r?(t=r,Q.resolve(t)):a.Ur.allocateTargetId(e).next(r=>(t=new rw(i,r,"TargetPurposeListen",e.currentSequenceNumber),a.Ur.addTargetData(e,t).next(()=>t))))}).then(e=>{let t=a.os.get(e.targetId);return(null===t||e.snapshotVersion.compareTo(t.snapshotVersion)>0)&&(a.os=a.os.insert(e.targetId,e),a._s.set(i,e.targetId)),e})),l=o.targetId,u=e.sharedClientState.addLocalQueryTarget(l,r);return n&&(s=await n1(e,t,l,"current"===u,o.resumeToken)),e.isPrimaryClient&&r&&nl(e.remoteStore,o),s}async function n1(e,t,r,n,a){e.Ka=(t,r,n)=>(async function(e,t,r,n){let a=t.view.ma(r);a.ns&&(a=await rY(e.localStore,t.query,!1).then(({documents:e})=>t.view.ma(e,a)));let i=n&&n.targetChanges.get(t.targetId),s=n&&null!=n.targetMismatches.get(t.targetId),o=t.view.applyChanges(a,e.isPrimaryClient,i,s);return aa(e,t.targetId,o.wa),o.snapshot})(e,t,r,n);let i=await rY(e.localStore,t,!0),s=new nK(t,i.Ts),o=s.ma(i.documents),l=t5.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,a),u=s.applyChanges(o,e.isPrimaryClient,l);aa(e,r,u.wa);let c=new nQ(t,r,s);return e.Fa.set(t,c),e.Ma.has(r)?e.Ma.get(r).push(t):e.Ma.set(r,[t]),u.snapshot}async function n2(e,t,r){let n=e.Fa.get(t),a=e.Ma.get(n.targetId);if(a.length>1)return e.Ma.set(n.targetId,a.filter(e=>!ta(e,t))),void e.Fa.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)||await rQ(e.localStore,n.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(n.targetId),r&&nu(e.remoteStore,n.targetId),ar(e,n.targetId)}).catch(K)):(ar(e,n.targetId),await rQ(e.localStore,n.targetId,!0))}async function n5(e,t){let r=e.Fa.get(t),n=e.Ma.get(r.targetId);e.isPrimaryClient&&1===n.length&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),nu(e.remoteStore,r.targetId))}async function n3(e,t,r){var n,a;let i=((n=e).remoteStore.remoteSyncer.applySuccessfulWrite=n7.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=n9.bind(null,n),n);try{let e,n=await function(e,t){let r,n,a=F.now(),i=t.reduce((e,t)=>e.add(t.key),ty());return e.persistence.runTransaction("Locally write mutations","readwrite",s=>{let o=tc,l=ty();return e.cs.getEntries(s,i).next(e=>{(o=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>e.localDocuments.getOverlayedDocuments(s,o)).next(n=>{r=n;let i=[];for(let e of t){let t=function(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),a=tk(n.transform,e||null);null!=a&&(null===r&&(r=eL.empty()),r.set(n.field,a))}return r||null}(e,r.get(e.key).overlayedDocument);null!=t&&i.push(new tV(e.key,t,function e(t){let r=[];return ee(t.fields,(t,n)=>{let a=new q([t]);if(ej(n)){let t=e(n.mapValue).fields;if(0===t.length)r.push(a);else for(let e of t)r.push(a.child(e))}else r.push(a)}),new eo(r)}(t.value.mapValue),tP.exists(!0)))}return e.mutationQueue.addMutationBatch(s,a,i,t)}).next(t=>{n=t;let a=t.applyToLocalDocumentSet(r,l);return e.documentOverlayCache.saveOverlays(s,t.batchId,a)})}).then(()=>({batchId:n.batchId,changes:tf(r)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(n.batchId),a=n.batchId,(e=i.Ba[i.currentUser.toKey()])||(e=new er(M)),e=e.insert(a,r),i.Ba[i.currentUser.toKey()]=e,await as(i,n.changes),await nw(i.remoteStore)}catch(t){let e=nP(t,"Failed to persist write");r.reject(e)}}async function n4(e,t){try{let r=await function(e,t){let r=t.snapshotVersion,n=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{var i,s,o;let l,u,c=e.cs.newChangeBuffer({trackRemovals:!0});n=e.os;let d=[];t.targetChanges.forEach((i,s)=>{var o;let l=n.get(s);if(!l)return;d.push(e.Ur.removeMatchingKeys(a,i.removedDocuments,s).next(()=>e.Ur.addMatchingKeys(a,i.addedDocuments,s)));let u=l.withSequenceNumber(a.currentSequenceNumber);null!==t.targetMismatches.get(s)?u=u.withResumeToken(eu.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):i.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(i.resumeToken,r)),n=n.insert(s,u),o=u,(0===l.resumeToken.approximateByteSize()||o.snapshotVersion.toMicroseconds()-l.snapshotVersion.toMicroseconds()>=3e8||i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size>0)&&d.push(e.Ur.updateTargetData(a,u))});let h=tc,f=ty();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(a,r))}),d.push((i=a,s=c,o=t.documentUpdates,l=ty(),u=ty(),o.forEach(e=>l=l.add(e)),s.getEntries(i,l).next(e=>{let t=tc;return o.forEach((r,n)=>{let a=e.get(r);n.isFoundDocument()!==a.isFoundDocument()&&(u=u.add(r)),n.isNoDocument()&&n.version.isEqual(V.min())?(s.removeEntry(r,n.readTime),t=t.insert(r,n)):!a.isValidDocument()||n.version.compareTo(a.version)>0||0===n.version.compareTo(a.version)&&a.hasPendingWrites?(s.addEntry(n),t=t.insert(r,n)):b("LocalStore","Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",n.version)}),{Ps:t,Is:u}})).next(e=>{h=e.Ps,f=e.Is})),!r.isEqual(V.min())){let t=e.Ur.getLastRemoteSnapshotVersion(a).next(t=>e.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(t)}return Q.waitFor(d).next(()=>c.apply(a)).next(()=>e.localDocuments.getLocalViewOfDocuments(a,h,f)).next(()=>h)}).then(t=>(e.os=n,t))}(e.localStore,t);t.targetChanges.forEach((t,r)=>{let n=e.Na.get(r);n&&(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1||S(),t.addedDocuments.size>0?n.va=!0:t.modifiedDocuments.size>0?n.va||S():t.removedDocuments.size>0&&(n.va||S(),n.va=!1))}),await as(e,r,t)}catch(e){await K(e)}}function n6(e,t,r){var n;if(e.isPrimaryClient&&0===r||!e.isPrimaryClient&&1===r){let r,a=[];e.Fa.forEach((e,r)=>{let n=r.view.Z_(t);n.snapshot&&a.push(n.snapshot)}),(n=e.eventManager).onlineState=t,r=!1,n.queries.forEach((e,n)=>{for(let e of n.j_)e.Z_(t)&&(r=!0)}),r&&nq(n),a.length&&e.Ca.d_(a),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function n8(e,t,r){e.sharedClientState.updateQueryState(t,"rejected",r);let n=e.Na.get(t),a=n&&n.key;if(a){let r=new er($.comparator);r=r.insert(a,eM.newNoDocument(a,V.min()));let n=ty().add(a),i=new t2(V.min(),new Map,new er(M),r,n);await n4(e,i),e.Oa=e.Oa.remove(a),e.Na.delete(t),ai(e)}else await rQ(e.localStore,t,!1).then(()=>ar(e,t,r)).catch(K)}async function n7(e,t){var r;let n=t.batch.batchId;try{let a=await (r=e.localStore,r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return(function(e,t,r,n){let a=r.batch,i=a.keys(),s=Q.resolve();return i.forEach(e=>{s=s.next(()=>n.getEntry(t,e)).next(t=>{let i=r.docVersions.get(e);null!==i||S(),0>t.version.compareTo(i)&&(a.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,a))})(r,e,t,a).next(()=>a.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ty();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t))).next(()=>r.localDocuments.getDocuments(e,n))}));at(e,n,null),ae(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await as(e,a)}catch(e){await K(e)}}async function n9(e,t,r){var n;try{let a=await (n=e.localStore,n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(null!==t||S(),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))}));at(e,t,r),ae(e,t),e.sharedClientState.updateMutationState(t,"rejected",r),await as(e,a)}catch(e){await K(e)}}function ae(e,t){(e.ka.get(t)||[]).forEach(e=>{e.resolve()}),e.ka.delete(t)}function at(e,t,r){let n=e.Ba[e.currentUser.toKey()];if(n){let a=n.get(t);a&&(r?a.reject(r):a.resolve(),n=n.remove(t)),e.Ba[e.currentUser.toKey()]=n}}function ar(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.Ma.get(t)))e.Fa.delete(n),r&&e.Ca.$a(n,r);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(t=>{e.La.containsKey(t)||an(e,t)})}function an(e,t){e.xa.delete(t.path.canonicalString());let r=e.Oa.get(t);null!==r&&(nu(e.remoteStore,r),e.Oa=e.Oa.remove(t),e.Na.delete(r),ai(e))}function aa(e,t,r){for(let n of r)n instanceof nW?(e.La.addReference(n.key,t),function(e,t){let r=t.key,n=r.path.canonicalString();e.Oa.get(r)||e.xa.has(n)||(b("SyncEngine","New document in limbo: "+r),e.xa.add(n),ai(e))}(e,n)):n instanceof nG?(b("SyncEngine","Document no longer in limbo: "+n.key),e.La.removeReference(n.key,t),e.La.containsKey(n.key)||an(e,n.key)):S()}function ai(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){let t=e.xa.values().next().value;e.xa.delete(t);let r=new $(B.fromString(t)),n=e.qa.next();e.Na.set(n,new nY(r)),e.Oa=e.Oa.insert(r,n),nl(e.remoteStore,new rw(tt(e8(r.path)),n,"TargetPurposeLimboResolution",X.oe))}}async function as(e,t,r){let n=[],a=[],i=[];e.Fa.isEmpty()||(e.Fa.forEach((s,o)=>{i.push(e.Ka(o,t,r).then(t=>{var i;if((t||r)&&e.isPrimaryClient){let n=t?!t.fromCache:null==(i=null==r?void 0:r.targetChanges.get(o.targetId))?void 0:i.current;e.sharedClientState.updateQueryState(o.targetId,n?"current":"not-current")}if(t){n.push(t);let e=rH.Wi(o.targetId,t);a.push(e)}}))}),await Promise.all(i),e.Ca.d_(n),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>Q.forEach(t,t=>Q.forEach(t.$i,n=>e.persistence.referenceDelegate.addReference(r,t.targetId,n)).next(()=>Q.forEach(t.Ui,n=>e.persistence.referenceDelegate.removeReference(r,t.targetId,n)))))}catch(e){if(!Y(e))throw e;b("LocalStore","Failed to update sequence numbers: "+e)}for(let r of t){let t=r.targetId;if(!r.fromCache){let r=e.os.get(t),n=r.snapshotVersion,a=r.withLastLimboFreeSnapshotVersion(n);e.os=e.os.insert(t,a)}}}(e.localStore,a))}async function ao(e,t){if(!e.currentUser.isEqual(t)){b("SyncEngine","User change. New user:",t.toKey());let r=await rG(e.localStore,t);e.currentUser=t,e.ka.forEach(e=>{e.forEach(e=>{e.reject(new _(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.ka.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await as(e,r.hs)}}function al(e,t){let r=e.Na.get(t);if(r&&r.va)return ty().add(r.key);{let r=ty(),n=e.Ma.get(t);if(!n)return r;for(let t of n){let n=e.Fa.get(t);r=r.unionWith(n.view.Va)}return r}}function au(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=n4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=al.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=n8.bind(null,e),e.Ca.d_=nB.bind(null,e.eventManager),e.Ca.$a=nH.bind(null,e.eventManager),e}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=r7(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){var t,r;return t=this.persistence,r=new r$,new rW(t,r,e.initialUser,this.serializer)}Ga(e){return new rV(rB.Zr,this.serializer)}Wa(e){return new rJ}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class ad{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>n6(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=ao.bind(null,this.syncEngine),await nC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nU}createDatastore(e){var t;let r=r7(e.databaseInfo.databaseId),n=new r6(e.databaseInfo);return t=e.authCredentials,new nn(t,e.appCheckCredentials,n,r)}createRemoteStore(e){var t,r;return t=this.localStore,r=this.datastore,new ni(t,r,e.asyncQueue,e=>n6(this.syncEngine,e,0),r0.D()?new r0:new rZ)}createSyncEngine(e,t){return function(e,t,r,n,a,i,s){let o=new nX(e,t,r,n,a,i);return s&&(o.Qa=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){b("RemoteStore","RemoteStore shutting down."),e.L_.add(5),await no(e),e.k_.shutdown(),e.q_.set("Unknown")}(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}ad.provider={build:()=>new ad};class ah{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):x("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class af{constructor(e,t,r,n,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=m.UNAUTHENTICATED,this.clientId=L.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async e=>{b("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(b("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new T;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=nP(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function ap(e,t){e.asyncQueue.verifyOperationInProgress(),b("FirestoreClient","Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await rG(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function am(e,t){e.asyncQueue.verifyOperationInProgress();let r=await ag(e);b("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>nI(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>nI(t.remoteStore,r)),e._onlineComponents=t}async function ag(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){b("FirestoreClient","Using user provided OfflineComponentProvider");try{await ap(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;k("Error using user provided cache. Falling back to memory cache: "+t),await ap(e,new ac)}}else b("FirestoreClient","Using default OfflineComponentProvider"),await ap(e,new ac);return e._offlineComponents}async function ay(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(b("FirestoreClient","Using user provided OnlineComponentProvider"),await am(e,e._uninitializedComponentsProvider._online)):(b("FirestoreClient","Using default OnlineComponentProvider"),await am(e,new ad))),e._onlineComponents}async function av(e){let t=await ay(e),r=t.eventManager;return r.onListen=nJ.bind(null,t.syncEngine),r.onUnlisten=n2.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=nZ.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=n5.bind(null,t.syncEngine),r}function ab(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let ax=new Map;function aw(e,t,r){if(!r)throw new _(N.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ak(e){if(!$.isDocumentKey(e))throw new _(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function aE(e){if($.isDocumentKey(e))throw new _(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function aS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return"function"==typeof e?"a function":S()}function aN(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=aS(e);throw new _(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}class a_{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new _(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null==(t=e.ssl)||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new _(N.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ab(null!=(r=e.experimentalLongPollingOptions)?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new _(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new _(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new _(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,r;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,t.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aT{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new a_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new a_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new C;switch(e.type){case"firstParty":return new P(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new _(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let t=ax.get(e);t&&(b("ComponentProvider","Removing Datastore"),ax.delete(e),t.terminate())}(this),Promise.resolve()}}class aI{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new aI(this.firestore,e,this._query)}}class aC{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new aD(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new aC(this.firestore,e,this._key)}}class aD extends aI{constructor(e,t,r){super(e,t,e8(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new aC(this.firestore,null,new $(e))}withConverter(e){return new aD(this.firestore,e,this._path)}}function aA(e,t,...r){if(e=(0,c.getModularInstance)(e),aw("collection","path",t),e instanceof aT){let n=B.fromString(t,...r);return aE(n),new aD(e,null,n)}{if(!(e instanceof aC||e instanceof aD))throw new _(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(B.fromString(t,...r));return aE(n),new aD(e.firestore,null,n)}}function aj(e,t,...r){if(e=(0,c.getModularInstance)(e),1==arguments.length&&(t=L.newId()),aw("doc","path",t),e instanceof aT){let n=B.fromString(t,...r);return ak(n),new aC(e,null,new $(n))}{if(!(e instanceof aC||e instanceof aD))throw new _(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(B.fromString(t,...r));return ak(n),new aC(e.firestore,e instanceof aD?e.converter:null,new $(n))}}class aP{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new r9(this,"async_queue_retry"),this.Vu=()=>{let e=r8();e&&b("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()},this.mu=e;let t=r8();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=r8();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new T;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(0!==this.Pu.length){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Y(e))throw e;b("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(e=>{let t;throw this.Eu=e,this.du=!1,x("INTERNAL UNHANDLED ERROR: ",(t=e.message||"",e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t)),e}).then(e=>(this.du=!1,e))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let n=nj.createAndSchedule(this,e,t,r,e=>this.yu(e));return this.Tu.push(n),n}fu(){this.Eu&&S()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{for(let t of(this.Tu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.Tu))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function aO(e){if("object"!=typeof e||null===e)return!1;for(let t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}class aR extends aT{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new aP,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new aP(e),this._firestoreClient=void 0,await e}}}function aL(e,t){let r="object"==typeof e?e:(0,o.getApp)(),n=(0,o._getProvider)(r,"firestore").getImmediate({identifier:"string"==typeof e?e:t||"(default)"});if(!n._initialized){let e=(0,c.getDefaultEmulatorHostnameAndPort)("firestore");e&&function(e,t,r,n={}){var a;let i=(e=aN(e,aT))._getSettings(),s=`${t}:${r}`;if("firestore.googleapis.com"!==i.host&&i.host!==s&&k("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:s,ssl:!1})),n.mockUserToken){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=m.MOCK_USER;else{t=(0,c.createMockUserToken)(n.mockUserToken,null==(a=e._app)?void 0:a.options.projectId);let i=n.mockUserToken.sub||n.mockUserToken.user_id;if(!i)throw new _(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new m(i)}e._authCredentials=new D(new I(t,r))}}(n,...e)}return n}function aM(e){if(e._terminated)throw new _(N.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,r,n,a,i;let s=e._freezeSettings(),o=(a=e._databaseId,i=(null==(t=e._app)?void 0:t.options.appId)||"",new ey(a,i,e._persistenceKey,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,ab(s.experimentalLongPollingOptions),s.useFetchStreams));e._componentsProvider||(null==(r=s.localCache)?void 0:r._offlineComponentProvider)&&(null==(n=s.localCache)?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new af(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}(e),e._firestoreClient}class aU{constructor(e){this._byteString=e}static fromBase64String(e){try{return new aU(eu.fromBase64String(e))}catch(e){throw new _(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new aU(eu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class aF{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new _(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new q(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function aV(){return new aF("__name__")}class az{constructor(e){this._methodName=e}}class aB{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return M(this._lat,e._lat)||M(this._long,e._long)}}class aH{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}(this._values,e._values)}}let aq=/^__.*__$/;class a${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tV(e,this.data,this.fieldMask,t,this.fieldTransforms):new tF(e,this.data,t,this.fieldTransforms)}}class aW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tV(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aG(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}class aK{constructor(e,t,r,n,a,i){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new aK(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.Fu({path:r,xu:!1});return n.Ou(e),n}Nu(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.Fu({path:r,xu:!1});return n.vu(),n}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return a9(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(0===e.length)throw this.Bu("Document fields must not be empty");if(aG(this.Cu)&&aq.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class aQ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||r7(e)}Qu(e,t,r,n=!1){return new aK({Cu:e,methodName:t,qu:r,path:q.emptyPath(),xu:!1,ku:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aY(e){let t=e._freezeSettings(),r=r7(e._databaseId);return new aQ(e._databaseId,!!t.ignoreUndefinedProperties,r)}function aX(e,t,r,n,a,i={}){let s,o,l=e.Qu(i.merge||i.mergeFields?2:0,t,r,a);a4("Data must be an object, but it was:",l,n);let u=a5(n,l);if(i.merge)s=new eo(l.fieldMask),o=l.fieldTransforms;else if(i.mergeFields){let e=[];for(let n of i.mergeFields){let a=a6(t,n,r);if(!l.contains(a))throw new _(N.INVALID_ARGUMENT,`Field '${a}' is specified in your field mask but missing from your input data.`);ie(e,a)||e.push(a)}s=new eo(e),o=l.fieldTransforms.filter(e=>s.covers(e.field))}else s=null,o=l.fieldTransforms;return new a$(new eL(u),s,o)}class aJ extends az{_toFieldTransform(e){if(2!==e.Cu)throw 1===e.Cu?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof aJ}}class aZ extends az{_toFieldTransform(e){return new tA(e.path,new tE)}isEqual(e){return e instanceof aZ}}function a0(e,t,r,n){let a=e.Qu(1,t,r);a4("Data must be an object, but it was:",a,n);let i=[],s=eL.empty();return ee(n,(e,n)=>{let o=a7(t,e,r);n=(0,c.getModularInstance)(n);let l=a.Nu(o);if(n instanceof aJ)i.push(o);else{let e=a2(n,l);null!=e&&(i.push(o),s.set(o,e))}}),new aW(s,new eo(i),a.fieldTransforms)}function a1(e,t,r,n,a,i){let s=e.Qu(1,t,r),o=[a6(t,n,r)],l=[a];if(i.length%2!=0)throw new _(N.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<i.length;e+=2)o.push(a6(t,i[e])),l.push(i[e+1]);let u=[],d=eL.empty();for(let e=o.length-1;e>=0;--e)if(!ie(u,o[e])){let t=o[e],r=l[e];r=(0,c.getModularInstance)(r);let n=s.Nu(t);if(r instanceof aJ)u.push(t);else{let e=a2(r,n);null!=e&&(u.push(t),d.set(t,e))}}return new aW(d,new eo(u),s.fieldTransforms)}function a2(e,t){if(a3(e=(0,c.getModularInstance)(e)))return a4("Unsupported field value:",t,e),a5(e,t);if(e instanceof az)return function(e,t){if(!aG(t.Cu))throw t.Bu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Bu(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&4!==t.Cu)throw t.Bu("Nested arrays are not supported");let r=[],n=0;for(let a of e){let e=a2(a,t.Lu(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}return function(e,t){var r,n,a;if(null===(e=(0,c.getModularInstance)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return r=t.serializer,"number"==typeof(a=n=e)&&Number.isInteger(a)&&!J(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER?tx(n):tb(r,n);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=F.fromDate(e);return{timestampValue:rs(t.serializer,r)}}if(e instanceof F){let r=new F(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:rs(t.serializer,r)}}if(e instanceof aB)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof aU)return{bytesValue:ro(t.serializer,e._byteString)};if(e instanceof aC){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.Bu(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ru(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof aH)return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Bu("VectorValues must only contain numeric values.");return tb(t.serializer,e)})}}}}};throw t.Bu(`Unsupported field value: ${aS(e)}`)}(e,t)}function a5(e,t){let r={};return et(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ee(e,(e,n)=>{let a=a2(n,t.Mu(e));null!=a&&(r[e]=a)}),{mapValue:{fields:r}}}function a3(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof F||e instanceof aB||e instanceof aU||e instanceof aC||e instanceof az||e instanceof aH)}function a4(e,t,r){if(!a3(r)||"object"!=typeof r||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){let n=aS(r);throw"an object"===n?t.Bu(e+" a custom object"):t.Bu(e+" "+n)}}function a6(e,t,r){if((t=(0,c.getModularInstance)(t))instanceof aF)return t._internalPath;if("string"==typeof t)return a7(e,t);throw a9("Field path arguments must be of type string or ",e,!1,void 0,r)}let a8=RegExp("[~\\*/\\[\\]]");function a7(e,t,r){if(t.search(a8)>=0)throw a9(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new aF(...t.split("."))._internalPath}catch(n){throw a9(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function a9(e,t,r,n,a){let i=n&&!n.isEmpty(),s=void 0!==a,o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=` in field ${n}`),s&&(l+=` in document ${a}`),l+=")"),new _(N.INVALID_ARGUMENT,o+e+l)}function ie(e,t){return e.some(e=>e.isEqual(t))}class it{constructor(e,t,r,n,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new aC(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new ir(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(ia("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ir extends it{data(){return super.data()}}function ia(e,t){return"string"==typeof t?a7(e,t):t instanceof aF?t._internalPath:t._delegate._internalPath}function ii(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new _(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class is{}class io extends is{}function il(e,t,...r){let n=[];for(let a of(t instanceof is&&n.push(t),function(e){let t=e.filter(e=>e instanceof id).length,r=e.filter(e=>e instanceof iu).length;if(t>1||t>0&&r>0)throw new _(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(r)),n))e=a._apply(e);return e}class iu extends io{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new iu(e,t,r)}_apply(e){let t=this._parse(e);return iy(e._query,t),new aI(e.firestore,e.converter,tr(e._query,t))}_parse(e){let t=aY(e.firestore);return function(e,t,r,n,a,i,s){let o;if(a.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new _(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){ig(s,i);let t=[];for(let r of s)t.push(im(n,e,r));o={arrayValue:{values:t}}}else o=im(n,e,s)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||ig(s,i),o=function(e,t,r,n=!1){return a2(r,e.Qu(n?4:3,t))}(r,t,s,"in"===i||"not-in"===i);return eH.create(a,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ic(e,t,r){let n=ia("where",e);return iu._create(n,t,r)}class id extends is{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new id(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:eq.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e;for(let e of t.getFlattenedFilters())iy(r,e),r=tr(r,e)}(e._query,t),new aI(e.firestore,e.converter,tr(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ih extends io{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ih(e,t)}_apply(e){let t=function(e,t,r){if(null!==e.startAt)throw new _(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ez(t,r)}(e._query,this._field,this._direction);return new aI(e.firestore,e.converter,function(e,t){let r=e.explicitOrderBy.concat([t]);return new e6(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ip(e,t="asc"){let r=ia("orderBy",e);return ih._create(r,t)}function im(e,t,r){if("string"==typeof(r=(0,c.getModularInstance)(r))){if(""===r)throw new _(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!e9(t)&&-1!==r.indexOf("/"))throw new _(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(B.fromString(r));if(!$.isDocumentKey(n))throw new _(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return eT(e,new $(n))}if(r instanceof aC)return eT(e,r._key);throw new _(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${aS(r)}.`)}function ig(e,t){if(!Array.isArray(e)||0===e.length)throw new _(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function iy(e,t){let r=function(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new _(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new _(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class iv{convertValue(e,t="none"){switch(ex(e)){case 0:return null;case 1:return e.booleanValue;case 2:return eh(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ef(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw S()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ee(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){var t,r,n;return new aH(null==(n=null==(r=null==(t=e.fields)?void 0:t.value.arrayValue)?void 0:r.values)?void 0:n.map(e=>eh(e.doubleValue)))}convertGeoPoint(e){return new aB(eh(e.latitude),eh(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=em(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(eg(e));default:return null}}convertTimestamp(e){let t=ed(e);return new F(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=B.fromString(e);rx(r)||S();let n=new ev(r.get(1),r.get(3)),a=new $(r.popFirst(5));return n.isEqual(t)||x(`Document ${a} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function ib(e,t,r){return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}class ix{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iw extends it{constructor(e,t,r,n,a,i){super(e,t,r,n,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ik(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(ia("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ik extends iw{data(e={}){return super.data(e)}}class iE{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new ix(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ik(this._firestore,this._userDataWriter,r.key,r,new ix(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new ik(e._firestore,e._userDataWriter,r.doc.key,r.doc,new ix(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new ik(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ix(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),a=-1,i=-1;return 0!==t.type&&(a=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(i=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}(t.type),doc:n,oldIndex:a,newIndex:i}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function iS(e){e=aN(e,aC);let t=aN(e.firestore,aR);return(function(e,t,r={}){let n=new T;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,r,n,a){let i=new ah({next:o=>{i.Za(),t.enqueueAndForget(()=>nz(e,s));let l=o.docs.has(r);!l&&o.fromCache?a.reject(new _(N.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&n&&"server"===n.source?a.reject(new _(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(o)},error:e=>a.reject(e)}),s=new n$(e8(r.path),i,{includeMetadataChanges:!0,_a:!0});return nV(e,s)})(await av(e),e.asyncQueue,t,r,n)),n.promise})(aM(t),e._key).then(r=>iP(t,e,r))}class iN extends iv{constructor(e){super(),this.firestore=e}convertBytes(e){return new aU(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new aC(this.firestore,null,t)}}function i_(e){e=aN(e,aI);let t=aN(e.firestore,aR),r=aM(t),n=new iN(t);return ii(e._query),(function(e,t,r={}){let n=new T;return e.asyncQueue.enqueueAndForget(async()=>(function(e,t,r,n,a){let i=new ah({next:r=>{i.Za(),t.enqueueAndForget(()=>nz(e,s)),r.fromCache&&"server"===n.source?a.reject(new _(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(r)},error:e=>a.reject(e)}),s=new n$(r,i,{includeMetadataChanges:!0,_a:!0});return nV(e,s)})(await av(e),e.asyncQueue,t,r,n)),n.promise})(r,e._query).then(r=>new iE(t,n,e,r))}function iT(e,t,r){e=aN(e,aC);let n=aN(e.firestore,aR),a=ib(e.converter,t,r);return ij(n,[aX(aY(n),"setDoc",e._key,a,null!==e.converter,r).toMutation(e._key,tP.none())])}function iI(e,t,r,...n){e=aN(e,aC);let a=aN(e.firestore,aR),i=aY(a);return ij(a,[("string"==typeof(t=(0,c.getModularInstance)(t))||t instanceof aF?a1(i,"updateDoc",e._key,t,r,n):a0(i,"updateDoc",e._key,t)).toMutation(e._key,tP.exists(!0))])}function iC(e){return ij(aN(e.firestore,aR),[new tq(e._key,tP.none())])}function iD(e,t){let r=aN(e.firestore,aR),n=aj(e),a=ib(e.converter,t);return ij(r,[aX(aY(e.firestore),"addDoc",n._key,a,null!==e.converter,{}).toMutation(n._key,tP.exists(!1))]).then(()=>n)}function iA(e,...t){let r,n,a;e=(0,c.getModularInstance)(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof t[0]||aO(t[s])||(i=t[s],s++);let o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(aO(t[s])){let e=t[s];t[s]=null==(l=e.next)?void 0:l.bind(e),t[s+1]=null==(u=e.error)?void 0:u.bind(e),t[s+2]=null==(d=e.complete)?void 0:d.bind(e)}if(e instanceof aC)n=aN(e.firestore,aR),a=e8(e._key.path),r={next:r=>{t[s]&&t[s](iP(n,e,r))},error:t[s+1],complete:t[s+2]};else{let i=aN(e,aI);n=aN(i.firestore,aR),a=i._query;let o=new iN(n);r={next:e=>{t[s]&&t[s](new iE(n,o,i,e))},error:t[s+1],complete:t[s+2]},ii(e._query)}var l,u,d,h=aM(n),f=a;let p=new ah(r),m=new n$(f,p,o);return h.asyncQueue.enqueueAndForget(async()=>nV(await av(h),m)),()=>{p.Za(),h.asyncQueue.enqueueAndForget(async()=>nz(await av(h),m))}}function ij(e,t){var r=aM(e);let n=new T;return r.asyncQueue.enqueueAndForget(async()=>n3(await ay(r).then(e=>e.syncEngine),t,n)),n.promise}function iP(e,t,r){let n=r.docs.get(t._key),a=new iN(e);return new iw(e,a,t._key,n,new ix(r.hasPendingWrites,r.fromCache),t.converter)}class iO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=aY(e)}set(e,t,r){this._verifyNotCommitted();let n=iR(e,this._firestore),a=ib(n.converter,t,r),i=aX(this._dataReader,"WriteBatch.set",n._key,a,null!==n.converter,r);return this._mutations.push(i.toMutation(n._key,tP.none())),this}update(e,t,r,...n){let a;this._verifyNotCommitted();let i=iR(e,this._firestore);return a="string"==typeof(t=(0,c.getModularInstance)(t))||t instanceof aF?a1(this._dataReader,"WriteBatch.update",i._key,t,r,n):a0(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(a.toMutation(i._key,tP.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=iR(e,this._firestore);return this._mutations=this._mutations.concat(new tq(t._key,tP.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function iR(e,t){if((e=(0,c.getModularInstance)(e)).firestore!==t)throw new _(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function iL(){return new aZ("serverTimestamp")}function iM(e){return aM(e=aN(e,aR)),new iO(e,t=>ij(e,t))}new WeakMap,function(e=!0){g=o.SDK_VERSION,(0,o._registerComponent)(new(0,l.Component)("firestore",(t,{instanceIdentifier:r,options:n})=>{let a=t.getProvider("app").getImmediate(),i=new aR(new A(t.getProvider("auth-internal")),new R(t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ev(e.options.projectId,t)}(a,r),a);return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(p,"4.7.3",void 0),(0,o.registerVersion)(p,"4.7.3","esm2017")}()}),k("7xvHX",function(t,r){e(t.exports,"_registerComponent",()=>y),e(t.exports,"_getProvider",()=>v),e(t.exports,"_removeServiceInstance",()=>b),e(t.exports,"_isFirebaseServerApp",()=>x),e(t.exports,"registerVersion",()=>T),e(t.exports,"SDK_VERSION",()=>S),e(t.exports,"initializeApp",()=>N),e(t.exports,"getApp",()=>_);var n=w("eryG9"),a=w("5Z2ef"),i=w("gMVVg"),s=w("iItpQ");class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!function(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let l="@firebase/app",u="0.10.13",c=new(0,a.Logger)("@firebase/app"),d="[DEFAULT]",h={[l]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map,m=new Map;function g(e,t){try{e.container.addComponent(t)}catch(r){c.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function y(e){let t=e.name;if(m.has(t))return c.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(m.set(t,e),f.values()))g(r,e);for(let t of p.values())g(t,e);return!0}function v(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function b(e,t,r=d){v(e,t).clearInstance(r)}function x(e){return void 0!==e.settings}let k=new(0,i.ErrorFactory)("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class E{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new(0,n.Component)("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw k.create("app-deleted",{appName:this._name})}}let S="10.14.1";function N(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let a=Object.assign({name:d,automaticDataCollectionEnabled:!1},t),s=a.name;if("string"!=typeof s||!s)throw k.create("bad-app-name",{appName:String(s)});if(r||(r=(0,i.getDefaultAppConfig)()),!r)throw k.create("no-options");let o=f.get(s);if(o)if((0,i.deepEqual)(r,o.options)&&(0,i.deepEqual)(a,o.config))return o;else throw k.create("duplicate-app",{appName:s});let l=new(0,n.ComponentContainer)(s);for(let e of m.values())l.addComponent(e);let u=new E(r,a,l);return f.set(s,u),u}function _(e=d){let t=f.get(e);if(!t&&e===d&&(0,i.getDefaultAppConfig)())return N();if(!t)throw k.create("no-app",{appName:e});return t}function T(e,t,r){var a;let i=null!=(a=h[e])?a:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),c.warn(e.join(" "));return}y(new(0,n.Component)(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}let I="firebase-heartbeat-store",C=null;function D(){return C||(C=(0,s.openDB)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(I)}catch(e){console.warn(e)}}}).catch(e=>{throw k.create("idb-open",{originalErrorMessage:e.message})})),C}async function A(e){try{let t=(await D()).transaction(I),r=await t.objectStore(I).get(P(e));return await t.done,r}catch(e){if(e instanceof i.FirebaseError)c.warn(e.message);else{let t=k.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});c.warn(t.message)}}}async function j(e,t){try{let r=(await D()).transaction(I,"readwrite"),n=r.objectStore(I);await n.put(t,P(e)),await r.done}catch(e){if(e instanceof i.FirebaseError)c.warn(e.message);else{let t=k.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});c.warn(t.message)}}}function P(e){return`${e.name}!${e.options.appId}`}class O{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new L(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=R();if((null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{let t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(e){c.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=R(),{heartbeatsToSend:r,unsentEntries:n}=function(e,t=1024){let r=[],n=e.slice();for(let a of e){let e=r.find(e=>e.agent===a.agent);if(e){if(e.dates.push(a.date),M(r)>t){e.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),M(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),a=(0,i.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return c.warn(e),""}}}function R(){return new Date().toISOString().substring(0,10)}class L{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.isIndexedDBAvailable)()&&(0,i.validateIndexedDBOpenable)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await A(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return j(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return j(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function M(e){return(0,i.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}y(new(0,n.Component)("platform-logger",e=>new o(e),"PRIVATE")),y(new(0,n.Component)("heartbeat",e=>new O(e),"PRIVATE")),T(l,u,""),T(l,u,"esm2017"),T("fire-js","")}),k("eryG9",function(t,r){e(t.exports,"Component",()=>a),e(t.exports,"ComponentContainer",()=>o);var n=w("gMVVg");class a{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let i="[DEFAULT]";class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new(0,n.Deferred);if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!=(t=null==e?void 0:e.optional)&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}if(n)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:i})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=i){return this.instances.has(e)}getOptions(e=i){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),a=null!=(r=this.onInitCallbacks.get(n))?r:new Set;a.add(e),this.onInitCallbacks.set(n,a);let i=this.instances.get(n);return i&&e(i,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var r;let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e)===i?void 0:r,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}return n||null}normalizeInstanceIdentifier(e=i){return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}}),k("gMVVg",function(t,r){e(t.exports,"base64urlEncodeWithoutPadding",()=>l),e(t.exports,"base64Decode",()=>u),e(t.exports,"getDefaultEmulatorHost",()=>d),e(t.exports,"getDefaultEmulatorHostnameAndPort",()=>h),e(t.exports,"getDefaultAppConfig",()=>f),e(t.exports,"getExperimentalSetting",()=>p),e(t.exports,"Deferred",()=>m),e(t.exports,"createMockUserToken",()=>g),e(t.exports,"getUA",()=>y),e(t.exports,"isMobileCordova",()=>b),e(t.exports,"isBrowser",()=>x),e(t.exports,"isWebWorker",()=>w),e(t.exports,"isCloudflareWorker",()=>k),e(t.exports,"isBrowserExtension",()=>E),e(t.exports,"isReactNative",()=>S),e(t.exports,"isIE",()=>N),e(t.exports,"isSafari",()=>_),e(t.exports,"isIndexedDBAvailable",()=>T),e(t.exports,"validateIndexedDBOpenable",()=>I),e(t.exports,"areCookiesEnabled",()=>C),e(t.exports,"FirebaseError",()=>D),e(t.exports,"ErrorFactory",()=>A),e(t.exports,"isEmpty",()=>P),e(t.exports,"deepEqual",()=>function e(t,r){if(t===r)return!0;let n=Object.keys(t),a=Object.keys(r);for(let i of n){if(!a.includes(i))return!1;let n=t[i],s=r[i];if(O(n)&&O(s)){if(!e(n,s))return!1}else if(n!==s)return!1}for(let e of a)if(!n.includes(e))return!1;return!0}),e(t.exports,"querystring",()=>R),e(t.exports,"querystringDecode",()=>L),e(t.exports,"extractQuerystring",()=>M),e(t.exports,"createSubscribe",()=>U),e(t.exports,"calculateBackoffMillis",()=>z),e(t.exports,"getModularInstance",()=>B);let n=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:(a<2048?t[r++]=a>>6|192:((64512&a)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++n)),t[r++]=a>>18|240,t[r++]=a>>12&63|128):t[r++]=a>>12|224,t[r++]=a>>6&63|128),t[r++]=63&a|128)}return t},a=function(e){let t=[],r=0,n=0;for(;r<e.length;){let a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){let i=e[r++];t[n++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){let i=e[r++],s=((7&a)<<18|(63&i)<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{let i=e[r++],s=e[r++];t[n++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&s)}}return t.join("")},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let a=e[t],i=t+1<e.length,s=i?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=a>>2,c=(3&a)<<4|s>>4,d=(15&s)<<2|l>>6,h=63&l;!o&&(h=64,i||(d=64)),n.push(r[u],r[c],r[d],r[h])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):a(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let a=r[e.charAt(t++)],i=t<e.length?r[e.charAt(t)]:0,o=++t<e.length?r[e.charAt(t)]:64,l=++t<e.length?r[e.charAt(t)]:64;if(++t,null==a||null==i||null==o||null==l)throw new s;let u=a<<2|i>>4;if(n.push(u),64!==o){let e=i<<4&240|o>>2;if(n.push(e),64!==l){let e=o<<6&192|l;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let o=function(e){let t=n(e);return i.encodeByteArray(t,!0)},l=function(e){return o(e).replace(/\./g,"")},u=function(e){try{return i.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},c=()=>{try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==v)return v;throw Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},d=e=>{var t,r;return null==(r=null==(t=c())?void 0:t.emulatorHosts)?void 0:r[e]},h=e=>{let t=d(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},f=()=>{var e;return null==(e=c())?void 0:e.config},p=e=>{var t;return null==(t=c())?void 0:t[`_${e}`]};class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function g(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r=t||"demo-project",n=e.iat||0,a=e.sub||e.user_id;if(!a)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(i)),""].join(".")}function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function b(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())}function x(){return"undefined"!=typeof window||w()}function w(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function k(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function E(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function S(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function N(){let e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return!function(){var e;let t=null==(e=c())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(v.process)}catch(e){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T(){try{return"object"==typeof indexedDB}catch(e){return!1}}function I(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var e;t((null==(e=a.error)?void 0:e.message)||"")}}catch(e){t(e)}})}function C(){return"undefined"!=typeof navigator&&!!navigator.cookieEnabled}class D extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,D.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,A.prototype.create)}}class A{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var r,n;let a=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?(r=s,n=a,r.replace(j,(e,t)=>{let r=n[t];return null!=r?String(r):`<${t}?>`})):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new D(i,l,a)}}let j=/\{\$([^}]+)}/g;function P(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O(e){return null!==e&&"object"==typeof e}function R(e){let t=[];for(let[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function L(e){let t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){let[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}}),t}function M(e){let t=e.indexOf("?");if(!t)return"";let r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function U(e,t){let r=new F(e,t);return r.subscribe.bind(r)}class F{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let n;if(void 0===e&&void 0===t&&void 0===r)throw Error("Missing Observer.");void 0===(n=!function(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?{next:e,error:t,complete:r}:e).next&&(n.next=V),void 0===n.error&&(n.error=V),void 0===n.complete&&(n.complete=V);let a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}}),this.observers.push(n),a}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}function z(e,t=1e3,r=2){let n=t*Math.pow(r,e),a=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+a)}function B(e){return e&&e._delegate?e._delegate:e}}),k("5Z2ef",function(t,r){var n,a;e(t.exports,"LogLevel",()=>n),e(t.exports,"Logger",()=>c),e(t.exports,"setLogLevel",()=>d),e(t.exports,"setUserLogHandler",()=>h);let i=[];(a=n||(n={}))[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT";let s={debug:n.DEBUG,verbose:n.VERBOSE,info:n.INFO,warn:n.WARN,error:n.ERROR,silent:n.SILENT},o=n.INFO,l={[n.DEBUG]:"log",[n.VERBOSE]:"log",[n.INFO]:"info",[n.WARN]:"warn",[n.ERROR]:"error"},u=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),a=l[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in n))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,n.DEBUG,...e),this._logHandler(this,n.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,n.VERBOSE,...e),this._logHandler(this,n.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,n.INFO,...e),this._logHandler(this,n.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,n.WARN,...e),this._logHandler(this,n.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,n.ERROR,...e),this._logHandler(this,n.ERROR,...e)}}function d(e){i.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(let r of i){let a=null;t&&t.level&&(a=s[t.level]),null===e?r.userLogHandler=null:r.userLogHandler=(t,r,...i)=>{let s=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");r>=(null!=a?a:t.logLevel)&&e({level:n[r].toLowerCase(),message:s,args:i,type:t.name})}}}}),k("iItpQ",function(t,r){e(t.exports,"openDB",()=>a);var n=w("jMRra");function a(e,t,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){let l=indexedDB.open(e,t),u=(0,n.w)(l);return i&&l.addEventListener("upgradeneeded",e=>{i((0,n.w)(l.result),e.oldVersion,e.newVersion,(0,n.w)(l.transaction),e)}),r&&l.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),u.then(e=>{o&&e.addEventListener("close",()=>o()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),u}let i=["get","getKey","getAll","getAllKeys","count"],s=["put","add","delete","clear"],o=new Map;function l(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(o.get(t))return o.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,a=s.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||i.includes(r)))return;let l=async function(e,...t){let i=this.transaction(e,a?"readwrite":"readonly"),s=i.store;return n&&(s=s.index(t.shift())),(await Promise.all([s[r](...t),a&&i.done]))[0]};return o.set(t,l),l}(0,n.r)(e=>({...e,get:(t,r,n)=>l(t,r)||e.get(t,r,n),has:(t,r)=>!!l(t,r)||e.has(t,r)}))}),k("jMRra",function(t,r){let n,a;e(t.exports,"w",()=>h),e(t.exports,"r",()=>d);let i=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,u=new WeakMap,c={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||o.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return h(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){c=e(c)}function h(e){if(e instanceof IDBRequest){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{t(h(e.result)),n()},i=()=>{r(e.error),n()};e.addEventListener("success",a),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&i.set(t,e)}).catch(()=>{}),u.set(t,e),t}if(l.has(e))return l.get(e);let t=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(f(this),t),h(i.get(this))}:function(...t){return h(e.apply(f(this),t))}:function(t,...r){let n=e.call(f(this),t,...r);return o.set(n,t.sort?t.sort():[t]),h(n)};return e instanceof IDBTransaction&&function(e){if(s.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{t(),n()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});s.set(e,t)}(e),(n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,c):e}(e);return t!==e&&(l.set(e,t),u.set(t,e)),t}let f=e=>u.get(e)}),k("cozvr",function(t,r){e(t.exports,"Integer",()=>n),e(t.exports,"Md5",()=>a);var n,a,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==v?v:"undefined"!=typeof self?self:{},s={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}var t=function(){this.blockSize=-1};function r(){}function i(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var a=0;16>a;++a)n[a]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(a=0;16>a;++a)n[a]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],a=e.g[2];var i=e.g[3],s=t+(i^r&(a^i))+n[0]+0xd76aa478|0;s=i+(a^(t=r+(s<<7|s>>>25))&(r^a))+n[1]+0xe8c7b756|0,s=a+(r^(i=t+(s<<12|s>>>20))&(t^r))+n[2]+0x242070db|0,s=r+(t^(a=i+(s<<17|s>>>15))&(i^t))+n[3]+0xc1bdceee|0,s=t+(i^(r=a+(s<<22|s>>>10))&(a^i))+n[4]+0xf57c0faf|0,s=i+(a^(t=r+(s<<7|s>>>25))&(r^a))+n[5]+0x4787c62a|0,s=a+(r^(i=t+(s<<12|s>>>20))&(t^r))+n[6]+0xa8304613|0,s=r+(t^(a=i+(s<<17|s>>>15))&(i^t))+n[7]+0xfd469501|0,s=t+(i^(r=a+(s<<22|s>>>10))&(a^i))+n[8]+0x698098d8|0,s=i+(a^(t=r+(s<<7|s>>>25))&(r^a))+n[9]+0x8b44f7af|0,s=a+(r^(i=t+(s<<12|s>>>20))&(t^r))+n[10]+0xffff5bb1|0,s=r+(t^(a=i+(s<<17|s>>>15))&(i^t))+n[11]+0x895cd7be|0,s=t+(i^(r=a+(s<<22|s>>>10))&(a^i))+n[12]+0x6b901122|0,s=i+(a^(t=r+(s<<7|s>>>25))&(r^a))+n[13]+0xfd987193|0,s=a+(r^(i=t+(s<<12|s>>>20))&(t^r))+n[14]+0xa679438e|0,s=r+(t^(a=i+(s<<17|s>>>15))&(i^t))+n[15]+0x49b40821|0,r=a+(s<<22|s>>>10),s=t+(a^i&(r^a))+n[1]+0xf61e2562|0,t=r+(s<<5|s>>>27),s=i+(r^a&(t^r))+n[6]+0xc040b340|0,i=t+(s<<9|s>>>23),s=a+(t^r&(i^t))+n[11]+0x265e5a51|0,a=i+(s<<14|s>>>18),s=r+(i^t&(a^i))+n[0]+0xe9b6c7aa|0,r=a+(s<<20|s>>>12),s=t+(a^i&(r^a))+n[5]+0xd62f105d|0,t=r+(s<<5|s>>>27),s=i+(r^a&(t^r))+n[10]+0x2441453|0,i=t+(s<<9|s>>>23),s=a+(t^r&(i^t))+n[15]+0xd8a1e681|0,a=i+(s<<14|s>>>18),s=r+(i^t&(a^i))+n[4]+0xe7d3fbc8|0,r=a+(s<<20|s>>>12),s=t+(a^i&(r^a))+n[9]+0x21e1cde6|0,t=r+(s<<5|s>>>27),s=i+(r^a&(t^r))+n[14]+0xc33707d6|0,i=t+(s<<9|s>>>23),s=a+(t^r&(i^t))+n[3]+0xf4d50d87|0,a=i+(s<<14|s>>>18),s=r+(i^t&(a^i))+n[8]+0x455a14ed|0,r=a+(s<<20|s>>>12),s=t+(a^i&(r^a))+n[13]+0xa9e3e905|0,t=r+(s<<5|s>>>27),s=i+(r^a&(t^r))+n[2]+0xfcefa3f8|0,i=t+(s<<9|s>>>23),s=a+(t^r&(i^t))+n[7]+0x676f02d9|0,a=i+(s<<14|s>>>18),s=r+(i^t&(a^i))+n[12]+0x8d2a4c8a|0,s=t+((r=a+(s<<20|s>>>12))^a^i)+n[5]+0xfffa3942|0,s=i+((t=r+(s<<4|s>>>28))^r^a)+n[8]+0x8771f681|0,s=a+((i=t+(s<<11|s>>>21))^t^r)+n[11]+0x6d9d6122|0,s=r+((a=i+(s<<16|s>>>16))^i^t)+n[14]+0xfde5380c|0,s=t+((r=a+(s<<23|s>>>9))^a^i)+n[1]+0xa4beea44|0,s=i+((t=r+(s<<4|s>>>28))^r^a)+n[4]+0x4bdecfa9|0,s=a+((i=t+(s<<11|s>>>21))^t^r)+n[7]+0xf6bb4b60|0,s=r+((a=i+(s<<16|s>>>16))^i^t)+n[10]+0xbebfbc70|0,s=t+((r=a+(s<<23|s>>>9))^a^i)+n[13]+0x289b7ec6|0,s=i+((t=r+(s<<4|s>>>28))^r^a)+n[0]+0xeaa127fa|0,s=a+((i=t+(s<<11|s>>>21))^t^r)+n[3]+0xd4ef3085|0,s=r+((a=i+(s<<16|s>>>16))^i^t)+n[6]+0x4881d05|0,s=t+((r=a+(s<<23|s>>>9))^a^i)+n[9]+0xd9d4d039|0,s=i+((t=r+(s<<4|s>>>28))^r^a)+n[12]+0xe6db99e5|0,s=a+((i=t+(s<<11|s>>>21))^t^r)+n[15]+0x1fa27cf8|0,s=r+((a=i+(s<<16|s>>>16))^i^t)+n[2]+0xc4ac5665|0,r=a+(s<<23|s>>>9),s=t+(a^(r|~i))+n[0]+0xf4292244|0,t=r+(s<<6|s>>>26),s=i+(r^(t|~a))+n[7]+0x432aff97|0,i=t+(s<<10|s>>>22),s=a+(t^(i|~r))+n[14]+0xab9423a7|0,a=i+(s<<15|s>>>17),s=r+(i^(a|~t))+n[5]+0xfc93a039|0,r=a+(s<<21|s>>>11),s=t+(a^(r|~i))+n[12]+0x655b59c3|0,t=r+(s<<6|s>>>26),s=i+(r^(t|~a))+n[3]+0x8f0ccc92|0,i=t+(s<<10|s>>>22),s=a+(t^(i|~r))+n[10]+0xffeff47d|0,a=i+(s<<15|s>>>17),s=r+(i^(a|~t))+n[1]+0x85845dd1|0,r=a+(s<<21|s>>>11),s=t+(a^(r|~i))+n[8]+0x6fa87e4f|0,t=r+(s<<6|s>>>26),s=i+(r^(t|~a))+n[15]+0xfe2ce6e0|0,i=t+(s<<10|s>>>22),s=a+(t^(i|~r))+n[6]+0xa3014314|0,a=i+(s<<15|s>>>17),s=r+(i^(a|~t))+n[13]+0x4e0811a1|0,r=a+(s<<21|s>>>11),s=t+(a^(r|~i))+n[4]+0xf7537e82|0,t=r+(s<<6|s>>>26),s=i+(r^(t|~a))+n[11]+0xbd3af235|0,i=t+(s<<10|s>>>22),s=a+(t^(i|~r))+n[2]+0x2ad7d2bb|0,a=i+(s<<15|s>>>17),s=r+(i^(a|~t))+n[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(a+(s<<21|s>>>11))|0,e.g[2]=e.g[2]+a|0,e.g[3]=e.g[3]+i|0}function o(e,t){this.h=t;for(var r=[],n=!0,a=e.length-1;0<=a;a--){var i=0|e[a];n&&i==t||(r[a]=i,n=!1)}this.g=r}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,n){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[r].apply(e,a)},e.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,n=this.B,a=this.h,s=0;s<t;){if(0==a)for(;s<=r;)i(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(n[a++]=e.charCodeAt(s++),a==this.blockSize){i(this,n),a=0;break}}else for(;s<t;)if(n[a++]=e[s++],a==this.blockSize){i(this,n),a=0;break}}this.h=a,this.o+=t},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var l,u={};function c(e){var t;return -128<=e&&128>e?(t=function(e){return new o([0|e],0>e?-1:0)},Object.prototype.hasOwnProperty.call(u,e)?u[e]:u[e]=t(e)):new o([0|e],0>e?-1:0)}function d(e){if(isNaN(e)||!isFinite(e))return h;if(0>e)return y(d(-e));for(var t=[],r=1,n=0;e>=r;n++)t[n]=e/r|0,r*=0x100000000;return new o(t,0)}var h=c(0),f=c(1),p=c(0x1000000);function m(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function g(e){return -1==e.h}function y(e){for(var t=e.g.length,r=[],n=0;n<t;n++)r[n]=~e.g[n];return new o(r,~e.h).add(f)}function v(e,t){return e.add(y(t))}function b(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function x(e,t){this.g=e,this.h=t}function w(e,t){if(m(t))throw Error("division by zero");if(m(e))return new x(h,h);if(g(e))return t=w(y(e),t),new x(y(t.g),y(t.h));if(g(t))return t=w(e,y(t)),new x(y(t.g),t.h);if(30<e.g.length){if(g(e)||g(t))throw Error("slowDivide_ only works with positive integers.");for(var r=f,n=t;0>=n.l(e);)r=k(r),n=k(n);var a=E(r,1),i=E(n,1);for(n=E(n,2),r=E(r,2);!m(n);){var s=i.add(n);0>=s.l(e)&&(a=a.add(r),i=s),n=E(n,1),r=E(r,1)}return t=v(e,a.j(t)),new x(a,t)}for(a=h;0<=e.l(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,n-48),s=(i=d(r)).j(t);g(s)||0<s.l(e);)r-=n,s=(i=d(r)).j(t);m(i)&&(i=f),a=a.add(i),e=v(e,s)}return new x(a,e)}function k(e){for(var t=e.g.length+1,r=[],n=0;n<t;n++)r[n]=e.i(n)<<1|e.i(n-1)>>>31;return new o(r,e.h)}function E(e,t){var r=t>>5;t%=32;for(var n=e.g.length-r,a=[],i=0;i<n;i++)a[i]=0<t?e.i(i+r)>>>t|e.i(i+r+1)<<32-t:e.i(i+r);return new o(a,e.h)}(l=o.prototype).m=function(){if(g(this))return-y(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.i(r);e+=(0<=n?n:0x100000000+n)*t,t*=0x100000000}return e},l.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(m(this))return"0";if(g(this))return"-"+y(this).toString(e);for(var t=d(Math.pow(e,6)),r=this,n="";;){var a=w(r,t).g,i=((0<(r=v(r,a.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(m(r=a))return i+n;for(;6>i.length;)i="0"+i;n=i+n}},l.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},l.l=function(e){return g(e=v(this,e))?-1:+!m(e)},l.abs=function(){return g(this)?y(this):this},l.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0,a=0;a<=t;a++){var i=n+(65535&this.i(a))+(65535&e.i(a)),s=(i>>>16)+(this.i(a)>>>16)+(e.i(a)>>>16);n=s>>>16,i&=65535,s&=65535,r[a]=s<<16|i}return new o(r,-0x80000000&r[r.length-1]?-1:0)},l.j=function(e){if(m(this)||m(e))return h;if(g(this))return g(e)?y(this).j(y(e)):y(y(this).j(e));if(g(e))return y(this.j(y(e)));if(0>this.l(p)&&0>e.l(p))return d(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(var a=0;a<e.g.length;a++){var i=this.i(n)>>>16,s=65535&this.i(n),l=e.i(a)>>>16,u=65535&e.i(a);r[2*n+2*a]+=s*u,b(r,2*n+2*a),r[2*n+2*a+1]+=i*u,b(r,2*n+2*a+1),r[2*n+2*a+1]+=s*l,b(r,2*n+2*a+1),r[2*n+2*a+2]+=i*l,b(r,2*n+2*a+2)}for(n=0;n<t;n++)r[n]=r[2*n+1]<<16|r[2*n];for(n=t;n<2*t;n++)r[n]=0;return new o(r,0)},l.A=function(e){return w(this,e).h},l.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.i(n)&e.i(n);return new o(r,this.h&e.h)},l.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.i(n)|e.i(n);return new o(r,this.h|e.h)},l.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],n=0;n<t;n++)r[n]=this.i(n)^e.i(n);return new o(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,a=s.Md5=e,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return y(e(t.substring(1),r));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=d(Math.pow(r,8)),a=h,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),r);8>s?(s=d(Math.pow(r,s)),a=a.j(s).add(d(o))):a=(a=a.j(n)).add(d(o))}return a},n=s.Integer=o}).apply(void 0!==i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}),k("4rHck",function(t,r){e(t.exports,"XhrIo",()=>n),e(t.exports,"WebChannel",()=>a),e(t.exports,"EventType",()=>i),e(t.exports,"ErrorCode",()=>s),e(t.exports,"Stat",()=>o),e(t.exports,"Event",()=>l),e(t.exports,"getStatEventTarget",()=>u),e(t.exports,"createWebChannelTransport",()=>c);var n,a,i,s,o,l,u,c,d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==v?v:"undefined"!=typeof self?self:{},h={};(function(){var e,t,r,f="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},p=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof d&&d];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);!function(e,t){if(t)e:{var r=p;e=e.split(".");for(var n=0;n<e.length-1;n++){var a=e[n];if(!(a in r))break e;r=r[a]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&f(r,e,{configurable:!0,writable:!0,value:t})}}("Array.prototype.values",function(e){return e||function(){var e,t,r,n,a;return e=this,t=function(e,t){return t},e instanceof String&&(e+=""),r=0,n=!1,(a={next:function(){if(!n&&r<e.length){var a=r++;return{value:t(a,e[a]),done:!1}}return n=!0,{done:!0,value:void 0}}})[Symbol.iterator]=function(){return a},a}});var m=m||{},g=this||self;function y(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function b(e,t,r){return e.call.apply(e.bind,arguments)}function x(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function w(e,t,r){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:x).apply(null,arguments)}function k(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function E(e,t){function r(){}r.prototype=t.prototype,e.aa=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Qb=function(e,r,n){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[r].apply(e,a)}}function S(e){let t=e.length;if(0<t){let r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function N(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];if(y(r)){let t=e.length||0,n=r.length||0;e.length=t+n;for(let a=0;a<n;a++)e[t+a]=r[a]}else e.push(r)}}function _(e){return/^[\s\xa0]*$/.test(e)}function T(){var e=g.navigator;return e&&(e=e.userAgent)?e:""}function I(e){return I[" "](e),e}I[" "]=function(){};var C=-1!=T().indexOf("Gecko")&&(-1==T().toLowerCase().indexOf("webkit")||-1!=T().indexOf("Edge"))&&-1==T().indexOf("Trident")&&-1==T().indexOf("MSIE")&&-1==T().indexOf("Edge");function D(e,t,r){for(let n in e)t.call(r,e[n],n,e)}function A(e){let t={};for(let r in e)t[r]=e[r];return t}let j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let r,n;for(let t=1;t<arguments.length;t++){for(r in n=arguments[t])e[r]=n[r];for(let t=0;t<j.length;t++)r=j[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}var O=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new R,e=>e.reset());class R{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let L,M=!1,U=new class{constructor(){this.h=this.g=null}add(e,t){let r=O.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},F=()=>{let e=g.Promise.resolve(void 0);L=()=>{e.then(V)}};var V=()=>{let e;for(var t;e=null,U.g&&(e=U.g,U.g=U.g.next,U.g||(U.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){g.setTimeout(()=>{throw e},0)}(e)}O.j(t),100>O.h&&(O.h++,t.next=O.g,O.g=t)}M=!1};function z(){this.s=this.s,this.C=this.C}function B(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},B.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};g.addEventListener("test",e,t),g.removeEventListener("test",e,t)}catch(e){}return e}();function q(e,t){if(B.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(C){e:{try{I(t.nodeName);var a=!0;break e}catch(e){}a=!1}a||(t=null)}}else"mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement);this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:$[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&q.aa.h.call(this)}}E(q,B);var $={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var W="closure_listenable_"+(1e6*Math.random()|0),G=0;function K(e,t,r,n,a){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.ha=a,this.key=++G,this.da=this.fa=!1}function Q(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Y(e){this.src=e,this.g={},this.h=0}function X(e,t){var r=t.type;if(r in e.g){var n,a=e.g[r],i=Array.prototype.indexOf.call(a,t,void 0);(n=0<=i)&&Array.prototype.splice.call(a,i,1),n&&(Q(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function J(e,t,r,n){for(var a=0;a<e.length;++a){var i=e[a];if(!i.da&&i.listener==t&&!!r==i.capture&&i.ha==n)return a}return -1}Y.prototype.add=function(e,t,r,n,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var s=J(e,t,n,a);return -1<s?(t=e[s],r||(t.fa=!1)):((t=new K(t,this.src,i,!!n,a)).fa=r,e.push(t)),t};var Z="closure_lm_"+(1e6*Math.random()|0),ee={};function et(e,t,r,n,a,i){if(!t)throw Error("Invalid event type");var s=v(a)?!!a.capture:!!a,o=ei(e);if(o||(e[Z]=o=new Y(e)),(r=o.add(t,r,n,s,i)).proxy)return r;if(n=function e(t){return ea.call(e.src,e.listener,t)},r.proxy=n,n.src=e,n.listener=r,e.addEventListener)H||(a=s),void 0===a&&(a=!1),e.addEventListener(t.toString(),n,a);else if(e.attachEvent)e.attachEvent(en(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function er(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[W])X(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(en(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=ei(t))?(X(r,e),0==r.h&&(r.src=null,t[Z]=null)):Q(e)}}}function en(e){return e in ee?ee[e]:ee[e]="on"+e}function ea(e,t){if(e.da)e=!0;else{t=new q(t,this);var r=e.listener,n=e.ha||e.src;e.fa&&er(e),e=r.call(n,t)}return e}function ei(e){return(e=e[Z])instanceof Y?e:null}var es="__closure_events_fn_"+(1e9*Math.random()>>>0);function eo(e){return"function"==typeof e?e:(e[es]||(e[es]=function(t){return e.handleEvent(t)}),e[es])}function el(){z.call(this),this.i=new Y(this),this.M=this,this.F=null}function eu(e,t){var r,n=e.F;if(n)for(r=[];n;n=n.F)r.push(n);if(e=e.M,n=t.type||t,"string"==typeof t)t=new B(t,e);else if(t instanceof B)t.target=t.target||e;else{var a=t;P(t=new B(n,e),a)}if(a=!0,r)for(var i=r.length-1;0<=i;i--){var s=t.g=r[i];a=ec(s,n,!0,t)&&a}if(a=ec(s=t.g=e,n,!0,t)&&a,a=ec(s,n,!1,t)&&a,r)for(i=0;i<r.length;i++)a=ec(s=t.g=r[i],n,!1,t)&&a}function ec(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var s=t[i];if(s&&!s.da&&s.capture==r){var o=s.listener,l=s.ha||s.src;s.fa&&X(e.i,s),a=!1!==o.call(l,n)&&a}}return a&&!n.defaultPrevented}function ed(e,t,r){if("function"==typeof e)r&&(e=w(e,r));else if(e&&"function"==typeof e.handleEvent)e=w(e.handleEvent,e);else throw Error("Invalid listener argument");return 0x7fffffff<Number(t)?-1:g.setTimeout(e,t||0)}E(el,z),el.prototype[W]=!0,el.prototype.removeEventListener=function(e,t,r,n){!function e(t,r,n,a,i){if(Array.isArray(r))for(var s=0;s<r.length;s++)e(t,r[s],n,a,i);else(a=v(a)?!!a.capture:!!a,n=eo(n),t&&t[W])?(t=t.i,(r=String(r).toString())in t.g&&-1<(n=J(s=t.g[r],n,a,i))&&(Q(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[r],t.h--))):t&&(t=ei(t))&&(r=t.g[r.toString()],t=-1,r&&(t=J(r,n,a,i)),(n=-1<t?r[t]:null)&&er(n))}(this,e,t,r,n)},el.prototype.N=function(){if(el.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var r=t.g[e],n=0;n<r.length;n++)Q(r[n]);delete t.g[e],t.h--}}this.F=null},el.prototype.K=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},el.prototype.L=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};class eh extends z{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=ed(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let r=t.h;t.h=null,t.m.apply(null,r)}(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ef(e){z.call(this),this.h=e,this.g={}}E(ef,z);var ep=[];function em(e){D(e.g,function(e,t){this.g.hasOwnProperty(t)&&er(e)},e),e.g={}}ef.prototype.N=function(){ef.aa.N.call(this),em(this)},ef.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var eg=g.JSON.stringify,ey=g.JSON.parse,ev=class{stringify(e){return g.JSON.stringify(e,void 0)}parse(e){return g.JSON.parse(e,void 0)}};function eb(){}function ex(e){return e.h||(e.h=e.i())}function ew(){}eb.prototype.h=null;var ek={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eE(){B.call(this,"d")}function eS(){B.call(this,"c")}E(eE,B),E(eS,B);var eN={},e_=null;function eT(){return e_=e_||new el}function eI(e){B.call(this,eN.La,e)}function eC(e){let t=eT();eu(t,new eI(t))}function eD(e,t){B.call(this,eN.STAT_EVENT,e),this.stat=t}function eA(e){let t=eT();eu(t,new eD(t,e))}function ej(e,t){B.call(this,eN.Ma,e),this.size=t}function eP(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){e()},t)}function eO(){this.g=!0}function eR(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var r=JSON.parse(t);if(r){for(e=0;e<r.length;e++)if(Array.isArray(r[e])){var n=r[e];if(!(2>n.length)){var a=n[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var s=1;s<a.length;s++)a[s]=""}}}}return eg(r)}catch(e){return t}}(e,r)+(n?" "+n:"")})}eN.La="serverreachability",E(eI,B),eN.STAT_EVENT="statevent",E(eD,B),eN.Ma="timingevent",E(ej,B),eO.prototype.xa=function(){this.g=!1},eO.prototype.info=function(){};var eL={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eM={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function eU(){}function eF(e,t,r,n){this.j=e,this.i=t,this.l=r,this.R=n||1,this.U=new ef(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new eV}function eV(){this.i=null,this.g="",this.h=!1}E(eU,eb),eU.prototype.g=function(){return new XMLHttpRequest},eU.prototype.i=function(){return{}},t=new eU;var ez={},eB={};function eH(e,t,r){e.L=1,e.v=ta(e9(t)),e.m=r,e.P=!0,eq(e,null)}function eq(e,t){e.F=Date.now(),eW(e),e.A=e9(e.v);var r,n,a,i,s,o,l=e.A,u=e.R;Array.isArray(u)||(u=[String(u)]),ty(l.i,"t",u),e.C=0,l=e.j.J,e.h=new eV,e.g=t5(e.j,l?t:null,!e.m),0<e.O&&(e.M=new eh(w(e.Y,e,e.g),e.O)),t=e.U,l=e.g,u=e.ca;var c="readystatechange";Array.isArray(c)||(c&&(ep[0]=c.toString()),c=ep);for(var d=0;d<c.length;d++){var h=function e(t,r,n,a,i){if(a&&a.once)return function e(t,r,n,a,i){if(Array.isArray(r)){for(var s=0;s<r.length;s++)e(t,r[s],n,a,i);return null}return n=eo(n),t&&t[W]?t.L(r,n,v(a)?!!a.capture:!!a,i):et(t,r,n,!0,a,i)}(t,r,n,a,i);if(Array.isArray(r)){for(var s=0;s<r.length;s++)e(t,r[s],n,a,i);return null}return n=eo(n),t&&t[W]?t.K(r,n,v(a)?!!a.capture:!!a,i):et(t,r,n,!1,a,i)}(l,c[d],u||t.handleEvent,!1,t.h||t);if(!h)break;t.g[h.key]=h}t=e.H?A(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),eC(),r=e.i,n=e.u,a=e.A,i=e.l,s=e.R,o=e.m,r.info(function(){if(r.g)if(o)for(var e="",t=o.split("&"),l=0;l<t.length;l++){var u=t[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");e=2<=d.length&&"type"==d[1]?e+(c+"=")+u+"&":e+(c+"=redacted&")}}else e=null;else e=o;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+n+"\n"+a+"\n"+e})}function e$(e){return!!e.g&&"GET"==e.u&&2!=e.L&&e.j.Ca}function eW(e){e.S=Date.now()+e.I,eG(e,e.I)}function eG(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=eP(w(e.ba,e),t)}function eK(e){e.B&&(g.clearTimeout(e.B),e.B=null)}function eQ(e){0==e.j.G||e.J||tJ(e.j,e)}function eY(e){eK(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,em(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function eX(e,t){try{var r=e.j;if(0!=r.G&&(r.g==e||e2(r.h,e))){if(!e.K&&e2(r.h,e)&&3==r.G){try{var n=r.Da.g.parse(t)}catch(e){n=null}if(Array.isArray(n)&&3==n.length){var a=n;if(0==a[0]){e:if(!r.u){if(r.g)if(r.g.F+3e3<e.F)tX(r),tz(r);else break e;tK(r),eA(18)}}else r.za=a[1],0<r.za-r.T&&37500>a[2]&&r.F&&0==r.v&&!r.C&&(r.C=eP(w(r.Za,r),6e3));if(1>=e1(r.h)&&r.ca){try{r.ca()}catch(e){}r.ca=void 0}}else t0(r,11)}else if((e.K||r.g==e)&&tX(r),!_(t))for(a=r.Da.g.parse(t),t=0;t<a.length;t++){let o=a[t];if(r.T=o[0],o=o[1],2==r.G)if("c"==o[0]){r.K=o[1],r.ia=o[2];let t=o[3];null!=t&&(r.la=t,r.j.info("VER="+r.la));let a=o[4];null!=a&&(r.Aa=a,r.j.info("SVER="+r.Aa));let l=o[5];null!=l&&"number"==typeof l&&0<l&&(r.L=n=1.5*l,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=n.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(e5(i,i.h),i.h=null))}if(n.D){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.ya=e,tn(n.I,n.D,e))}}if(r.G=3,r.l&&r.l.ua(),r.ba&&(r.R=Date.now()-e.F,r.j.info("Handshake RTT: "+r.R+"ms")),(n=r).qa=t2(n,n.J?n.ia:null,n.W),e.K){e3(n.h,e);var s=n.L;s&&(e.I=s),e.B&&(eK(e),eW(e)),n.g=e}else tG(n);0<r.i.length&&tH(r)}else"stop"!=o[0]&&"close"!=o[0]||t0(r,7);else 3==r.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?t0(r,7):tV(r):"noop"!=o[0]&&r.l&&r.l.ta(o),r.v=0)}}eC(4)}catch(e){}}eF.prototype.ca=function(e){e=e.target;let t=this.M;t&&3==tL(e)?t.j():this.Y(e)},eF.prototype.Y=function(e){try{if(e==this.g)e:{let v=tL(this.g);var t=this.g.Ba();let b=this.g.Z();if(!(3>v)&&(3!=v||this.g&&(this.h.h||this.g.oa()||tM(this.g)))){this.J||4!=v||7==t||(8==t||0>=b?eC(3):eC(2)),eK(this);var r=this.g.Z();this.X=r;t:if(e$(this)){var n=tM(this.g);e="";var a=n.length,i=4==tL(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){eY(this),eQ(this);var s="";break t}this.h.i=new g.TextDecoder}for(t=0;t<a;t++)this.h.h=!0,e+=this.h.i.decode(n[t],{stream:!(i&&t==a-1)});n.length=0,this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.oa();if(this.o=200==r,o=this.i,l=this.u,u=this.A,c=this.l,d=this.R,h=r,o.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+d+"]: "+l+"\n"+u+"\n"+v+" "+h}),this.o){if(this.T&&!this.K){t:{if(this.g){var o,l,u,c,d,h,f,p=this.g;if((f=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(f)){var m=f;break t}}m=null}if(r=m)eR(this.i,this.l,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eX(this,r);else{this.o=!1,this.s=3,eA(12),eY(this),eQ(this);break e}}if(this.P){let e;for(r=!0;!this.J&&this.C<s.length;)if((e=function(e,t){var r=e.C,n=t.indexOf("\n",r);return -1==n?eB:isNaN(r=Number(t.substring(r,n)))?ez:(n+=1)+r>t.length?eB:(t=t.slice(n,n+r),e.C=n+r,t)}(this,s))==eB){4==v&&(this.s=4,eA(14),r=!1),eR(this.i,this.l,null,"[Incomplete Response]");break}else if(e==ez){this.s=4,eA(15),eR(this.i,this.l,s,"[Invalid Chunk]"),r=!1;break}else eR(this.i,this.l,e,null),eX(this,e);if(e$(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=v||0!=s.length||this.h.h||(this.s=1,eA(16),r=!1),this.o=this.o&&r,r){if(0<s.length&&!this.W){this.W=!0;var y=this.j;y.g==this&&y.ba&&!y.M&&(y.j.info("Great, no buffering proxy detected. Bytes received: "+s.length),tQ(y),y.M=!0,eA(11))}}else eR(this.i,this.l,s,"[Invalid Chunked Response]"),eY(this),eQ(this)}else eR(this.i,this.l,s,null),eX(this,s);4==v&&eY(this),this.o&&!this.J&&(4==v?tJ(this.j,this):(this.o=!1,eW(this)))}else(function(e){let t={};e=(e.g&&2<=tL(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(_(e[n]))continue;var r=function(e){var t=1;e=e.split(":");let r=[];for(;0<t&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}(e[n]);let a=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();let i=t[a]||[];t[a]=i,i.push(r)}var n=function(e){return e.join(", ")};for(let e in t)n.call(void 0,t[e],e,t)})(this.g),400==r&&0<s.indexOf("Unknown SID")?(this.s=3,eA(12)):(this.s=0,eA(13)),eY(this),eQ(this)}}}catch(e){}finally{}},eF.prototype.cancel=function(){this.J=!0,eY(this)},eF.prototype.ba=function(){var e,t;this.B=null;let r=Date.now();0<=r-this.S?(e=this.i,t=this.A,e.info(function(){return"TIMEOUT: "+t}),2!=this.L&&(eC(),eA(17)),eY(this),this.s=2,eQ(this)):eG(this,this.S-r)};var eJ=class{constructor(e,t){this.g=e,this.map=t}};function eZ(e){this.l=e||10,e=g.PerformanceNavigationTiming?0<(e=g.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e0(e){return!!e.h||!!e.g&&e.g.size>=e.j}function e1(e){return e.h?1:e.g?e.g.size:0}function e2(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function e5(e,t){e.g?e.g.add(t):e.h=t}function e3(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function e4(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let r of e.g.values())t=t.concat(r.D);return t}return S(e.i)}function e6(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(y(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var r=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(y(e)||"string"==typeof e){var t=[];e=e.length;for(var r=0;r<e;r++)t.push(r);return t}for(let n in t=[],r=0,e)t[r++]=n;return t}}}(e),n=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(y(e)){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t}for(n in t=[],r=0,e)t[r++]=e[n];return t}(e),a=n.length,i=0;i<a;i++)t.call(void 0,n[i],r&&r[i],e)}eZ.prototype.cancel=function(){if(this.i=e4(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var e8=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e7(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof e7){this.h=e.h,te(this,e.j),this.o=e.o,this.g=e.g,tt(this,e.s),this.l=e.l;var t=e.i,r=new tf;r.i=t.i,t.g&&(r.g=new Map(t.g),r.h=t.h),tr(this,r),this.m=e.m}else e&&(t=String(e).match(e8))?(this.h=!1,te(this,t[1]||"",!0),this.o=ti(t[2]||""),this.g=ti(t[3]||"",!0),tt(this,t[4]),this.l=ti(t[5]||"",!0),tr(this,t[6]||"",!0),this.m=ti(t[7]||"")):(this.h=!1,this.i=new tf(null,this.h))}function e9(e){return new e7(e)}function te(e,t,r){e.j=r?ti(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function tt(e,t){if(t){if(isNaN(t=Number(t))||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function tr(e,t,r){var n,a;t instanceof tf?(e.i=t,n=e.i,(a=e.h)&&!n.j&&(tp(n),n.i=null,n.g.forEach(function(e,t){var r=t.toLowerCase();t!=r&&(tm(this,t),ty(this,r,e))},n)),n.j=a):(r||(t=ts(t,td)),e.i=new tf(t,e.h))}function tn(e,t,r){e.i.set(t,r)}function ta(e){return tn(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function ti(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ts(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,to),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function to(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}e7.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ts(t,tl,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ts(t,tl,!0),"@"),e.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.s)&&e.push(":",String(r))),(r=this.l)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(ts(r,"/"==r.charAt(0)?tc:tu,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.m)&&e.push("#",ts(r,th)),e.join("")};var tl=/[#\/\?@]/g,tu=/[#\?:]/g,tc=/[#\?]/g,td=/[#\?@]/g,th=/#/g;function tf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function tp(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var r=0;r<e.length;r++){var n=e[r].indexOf("="),a=null;if(0<=n){var i=e[r].substring(0,n);a=e[r].substring(n+1)}else i=e[r];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function tm(e,t){tp(e),t=tv(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tg(e,t){return tp(e),t=tv(e,t),e.g.has(t)}function ty(e,t,r){tm(e,t),0<r.length&&(e.i=null,e.g.set(tv(e,t),S(r)),e.h+=r.length)}function tv(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function tb(e,t,r,n,a){try{a&&(a.onload=null,a.onerror=null,a.onabort=null,a.ontimeout=null),n(r)}catch(e){}}function tx(){this.g=new ev}function tw(e){this.l=e.Ub||null,this.j=e.eb||!1}function tk(e,t){el.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function tE(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function tS(e){e.readyState=4,e.l=null,e.j=null,e.v=null,tN(e)}function tN(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function t_(e){let t="";return D(e,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}function tT(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=t_(r),"string"==typeof e?null!=r&&encodeURIComponent(String(r)):tn(e,t,r))}function tI(e){el.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(r=tf.prototype).add=function(e,t){tp(this),this.i=null,e=tv(this,e);var r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},r.forEach=function(e,t){tp(this),this.g.forEach(function(r,n){r.forEach(function(r){e.call(t,r,n,this)},this)},this)},r.na=function(){tp(this);let e=Array.from(this.g.values()),t=Array.from(this.g.keys()),r=[];for(let n=0;n<t.length;n++){let a=e[n];for(let e=0;e<a.length;e++)r.push(t[n])}return r},r.V=function(e){tp(this);let t=[];if("string"==typeof e)tg(this,e)&&(t=t.concat(this.g.get(tv(this,e))));else{e=Array.from(this.g.values());for(let r=0;r<e.length;r++)t=t.concat(e[r])}return t},r.set=function(e,t){return tp(this),this.i=null,tg(this,e=tv(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(var r=0;r<t.length;r++){var n=t[r];let i=encodeURIComponent(String(n)),s=this.V(n);for(n=0;n<s.length;n++){var a=i;""!==s[n]&&(a+="="+encodeURIComponent(String(s[n]))),e.push(a)}}return this.i=e.join("&")},E(tw,eb),tw.prototype.g=function(){return new tk(this.l,this.j)},tw.prototype.i=(e={},function(){return e}),E(tk,el),(r=tk.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,tN(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||g).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tS(this)),this.readyState=0},r.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tN(this)),this.g&&(this.readyState=3,tN(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==g.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tE(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},r.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tS(this):tN(this),3==this.readyState&&tE(this)}},r.Ra=function(e){this.g&&(this.response=this.responseText=e,tS(this))},r.Qa=function(e){this.g&&(this.response=e,tS(this))},r.ga=function(){this.g&&tS(this)},r.setRequestHeader=function(e,t){this.u.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)e.push((r=r.value)[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(tk.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),E(tI,el);var tC=/^https?$/i,tD=["POST","PUT"];function tA(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,tj(e),tO(e)}function tj(e){e.A||(e.A=!0,eu(e,"complete"),eu(e,"error"))}function tP(e){if(e.h&&void 0!==m&&(!e.v[1]||4!=tL(e)||2!=e.Z())){if(e.u&&4==tL(e))ed(e.Ea,0,e);else if(eu(e,"readystatechange"),4==tL(e)){e.h=!1;try{let s=e.Z();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,r,n=!0;break;default:n=!1}if(!(t=n)){if(r=0===s){var a=String(e.D).match(e8)[1]||null;!a&&g.self&&g.self.location&&(a=g.self.location.protocol.slice(0,-1)),r=!tC.test(a?a.toLowerCase():"")}t=r}if(t)eu(e,"complete"),eu(e,"success");else{e.m=6;try{var i=2<tL(e)?e.g.statusText:""}catch(e){i=""}e.l=i+" ["+e.Z()+"]",tj(e)}}finally{tO(e)}}}}function tO(e,t){if(e.g){tR(e);let r=e.g,n=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||eu(e,"ready");try{r.onreadystatechange=n}catch(e){}}}function tR(e){e.I&&(g.clearTimeout(e.I),e.I=null)}function tL(e){return e.g?e.g.readyState:0}function tM(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tU(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function tF(e){this.Aa=0,this.i=[],this.j=new eO,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tU("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tU("baseRetryDelayMs",5e3,e),this.cb=tU("retryDelaySeedMs",1e4,e),this.Wa=tU("forwardChannelMaxRetries",2,e),this.wa=tU("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new eZ(e&&e.concurrentRequestLimit),this.Da=new tx,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function tV(e){if(tB(e),3==e.G){var t=e.U++,r=e9(e.I);if(tn(r,"SID",e.K),tn(r,"RID",t),tn(r,"TYPE","terminate"),t$(e,r),(t=new eF(e,e.j,t)).L=2,t.v=ta(e9(r)),r=!1,g.navigator&&g.navigator.sendBeacon)try{r=g.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!r&&g.Image&&((new Image).src=t.v,r=!0),r||(t.g=t5(t.j,null),t.g.ea(t.v)),t.F=Date.now(),eW(t)}t1(e)}function tz(e){e.g&&(tQ(e),e.g.cancel(),e.g=null)}function tB(e){tz(e),e.u&&(g.clearTimeout(e.u),e.u=null),tX(e),e.h.cancel(),e.s&&("number"==typeof e.s&&g.clearTimeout(e.s),e.s=null)}function tH(e){if(!e0(e.h)&&!e.s){e.s=!0;var t=e.Ga;L||F(),M||(L(),M=!0),U.add(t,e),e.B=0}}function tq(e,t){var r;r=t?t.l:e.U++;let n=e9(e.I);tn(n,"SID",e.K),tn(n,"RID",r),tn(n,"AID",e.T),t$(e,n),e.m&&e.o&&tT(n,e.m,e.o),r=new eF(e,e.j,r,e.B+1),null===e.m&&(r.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tW(e,r,1e3),r.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),e5(e.h,r),eH(r,n,t)}function t$(e,t){e.H&&D(e.H,function(e,r){tn(t,r,e)}),e.l&&e6({},function(e,r){tn(t,r,e)})}function tW(e,t,r){r=Math.min(e.i.length,r);var n=e.l?w(e.l.Na,e.l,e):null;e:{var a=e.i;let t=-1;for(;;){let e=["count="+r];-1==t?0<r?(t=a[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let s=0;s<r;s++){let r=a[s].g,o=a[s].map;if(0>(r-=t))t=Math.max(0,a[s].g-100),i=!1;else try{!function(e,t,r){let n=r||"";try{e6(e,function(e,r){let a=e;v(e)&&(a=eg(e)),t.push(n+r+"="+encodeURIComponent(a))})}catch(e){throw t.push(n+"type="+encodeURIComponent("_badmap")),e}}(o,e,"req"+r+"_")}catch(e){n&&n(o)}}if(i){n=e.join("&");break e}}}return t.D=e=e.i.splice(0,r),n}function tG(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;L||F(),M||(L(),M=!0),U.add(t,e),e.v=0}}function tK(e){return!e.g&&!e.u&&!(3<=e.v)&&(e.Y++,e.u=eP(w(e.Fa,e),tZ(e,e.v)),e.v++,!0)}function tQ(e){null!=e.A&&(g.clearTimeout(e.A),e.A=null)}function tY(e){e.g=new eF(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=e9(e.qa);tn(t,"RID","rpc"),tn(t,"SID",e.K),tn(t,"AID",e.T),tn(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&tn(t,"TO",e.ja),tn(t,"TYPE","xmlhttp"),t$(e,t),e.m&&e.o&&tT(t,e.m,e.o),e.L&&(e.g.I=e.L);var r=e.g;e=e.ia,r.L=1,r.v=ta(e9(t)),r.m=null,r.P=!0,eq(r,e)}function tX(e){null!=e.C&&(g.clearTimeout(e.C),e.C=null)}function tJ(e,t){var r,n=null;if(e.g==t){tX(e),tQ(e),e.g=null;var a=2}else{if(!e2(e.h,t))return;n=t.D,e3(e.h,t),a=1}if(0!=e.G){if(t.o)if(1==a){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;eu(a=eT(),new ej(a,n)),tH(e)}else tG(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==a&&(r=t,!(e1(e.h)>=e.h.j-!!e.s)&&(e.s?(e.i=r.D.concat(e.i),!0):1!=e.G&&2!=e.G&&!(e.B>=(e.Va?0:e.Wa))&&(e.s=eP(w(e.Ga,e,r),tZ(e,e.B)),e.B++,!0)))||2==a&&tK(e)))switch(n&&0<n.length&&((t=e.h).i=t.i.concat(n)),i){case 1:t0(e,5);break;case 4:t0(e,10);break;case 3:t0(e,6);break;default:t0(e,2)}}}function tZ(e,t){let r=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(r*=2),r*t}function t0(e,t){if(e.j.info("Error code "+t),2==t){var r=w(e.fb,e),n=e.Xa;let t=!n;n=new e7(n||"//www.google.com/images/cleardot.gif"),g.location&&"http"==g.location.protocol||te(n,"https"),ta(n),t?function(e,t){let r=new eO;if(g.Image){let n=new Image;n.onload=k(tb,r,"TestLoadImage: loaded",!0,t,n),n.onerror=k(tb,r,"TestLoadImage: error",!1,t,n),n.onabort=k(tb,r,"TestLoadImage: abort",!1,t,n),n.ontimeout=k(tb,r,"TestLoadImage: timeout",!1,t,n),g.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}(n.toString(),r):function(e,t){let r=new eO,n=new AbortController,a=setTimeout(()=>{n.abort(),tb(r,"TestPingServer: timeout",!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(a),e.ok?tb(r,"TestPingServer: ok",!0,t):tb(r,"TestPingServer: server error",!1,t)}).catch(()=>{clearTimeout(a),tb(r,"TestPingServer: error",!1,t)})}(n.toString(),r)}else eA(2);e.G=0,e.l&&e.l.sa(t),t1(e),tB(e)}function t1(e){if(e.G=0,e.ka=[],e.l){let t=e4(e.h);(0!=t.length||0!=e.i.length)&&(N(e.ka,t),N(e.ka,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.ra()}}function t2(e,t,r){var n=r instanceof e7?e9(r):new e7(r);if(""!=n.g)t&&(n.g=t+"."+n.g),tt(n,n.s);else{var a=g.location;n=a.protocol,t=t?t+"."+a.hostname:a.hostname,a=+a.port;var i=new e7(null);n&&te(i,n),t&&(i.g=t),a&&tt(i,a),r&&(i.l=r),n=i}return r=e.D,t=e.ya,r&&t&&tn(n,r,t),tn(n,"VER",e.la),t$(e,n),n}function t5(e,t,r){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tI(e.Ca&&!e.pa?new tw({eb:r}):e.pa)).Ha(e.J),t}function t3(){}function t4(){}function t6(e,t){el.call(this),this.g=new tF(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!_(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new t9(this)}function t8(e){eE.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t7(){eS.call(this),this.status=1}function t9(e){this.g=e}(r=tI.prototype).Ha=function(e){this.J=e},r.ea=function(e,r,n,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);r=r?r.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():t.g(),this.v=this.o?ex(this.o):ex(t),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(r,String(e),!0),this.B=!1}catch(e){tA(this,e);return}if(e=n||"",n=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var i in a)n.set(i,a[i]);else if("function"==typeof a.keys&&"function"==typeof a.get)for(let e of a.keys())n.set(e,a.get(e));else throw Error("Unknown input type for opt_headers: "+String(a));for(let[t,s]of(a=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=g.FormData&&e instanceof g.FormData,!(0<=Array.prototype.indexOf.call(tD,r,void 0))||a||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n))this.g.setRequestHeader(t,s);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tR(this),this.u=!0,this.g.send(e),this.u=!1}catch(e){tA(this,e)}},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,eu(this,"complete"),eu(this,"abort"),tO(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tO(this,!0)),tI.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?tP(this):this.bb())},r.bb=function(){tP(this)},r.isActive=function(){return!!this.g},r.Z=function(){try{return 2<tL(this)?this.g.status:-1}catch(e){return -1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ey(t)}},r.Ba=function(){return this.m},r.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(r=tF.prototype).la=8,r.G=1,r.connect=function(e,t,r,n){eA(0),this.W=e,this.H=t||{},r&&void 0!==n&&(this.H.OSID=r,this.H.OAID=n),this.F=this.X,this.I=t2(this,null,this.W),tH(this)},r.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;let a=new eF(this,this.j,e),i=this.o;if(this.S&&(i?P(i=A(i),this.S):i=this.S),null!==this.m||this.O||(a.H=i,i=null),this.P)e:{for(var t=0,r=0;r<this.i.length;r++){t:{var n=this.i[r];if("__data__"in n.map&&"string"==typeof(n=n.map.__data__)){n=n.length;break t}n=void 0}if(void 0===n)break;if(4096<(t+=n)){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=tW(this,a,t),tn(r=e9(this.I),"RID",e),tn(r,"CVER",22),this.D&&tn(r,"X-HTTP-Session-Id",this.D),t$(this,r),i&&(this.O?t="headers="+encodeURIComponent(String(t_(i)))+"&"+t:this.m&&tT(r,this.m,i)),e5(this.h,a),this.Ua&&tn(r,"TYPE","init"),this.P?(tn(r,"$req",t),tn(r,"SID","null"),a.T=!0,eH(a,r,null)):eH(a,r,t),this.G=2}}else 3==this.G&&(e?tq(this,e):0==this.i.length||e0(this.h)||tq(this))},r.Fa=function(){if(this.u=null,tY(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=eP(w(this.ab,this),e)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,eA(10),tz(this),tY(this))},r.Za=function(){null!=this.C&&(this.C=null,tz(this),tK(this),eA(19))},r.fb=function(e){e?(this.j.info("Successfully pinged google.com"),eA(2)):(this.j.info("Failed to ping google.com"),eA(1))},r.isActive=function(){return!!this.l&&this.l.isActive(this)},(r=t3.prototype).ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){},t4.prototype.g=function(e,t){return new t6(e,t)},E(t6,el),t6.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},t6.prototype.close=function(){tV(this.g)},t6.prototype.o=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.u&&((r={}).__data__=eg(e),e=r);t.i.push(new eJ(t.Ya++,e)),3==t.G&&tH(t)},t6.prototype.N=function(){this.g.l=null,delete this.j,tV(this.g),delete this.g,t6.aa.N.call(this)},E(t8,eE),E(t7,eS),E(t9,t3),t9.prototype.ua=function(){eu(this.g,"a")},t9.prototype.ta=function(e){eu(this.g,new t8(e))},t9.prototype.sa=function(e){eu(this.g,new t7)},t9.prototype.ra=function(){eu(this.g,"b")},t4.prototype.createWebChannel=t4.prototype.g,t6.prototype.send=t6.prototype.o,t6.prototype.open=t6.prototype.m,t6.prototype.close=t6.prototype.close,c=h.createWebChannelTransport=function(){return new t4},u=h.getStatEventTarget=function(){return eT()},l=h.Event=eN,o=h.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},eL.NO_ERROR=0,eL.TIMEOUT=8,eL.HTTP_ERROR=6,s=h.ErrorCode=eL,eM.COMPLETE="complete",i=h.EventType=eM,ew.EventType=ek,ek.OPEN="a",ek.CLOSE="b",ek.ERROR="c",ek.MESSAGE="d",el.prototype.listen=el.prototype.K,a=h.WebChannel=ew,h.FetchXmlHttpFactory=tw,tI.prototype.listenOnce=tI.prototype.L,tI.prototype.getLastError=tI.prototype.Ka,tI.prototype.getLastErrorCode=tI.prototype.Ba,tI.prototype.getStatus=tI.prototype.Z,tI.prototype.getResponseJson=tI.prototype.Oa,tI.prototype.getResponseText=tI.prototype.oa,tI.prototype.send=tI.prototype.ea,tI.prototype.setWithCredentials=tI.prototype.Ha,n=h.XhrIo=tI}).apply(void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}),k("6ZWSX",function(t,r){e(t.exports,"Buffer",()=>n,e=>n=e),e(t.exports,"INSPECT_MAX_BYTES",()=>a,e=>a=e);var n,a,i=w("kuxul"),s=w("9NvM5");let o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function l(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e){var n=e,a=t;if(("string"!=typeof a||""===a)&&(a="utf8"),!u.isEncoding(a))throw TypeError("Unknown encoding: "+a);let r=0|g(n,a),i=l(r),s=i.write(n,a);return s!==r&&(i=i.slice(0,s)),i}if(ArrayBuffer.isView(e)){var i=e;if(V(i,Uint8Array)){let e=new Uint8Array(i);return p(e.buffer,e.byteOffset,e.byteLength)}return f(i)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return u.from(s,t,r);let o=function(e){if(u.isBuffer(e)){let t=0|m(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?l(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return d(e),l(e<0?0:0|m(e))}function f(e){let t=e.length<0?0:0|m(e.length),r=l(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),u.prototype),n}function m(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function g(e,t){if(u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let a=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(a)return n?-1:M(e).length;t=(""+t).toLowerCase(),a=!0}}function y(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let a="";for(let n=t;n<r;++n)a+=z[e[n]];return a}(this,t,r);case"utf8":case"utf-8":return k(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}(this,t,r);case"base64":var a,s,o;return a=this,s=t,o=r,0===s&&o===a.length?i.fromByteArray(a):i.fromByteArray(a.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),a="";for(let e=0;e<n.length-1;e+=2)a+=String.fromCharCode(n[e]+256*n[e+1]);return a}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,a){var i;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(i=r*=1)!=i&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(a)return -1;else r=e.length-1;else if(r<0)if(!a)return -1;else r=0;if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:x(e,t,r,n,a);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(a)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return x(e,[t],r,n,a)}throw TypeError("val must be string, number or Buffer")}function x(e,t,r,n,a){let i,s=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,o/=2,l/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(a){let n=-1;for(i=r;i<o;i++)if(u(e,i)===u(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===l)return n*s}else -1!==n&&(i-=i-n),n=-1}else for(r+l>o&&(r=o-l),i=r;i>=0;i--){let r=!0;for(let n=0;n<l;n++)if(u(e,i+n)!==u(t,n)){r=!1;break}if(r)return i}return -1}function k(e,t,r){r=Math.min(e.length,r);let n=[],a=t;for(;a<r;){let t=e[a],i=null,s=t>239?4:t>223?3:t>191?2:1;if(a+s<=r){let r,n,o,l;switch(s){case 1:t<128&&(i=t);break;case 2:(192&(r=e[a+1]))==128&&(l=(31&t)<<6|63&r)>127&&(i=l);break;case 3:r=e[a+1],n=e[a+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:r=e[a+1],n=e[a+2],o=e[a+3],(192&r)==128&&(192&n)==128&&(192&o)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&o)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),a+=s}var i=n;let s=i.length;if(s<=4096)return String.fromCharCode.apply(String,i);let o="",l=0;for(;l<s;)o+=String.fromCharCode.apply(String,i.slice(l,l+=4096));return o}function E(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function S(e,t,r,n,a,i){if(!u.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function N(e,t,r,n,a){P(t,n,a,e,r,7);let i=Number(t&BigInt(0xffffffff));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function _(e,t,r,n,a){P(t,n,a,e,r,7);let i=Number(t&BigInt(0xffffffff));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let s=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function T(e,t,r,n,a,i){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function I(e,t,r,n,a){return t*=1,r>>>=0,a||T(e,t,r,4,34028234663852886e22,-34028234663852886e22),s.write(e,t,r,n,23,4),r+4}function C(e,t,r,n,a){return t*=1,r>>>=0,a||T(e,t,r,8,17976931348623157e292,-17976931348623157e292),s.write(e,t,r,n,52,8),r+8}n=u,a=50,u.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(e,t,r){return(d(e),e<=0)?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(V(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let a=0,i=Math.min(r,n);a<i;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:+(n<r)},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=u.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){let t=e[r];if(V(t,Uint8Array))a+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,a)):Uint8Array.prototype.set.call(n,t,a);else if(u.isBuffer(t))t.copy(n,a);else throw TypeError('"list" argument must be an Array of Buffers');a+=t.length}return n},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},u.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},u.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},u.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?k(this,0,e):y.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let e="",t=a;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,a){if(V(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;let i=a-n,s=r-t,o=Math.min(i,s),l=this.slice(n,a),c=e.slice(t,r);for(let e=0;e<o;++e)if(l[e]!==c[e]){i=l[e],s=c[e];break}return i<s?-1:+(s<i)},u.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){var a,i,s,o,l,u,c,d;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let f=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let a;r=Number(r)||0;let i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;let s=t.length;for(n>s/2&&(n=s/2),a=0;a<n;++a){var o;let n=parseInt(t.substr(2*a,2),16);if((o=n)!=o)break;e[r+a]=n}return a}(this,e,t,r);case"utf8":case"utf-8":return a=t,i=r,F(M(e,this.length-a),this,a,i);case"ascii":case"latin1":case"binary":return s=t,o=r,F(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,s,o);case"base64":return l=t,u=r,F(U(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,d=r,F(function(e,t){let r,n,a=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,a.push(r%256),a.push(n);return a}(e,this.length-c),this,c,d);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e],a=1,i=0;for(;++i<t&&(a*=256);)n+=this[e+i]*a;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e+--t],a=1;for(;t>0&&(a*=256);)n+=this[e+--t]*a;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||E(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||E(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=B(function(e){O(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],a=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(a)<<BigInt(32))}),u.prototype.readBigUInt64BE=B(function(e){O(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],a=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(a)}),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=this[e],a=1,i=0;for(;++i<t&&(a*=256);)n+=this[e+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||E(e,t,this.length);let n=t,a=1,i=this[e+--n];for(;n>0&&(a*=256);)i+=this[e+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return(e>>>=0,t||E(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||E(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||E(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=B(function(e){O(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),u.prototype.readBigInt64BE=B(function(e){O(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||E(e,4,this.length),s.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||E(e,4,this.length),s.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||E(e,8,this.length),s.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||E(e,8,this.length),s.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;S(this,e,t,r,n,0)}let a=1,i=0;for(this[t]=255&e;++i<r&&(a*=256);)this[t+i]=e/a&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;S(this,e,t,r,n,0)}let a=r-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=B(function(e,t=0){return N(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=B(function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);S(this,e,t,r,n-1,-n)}let a=0,i=1,s=0;for(this[t]=255&e;++a<r&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i|0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);S(this,e,t,r,n-1,-n)}let a=r-1,i=1,s=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i|0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||S(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=B(function(e,t=0){return N(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=B(function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(e,t,r){return I(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return I(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let a=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),a},u.prototype.fill=function(e,t,r,n){let a;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{let i=u.isBuffer(e)?e:u.from(e,n),s=i.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=i[a%s]}return this};let D={};function A(e,t,r){D[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function P(e,t,r,n,a,i){if(e>r||e<t){let n,a="bigint"==typeof t?"n":"";throw n=i>3?0===t||t===BigInt(0)?`>= 0${a} and < 2${a} ** ${(i+1)*8}${a}`:`>= -(2${a} ** ${(i+1)*8-1}${a}) and < 2 ** ${(i+1)*8-1}${a}`:`>= ${t}${a} and <= ${r}${a}`,new D.ERR_OUT_OF_RANGE("value",n,e)}O(a,"offset"),(void 0===n[a]||void 0===n[a+i])&&R(a,n.length-(i+1))}function O(e,t){if("number"!=typeof e)throw new D.ERR_INVALID_ARG_TYPE(t,"number",e)}function R(e,t,r){if(Math.floor(e)!==e)throw O(e,r),new D.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new D.ERR_BUFFER_OUT_OF_BOUNDS;throw new D.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}A("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),A("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),A("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,a=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?a=j(String(r)):"bigint"==typeof r&&(a=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(a=j(a)),a+="n"),n+=` It must be ${t}. Received ${a}`},RangeError);let L=/[^+/0-9A-Za-z-_]/g;function M(e,t){let r;t=t||1/0;let n=e.length,a=null,i=[];for(let s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!a){if(r>56319||s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),a=r;continue}r=(a-55296<<10|r-56320)+65536}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return i}function U(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,n){let a;for(a=0;a<n&&!(a+r>=t.length)&&!(a>=e.length);++a)t[a+r]=e[a];return a}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let z=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let a=0;a<16;++a)t[n+a]=e[r]+e[a]}return t}();function B(e){return"undefined"==typeof BigInt?H:e}function H(){throw Error("BigInt not supported")}}),k("kuxul",function(t,r){e(t.exports,"toByteArray",()=>n,e=>n=e),e(t.exports,"fromByteArray",()=>a,e=>a=e);for(var n=function(e){var t,r,n=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}(e),a=n[0],i=n[1],l=new o((a+i)*3/4-i),u=0,c=i>0?a-4:a;for(r=0;r<c;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===i&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===i&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},a=function(e){for(var t,r=e.length,n=r%3,a=[],s=0,o=r-n;s<o;s+=16383)a.push(function(e,t,r){for(var n,a=[],s=t;s<r;s+=3)n=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(i[n>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return a.join("")}(e,s,s+16383>o?o:s+16383));return 1===n?a.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&a.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),a.join("")},i=[],s=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,c=l.length;u<c;++u)i[u]=l[u],s[l.charCodeAt(u)]=u;s[45]=62,s[95]=63}),k("9NvM5",function(t,r){var n,a;e(t.exports,"read",()=>n,e=>n=e),e(t.exports,"write",()=>a,e=>a=e),n=function(e,t,r,n,a){var i,s,o=8*a-n-1,l=(1<<o)-1,u=l>>1,c=-7,d=r?a-1:0,h=r?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-c)-1,f>>=-c,c+=o;c>0;i=256*i+e[t+d],d+=h,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=n;c>0;s=256*s+e[t+d],d+=h,c-=8);if(0===i)i=1-u;else{if(i===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),i-=u}return(f?-1:1)*s*Math.pow(2,i-n)},a=function(e,t,r,n,a,i){var s,o,l,u=8*i-a-1,c=(1<<u)-1,d=c>>1,h=5960464477539062e-23*(23===a),f=n?0:i-1,p=n?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=c?(o=0,s=c):s+d>=1?(o=(t*l-1)*Math.pow(2,a),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,a),s=0));a>=8;e[r+f]=255&o,f+=p,o/=256,a-=8);for(s=s<<a|o,u+=a;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*m}}),k("e0EYX",function(t,r){e(t.exports,"auth",()=>c),e(t.exports,"db",()=>d),e(t.exports,"storage",()=>h),w("fhN3L");var n=w("7xvHX");w("6AR8M");var a=w("2EDex");w("ilpIi");var i=w("9HrqM");w("fCOdq");var s=w("jceyq");w("7FrCY");var o=w("17EBg");w("2hm3L");var l=w("dP6Kv");let u=(0,n.initializeApp)({apiKey:"AIzaSyC5T9aUFtlxx7gcB_r8bXNAU-s1wMAKiy4",authDomain:"kasascore.firebaseapp.com",projectId:"kasascore",storageBucket:"kasascore.firebasestorage.app",messagingSenderId:"222718949539",appId:"1:222718949539:web:edc155634e990cbb2d6716",measurementId:"G-YL3R4E4VGK"});(0,o.getAnalytics)(u);let c=(0,a.o)(u),d=(0,i.getFirestore)(u),h=(0,s.getStorage)(u);(0,l.getFunctions)(u)}),k("fhN3L",function(t,r){e(t.exports,"initializeApp",()=>w("7xvHX").initializeApp),e(t.exports,"registerVersion",()=>w("7xvHX").registerVersion),(0,w("7xvHX").registerVersion)("firebase","10.14.1","app")}),k("6AR8M",function(t,r){e(t.exports,"createUserWithEmailAndPassword",()=>w("2EDex").aa),e(t.exports,"EmailAuthProvider",()=>w("2EDex").V),e(t.exports,"FacebookAuthProvider",()=>w("2EDex").W),e(t.exports,"fetchSignInMethodsForEmail",()=>w("2EDex").af),e(t.exports,"getAuth",()=>w("2EDex").o),e(t.exports,"GithubAuthProvider",()=>w("2EDex").Y),e(t.exports,"GoogleAuthProvider",()=>w("2EDex").X),e(t.exports,"OAuthProvider",()=>w("2EDex").Z),e(t.exports,"onAuthStateChanged",()=>w("2EDex").y),e(t.exports,"onIdTokenChanged",()=>w("2EDex").w),e(t.exports,"reauthenticateWithCredential",()=>w("2EDex").a3),e(t.exports,"sendEmailVerification",()=>w("2EDex").ag),e(t.exports,"sendPasswordResetEmail",()=>w("2EDex").a5),e(t.exports,"sendSignInLinkToEmail",()=>w("2EDex").ac),e(t.exports,"signInWithEmailAndPassword",()=>w("2EDex").ab),e(t.exports,"signInWithEmailLink",()=>w("2EDex").ae),e(t.exports,"signInWithPopup",()=>w("2EDex").c),e(t.exports,"signOut",()=>w("2EDex").C),e(t.exports,"TwitterAuthProvider",()=>w("2EDex").$),e(t.exports,"updateEmail",()=>w("2EDex").al),e(t.exports,"updatePassword",()=>w("2EDex").am),e(t.exports,"updateProfile",()=>w("2EDex").ak),e(t.exports,"verifyBeforeUpdateEmail",()=>w("2EDex").ah),w("adBXR")}),k("adBXR",function(t,r){e(t.exports,"EmailAuthProvider",()=>w("2EDex").V),e(t.exports,"FacebookAuthProvider",()=>w("2EDex").W),e(t.exports,"GithubAuthProvider",()=>w("2EDex").Y),e(t.exports,"GoogleAuthProvider",()=>w("2EDex").X),e(t.exports,"OAuthProvider",()=>w("2EDex").Z),e(t.exports,"TwitterAuthProvider",()=>w("2EDex").$),e(t.exports,"createUserWithEmailAndPassword",()=>w("2EDex").aa),e(t.exports,"fetchSignInMethodsForEmail",()=>w("2EDex").af),e(t.exports,"getAuth",()=>w("2EDex").o),e(t.exports,"onAuthStateChanged",()=>w("2EDex").y),e(t.exports,"onIdTokenChanged",()=>w("2EDex").w),e(t.exports,"reauthenticateWithCredential",()=>w("2EDex").a3),e(t.exports,"sendEmailVerification",()=>w("2EDex").ag),e(t.exports,"sendPasswordResetEmail",()=>w("2EDex").a5),e(t.exports,"sendSignInLinkToEmail",()=>w("2EDex").ac),e(t.exports,"signInWithEmailAndPassword",()=>w("2EDex").ab),e(t.exports,"signInWithEmailLink",()=>w("2EDex").ae),e(t.exports,"signInWithPopup",()=>w("2EDex").c),e(t.exports,"signOut",()=>w("2EDex").C),e(t.exports,"updateEmail",()=>w("2EDex").al),e(t.exports,"updatePassword",()=>w("2EDex").am),e(t.exports,"updateProfile",()=>w("2EDex").ak),e(t.exports,"verifyBeforeUpdateEmail",()=>w("2EDex").ah),w("2EDex"),w("7xvHX"),w("gMVVg"),w("5Z2ef"),w("eryG9")}),k("2EDex",function(t,r){e(t.exports,"V",()=>eZ),e(t.exports,"Z",()=>e2),e(t.exports,"W",()=>e5),e(t.exports,"X",()=>e3),e(t.exports,"Y",()=>e4),e(t.exports,"$",()=>e6),e(t.exports,"a3",()=>ts),e(t.exports,"a5",()=>tu),e(t.exports,"aa",()=>tc),e(t.exports,"ab",()=>td),e(t.exports,"ac",()=>th),e(t.exports,"ae",()=>tf),e(t.exports,"af",()=>tm),e(t.exports,"ag",()=>tg),e(t.exports,"ah",()=>ty),e(t.exports,"ak",()=>tb),e(t.exports,"al",()=>tx),e(t.exports,"am",()=>tw),e(t.exports,"w",()=>tE),e(t.exports,"y",()=>tS),e(t.exports,"C",()=>tN),e(t.exports,"c",()=>t1),e(t.exports,"o",()=>rE);var n,a=w("7xvHX"),i=w("gMVVg"),s=w("5Z2ef"),o=w("7WQrb"),l=w("eryG9");function u(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let c=new(0,i.ErrorFactory)("auth","Firebase",u()),d=new(0,s.Logger)("@firebase/auth");function h(e,...t){d.logLevel<=s.LogLevel.ERROR&&d.error(`Auth (${a.SDK_VERSION}): ${e}`,...t)}function f(e,...t){throw y(e,...t)}function p(e,...t){return y(e,...t)}function m(e,t,r){let n=Object.assign(Object.assign({},u()),{[t]:r});return new(0,i.ErrorFactory)("auth","Firebase",n).create(t,{appName:e.name})}function g(e){return m(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y(e,...t){if("string"!=typeof e){let r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return c.create(e,...t)}function v(e,t,...r){if(!e)throw y(t,...r)}function b(e){let t="INTERNAL ASSERTION FAILED: "+e;throw h(t),Error(t)}function x(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.href)||""}function k(){return"http:"===E()||"https:"===E()}function E(){var e;return"undefined"!=typeof self&&(null==(e=self.location)?void 0:e.protocol)||null}class S{constructor(e,t){var r;this.shortDelay=e,this.longDelay=t,r="Short delay should be less than long delay!",t>e||b(r),this.isMobile=(0,i.isMobileCordova)()||(0,i.isReactNative)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(k()||(0,i.isBrowserExtension)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function N(e,t){var r,n;r=e.emulator,n="Emulator should always be set here",r||b(n);let{url:a}=e.emulator;return t?`${a}${t.startsWith("/")?t.slice(1):t}`:a}class _{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}let T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},I=new S(3e4,6e4);function C(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function D(e,t,r,n,a={}){return A(e,a,async()=>{let a={},s={};n&&("GET"===t?s=n:a={body:JSON.stringify(n)});let o=(0,i.querystring)(Object.assign({key:e.config.apiKey},s)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);let u=Object.assign({method:t,headers:l},a);return(0,i.isCloudflareWorker)()||(u.referrerPolicy="no-referrer"),_.fetch()(P(e,e.config.apiHost,r,o),u)})}async function A(e,t,r){e._canInitEmulator=!1;let n=Object.assign(Object.assign({},T),t);try{let t=new O(e),a=await Promise.race([r(),t.promise]);t.clearNetworkTimeout();let i=await a.json();if("needConfirmation"in i)throw R(e,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{let[t,r]=(a.ok?i.errorMessage:i.error.message).split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===t)throw R(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===t)throw R(e,"email-already-in-use",i);if("USER_DISABLED"===t)throw R(e,"user-disabled",i);let s=n[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(r)throw m(e,s,r);f(e,s)}}catch(t){if(t instanceof i.FirebaseError)throw t;f(e,"network-request-failed",{message:String(t)})}}async function j(e,t,r,n,a={}){let i=await D(e,t,r,n,a);return"mfaPendingCredential"in i&&f(e,"multi-factor-auth-required",{_serverResponse:i}),i}function P(e,t,r,n){let a=`${t}${r}?${n}`;return e.config.emulator?N(e.config,a):`${e.config.apiScheme}://${a}`}class O{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(p(this.auth,"network-request-failed")),I.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function R(e,t,r){let n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);let a=p(e,t,n);return a.customData._tokenResponse=r,a}function L(e){return void 0!==e&&void 0!==e.enterprise}class M{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)switch(t.enforcementState){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function U(e,t){return D(e,"GET","/v2/recaptchaConfig",C(e,t))}async function F(e,t){return D(e,"POST","/v1/accounts:delete",t)}async function V(e,t){return D(e,"POST","/v1/accounts:lookup",t)}function z(e){if(e)try{let t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}async function B(e,t=!1){let r=(0,i.getModularInstance)(e),n=await r.getIdToken(t),a=q(n);v(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");let s="object"==typeof a.firebase?a.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:z(H(a.auth_time)),issuedAtTime:z(H(a.iat)),expirationTime:z(H(a.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}function H(e){return 1e3*Number(e)}function q(e){let[t,r,n]=e.split(".");if(void 0===t||void 0===r||void 0===n)return h("JWT malformed, contained fewer than 3 sections"),null;try{let e=(0,i.base64Decode)(r);if(!e)return h("Failed to decode base64 JWT payload"),null;return JSON.parse(e)}catch(e){return h("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}function $(e){let t=q(e);return v(t,"internal-error"),v(void 0!==t.exp,"internal-error"),v(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function W(e,t,r=!1){if(r)return t;try{return await t}catch(t){throw t instanceof i.FirebaseError&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class G{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(!e)return this.errorBackoff=3e4,Math.max(0,(null!=(t=this.user.stsTokenManager.expirationTime)?t:0)-Date.now()-3e5);{let e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(null==e?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class K{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=z(this.lastLoginAt),this.creationTime=z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Q(e){var t,r,n;let a=e.auth,i=await e.getIdToken(),s=await W(e,V(a,{idToken:i}));v(null==s?void 0:s.users.length,a,"internal-error");let o=s.users[0];e._notifyReloadListener(o);let l=(null==(t=o.providerUserInfo)?void 0:t.length)?X(o.providerUserInfo):[],u=(r=e.providerData,n=l,[...r.filter(e=>!n.some(t=>t.providerId===e.providerId)),...n]),c=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null==u?void 0:u.length);Object.assign(e,{uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new K(o.createdAt,o.lastLoginAt),isAnonymous:!!c&&d})}async function Y(e){let t=(0,i.getModularInstance)(e);await Q(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function X(e){return e.map(e=>{var{providerId:t}=e,r=(0,o.__rest)(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function J(e,t){let r=await A(e,{},async()=>{let r=(0,i.querystring)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:n,apiKey:a}=e.config,s=P(e,n,"/v1/token",`key=${a}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",_.fetch()(s,{method:"POST",headers:o,body:r})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function Z(e,t){return D(e,"POST","/v2/accounts:revokeToken",C(e,t))}class ee{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){v(e.idToken,"internal-error"),v(void 0!==e.idToken,"internal-error"),v(void 0!==e.refreshToken,"internal-error");let t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){v(0!==e.length,"internal-error");let t=$(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(v(this.refreshToken,e,"user-token-expired"),this.refreshToken)?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:n,expiresIn:a}=await J(e,t);this.updateTokensAndExpiration(r,n,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){let{refreshToken:r,accessToken:n,expirationTime:a}=t,i=new ee;return r&&(v("string"==typeof r,"internal-error",{appName:e}),i.refreshToken=r),n&&(v("string"==typeof n,"internal-error",{appName:e}),i.accessToken=n),a&&(v("number"==typeof a,"internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ee,this.toJSON())}_performRefresh(){return b("not implemented")}}function et(e,t){v("string"==typeof e||void 0===e,"internal-error",{appName:t})}class er{constructor(e){var{uid:t,auth:r,stsTokenManager:n}=e,a=(0,o.__rest)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new K(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){let t=await W(this,this.stsTokenManager.getToken(this.auth,e));return v(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return B(this,e)}reload(){return Y(this)}_assign(e){this!==e&&(v(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){v(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Q(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,a._isFirebaseServerApp)(this.auth.app))return Promise.reject(g(this.auth));let e=await this.getIdToken();return await W(this,F(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,n,a,i,s,o,l,u;let c=null!=(r=t.displayName)?r:void 0,d=null!=(n=t.email)?n:void 0,h=null!=(a=t.phoneNumber)?a:void 0,f=null!=(i=t.photoURL)?i:void 0,p=null!=(s=t.tenantId)?s:void 0,m=null!=(o=t._redirectEventId)?o:void 0,g=null!=(l=t.createdAt)?l:void 0,y=null!=(u=t.lastLoginAt)?u:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:k,stsTokenManager:E}=t;v(b&&E,e,"internal-error");let S=ee.fromJSON(this.name,E);v("string"==typeof b,e,"internal-error"),et(c,e.name),et(d,e.name),v("boolean"==typeof x,e,"internal-error"),v("boolean"==typeof w,e,"internal-error"),et(h,e.name),et(f,e.name),et(p,e.name),et(m,e.name),et(g,e.name),et(y,e.name);let N=new er({uid:b,auth:e,email:d,emailVerified:x,displayName:c,isAnonymous:w,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return k&&Array.isArray(k)&&(N.providerData=k.map(e=>Object.assign({},e))),m&&(N._redirectEventId=m),N}static async _fromIdTokenResponse(e,t,r=!1){let n=new ee;n.updateFromServerResponse(t);let a=new er({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:r});return await Q(a),a}static async _fromGetAccountInfoResponse(e,t,r){let n=t.users[0];v(void 0!==n.localId,"internal-error");let a=void 0!==n.providerUserInfo?X(n.providerUserInfo):[],i=!(n.email&&n.passwordHash)&&!(null==a?void 0:a.length),s=new ee;s.updateFromIdToken(r);let o=new er({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return Object.assign(o,{uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:a,metadata:new K(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(null==a?void 0:a.length)}),o}}let en=new Map;function ea(e){var t,r;t="Expected a class definition",e instanceof Function||b(t);let n=en.get(e);return n?(r="Instance stored in cache mismatched with class",n instanceof e||b(r)):(n=new e,en.set(e,n)),n}class ei{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){let t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}function es(e,t,r){return`firebase:${e}:${t}:${r}`}ei.type="NONE";class eo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:n,name:a}=this.auth;this.fullUserKey=es(this.userKey,n.apiKey,a),this.fullPersistenceKey=es("persistence",n.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);return e?er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new eo(ea(ei),e,r);let n=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e),a=n[0]||ea(ei),i=es(r,e.config.apiKey,e.name),s=null;for(let r of t)try{let t=await r._get(i);if(t){let n=er._fromJSON(e,t);r!==a&&(s=n),a=r;break}}catch(e){}let o=n.filter(e=>e._shouldAllowMigration);return a._shouldAllowMigration&&o.length&&(a=o[0],s&&await a._set(i,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==a)try{await e._remove(i)}catch(e){}}))),new eo(a,e,r)}}function el(e){let t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";{if(eh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(eu(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ep(t))return"Blackberry";if(em(t))return"Webos";if(ec(t))return"Safari";if((t.includes("chrome/")||ed(t))&&!t.includes("edge/"))return"Chrome";if(ef(t))return"Android";let r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==r?void 0:r.length)===2)return r[1]}return"Other"}function eu(e=(0,i.getUA)()){return/firefox\//i.test(e)}function ec(e=(0,i.getUA)()){let t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ed(e=(0,i.getUA)()){return/crios\//i.test(e)}function eh(e=(0,i.getUA)()){return/iemobile/i.test(e)}function ef(e=(0,i.getUA)()){return/android/i.test(e)}function ep(e=(0,i.getUA)()){return/blackberry/i.test(e)}function em(e=(0,i.getUA)()){return/webos/i.test(e)}function eg(e=(0,i.getUA)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ey(e=(0,i.getUA)()){return eg(e)||ef(e)||em(e)||ep(e)||/windows phone/i.test(e)||eh(e)}function ev(e,t=[]){let r;switch(e){case"Browser":r=el((0,i.getUA)());break;case"Worker":r=`${el((0,i.getUA)())}-${e}`;break;default:r=e}let n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${a.SDK_VERSION}/${n}`}class eb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=t=>new Promise((r,n)=>{try{let n=e(t);r(n)}catch(e){n(e)}});r.onAbort=t,this.queue.push(r);let n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(e){for(let e of(t.reverse(),t))try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}async function ex(e,t={}){return D(e,"GET","/v2/passwordPolicy",C(e,t))}class ew{constructor(e){var t,r,n,a;let i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!=(t=i.minPasswordLength)?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!=(n=null==(r=e.allowedNonAlphanumericCharacters)?void 0:r.join(""))?n:"",this.forceUpgradeOnSignin=null!=(a=e.forceUpgradeOnSignin)&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,n,a,i,s;let o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null==(t=o.meetsMinPasswordLength)||t),o.isValid&&(o.isValid=null==(r=o.meetsMaxPasswordLength)||r),o.isValid&&(o.isValid=null==(n=o.containsLowercaseLetter)||n),o.isValid&&(o.isValid=null==(a=o.containsUppercaseLetter)||a),o.isValid&&(o.isValid=null==(i=o.containsNumericCharacter)||i),o.isValid&&(o.isValid=null==(s=o.containsNonAlphanumericCharacter)||s),o}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let n=0;n<e.length;n++)r=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,n,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class ek{constructor(e,t,r,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eS(this),this.idTokenSubscription=new eS(this),this.beforeStateQueue=new eb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ea(t)),this._initializationPromise=this.queue(async()=>{var r,n;if(!this._deleted){if(this.persistenceManager=await eo.create(this,e),!this._deleted){if(null==(r=this._popupRedirectResolver)?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null==(n=this.currentUser)?void 0:n.uid)||null,this._deleted||(this._isInitialized=!0)}}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(this.currentUser||e){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await V(this,{idToken:e}),r=await er._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,a._isFirebaseServerApp)(this.app)){let e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),n=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let r=null==(t=this.redirectUser)?void 0:t._redirectEventId,a=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);(!r||r===a)&&(null==s?void 0:s.user)&&(n=s.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(e){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return(v(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId)?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Q(e)}catch(e){if((null==e?void 0:e.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,a._isFirebaseServerApp)(this.app))return Promise.reject(g(this));let t=e?(0,i.getModularInstance)(e):null;return t&&v(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&v(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,a._isFirebaseServerApp)(this.app)?Promise.reject(g(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,a._isFirebaseServerApp)(this.app)?Promise.reject(g(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ea(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=new ew(await ex(this));null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new(0,i.ErrorFactory)("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await Z(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null==(e=this._currentUser)?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ea(e)||this._popupRedirectResolver;v(t,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return(this._isInitialized&&await this.queue(async()=>{}),(null==(t=this._currentUser)?void 0:t._redirectEventId)===e)?this._currentUser:(null==(r=this.redirectUser)?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=null!=(t=null==(e=this.currentUser)?void 0:e.uid)?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,n){if(this._deleted)return()=>{};let a="function"==typeof t?t:t.next.bind(t),i=!1,s=this._isInitialized?Promise.resolve():this._initializationPromise;if(v(s,this,"internal-error"),s.then(()=>{i||a(this.currentUser)}),"function"==typeof t){let a=e.addObserver(t,r,n);return()=>{i=!0,a()}}{let r=e.addObserver(t);return()=>{i=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return v(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ev(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await (null==(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;let t=await (null==(e=this.appCheckServiceProvider.getImmediate({optional:!0}))?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){d.logLevel<=s.LogLevel.WARN&&d.warn(`Auth (${a.SDK_VERSION}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function eE(e){return(0,i.getModularInstance)(e)}class eS{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.createSubscribe)(e=>this.observer=e)}get next(){return v(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let eN={async loadJS(){throw Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function e_(e){return`__${e}${Math.floor(1e6*Math.random())}`}class eT{constructor(e){this.type="recaptcha-enterprise",this.auth=eE(e)}async verify(e="verify",t=!1){async function r(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,r)=>{U(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(n=>{if(void 0===n.recaptchaKey)r(Error("recaptcha Enterprise site key undefined"));else{let r=new M(n);return null==e.tenantId?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,t(r.siteKey)}}).catch(e=>{r(e)})})}function n(t,r,n){let a=window.grecaptcha;L(a)?a.enterprise.ready(()=>{a.enterprise.execute(t,{action:e}).then(e=>{r(e)}).catch(()=>{r("NO_RECAPTCHA")})}):n(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,a)=>{r(this.auth).then(r=>{if(!t&&L(window.grecaptcha))n(r,e,a);else{var i;if("undefined"==typeof window)return void a(Error("RecaptchaVerifier is only supported in browser"));let t=eN.recaptchaEnterpriseScript;0!==t.length&&(t+=r),(i=t,eN.loadJS(i)).then(()=>{n(r,e,a)}).catch(e=>{a(e)})}}).catch(e=>{a(e)})})}}async function eI(e,t,r,n=!1){let a,i=new eT(e);try{a=await i.verify(r)}catch(e){a=await i.verify(r,!0)}let s=Object.assign({},t);return n?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function eC(e,t,r,n){var a;if(null==(a=e._getRecaptchaConfig())||!a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER"))return n(e,t).catch(async a=>{if("auth/missing-recaptcha-token"!==a.code)return Promise.reject(a);{console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=await eI(e,t,r,"getOobCode"===r);return n(e,a)}});{let a=await eI(e,t,r,"getOobCode"===r);return n(e,a)}}function eD(e){let t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eA(e){if(!e)return null;let t=Number(e);return isNaN(t)?null:t}class ej{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function eP(e,t){return D(e,"POST","/v1/accounts:update",t)}async function eO(e,t){return D(e,"POST","/v1/accounts:signUp",t)}async function eR(e,t){return j(e,"POST","/v1/accounts:signInWithPassword",C(e,t))}async function eL(e,t){return D(e,"POST","/v1/accounts:sendOobCode",C(e,t))}async function eM(e,t){return eL(e,t)}async function eU(e,t){return eL(e,t)}async function eF(e,t){return eL(e,t)}async function eV(e,t){return eL(e,t)}async function ez(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}async function eB(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",C(e,t))}class eH extends ej{constructor(e,t,r,n=null){super("password",r),this._email=e,this._password=t,this._tenantId=n}static _fromEmailAndPassword(e,t){return new eH(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new eH(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);else if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return eC(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",eR);case"emailLink":return ez(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return eC(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eO);case"emailLink":return eB(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function eq(e,t){return j(e,"POST","/v1/accounts:signInWithIdp",C(e,t))}class e$ extends ej{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new e$(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:n}=t,a=(0,o.__rest)(t,["providerId","signInMethod"]);if(!r||!n)return null;let i=new e$(r,n);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){return eq(e,this.buildRequest())}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,eq(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,eq(e,t)}buildRequest(){let e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.querystring)(t)}return e}}async function eW(e,t){return D(e,"POST","/v1/accounts:sendVerificationCode",C(e,t))}async function eG(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t))}async function eK(e,t){let r=await j(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,t));if(r.temporaryProof)throw R(e,"account-exists-with-different-credential",r);return r}let eQ={USER_NOT_FOUND:"user-not-found"};async function eY(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",C(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),eQ)}class eX extends ej{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eX({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eX({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return eG(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return eK(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return eY(e,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:n}}toJSON(){let e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));let{verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:a}=e;return r||t||n||a?new eX({verificationId:t,verificationCode:r,phoneNumber:n,temporaryProof:a}):null}}class eJ{constructor(e){var t,r,n,a,s,o;let l=(0,i.querystringDecode)((0,i.extractQuerystring)(e)),u=null!=(t=l.apiKey)?t:null,c=null!=(r=l.oobCode)?r:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!=(n=l.mode)?n:null);v(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=null!=(a=l.continueUrl)?a:null,this.languageCode=null!=(s=l.languageCode)?s:null,this.tenantId=null!=(o=l.tenantId)?o:null}static parseLink(e){let t=function(e){let t=(0,i.querystringDecode)((0,i.extractQuerystring)(e)).link,r=t?(0,i.querystringDecode)((0,i.extractQuerystring)(t)).deep_link_id:null,n=(0,i.querystringDecode)((0,i.extractQuerystring)(e)).deep_link_id;return(n?(0,i.querystringDecode)((0,i.extractQuerystring)(n)).link:null)||n||r||t||e}(e);try{return new eJ(t)}catch(e){return null}}}class eZ{constructor(){this.providerId=eZ.PROVIDER_ID}static credential(e,t){return eH._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){let r=eJ.parseLink(t);return v(r,"argument-error"),eH._fromEmailAndCode(e,r.code,r.tenantId)}}eZ.PROVIDER_ID="password",eZ.EMAIL_PASSWORD_SIGN_IN_METHOD="password",eZ.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class e0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class e1 extends e0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class e2 extends e1{static credentialFromJSON(e){let t="string"==typeof e?JSON.parse(e):e;return v("providerId"in t&&"signInMethod"in t,"argument-error"),e$._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return v(e.idToken||e.accessToken,"argument-error"),e$._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return e2.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return e2.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:n,pendingToken:a,nonce:i,providerId:s}=e;if(!r&&!n&&!t&&!a||!s)return null;try{return new e2(s)._credential({idToken:t,accessToken:r,nonce:i,pendingToken:a})}catch(e){return null}}}class e5 extends e1{constructor(){super("facebook.com")}static credential(e){return e$._fromParams({providerId:e5.PROVIDER_ID,signInMethod:e5.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return e5.credentialFromTaggedObject(e)}static credentialFromError(e){return e5.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return e5.credential(e.oauthAccessToken)}catch(e){return null}}}e5.FACEBOOK_SIGN_IN_METHOD="facebook.com",e5.PROVIDER_ID="facebook.com";class e3 extends e1{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return e$._fromParams({providerId:e3.PROVIDER_ID,signInMethod:e3.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return e3.credentialFromTaggedObject(e)}static credentialFromError(e){return e3.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return e3.credential(t,r)}catch(e){return null}}}e3.GOOGLE_SIGN_IN_METHOD="google.com",e3.PROVIDER_ID="google.com";class e4 extends e1{constructor(){super("github.com")}static credential(e){return e$._fromParams({providerId:e4.PROVIDER_ID,signInMethod:e4.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return e4.credentialFromTaggedObject(e)}static credentialFromError(e){return e4.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return e4.credential(e.oauthAccessToken)}catch(e){return null}}}e4.GITHUB_SIGN_IN_METHOD="github.com",e4.PROVIDER_ID="github.com";class e6 extends e1{constructor(){super("twitter.com")}static credential(e,t){return e$._fromParams({providerId:e6.PROVIDER_ID,signInMethod:e6.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return e6.credentialFromTaggedObject(e)}static credentialFromError(e){return e6.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return e6.credential(t,r)}catch(e){return null}}}async function e8(e,t){return j(e,"POST","/v1/accounts:signUp",C(e,t))}e6.TWITTER_SIGN_IN_METHOD="twitter.com",e6.PROVIDER_ID="twitter.com";class e7{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,n=!1){return new e7({user:await er._fromIdTokenResponse(e,r,n),providerId:e9(r),_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){return await e._updateTokensIfNecessary(r,!0),new e7({user:e,providerId:e9(r),_tokenResponse:r,operationType:t})}}function e9(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class te extends i.FirebaseError{constructor(e,t,r,n){var a;super(t.code,t.message),this.operationType=r,this.user=n,Object.setPrototypeOf(this,te.prototype),this.customData={appName:e.name,tenantId:null!=(a=e.tenantId)?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,n){return new te(e,t,r,n)}}function tt(e,t,r,n){return("reauthenticate"===t?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(r=>{if("auth/multi-factor-auth-required"===r.code)throw te._fromErrorAndOperation(e,r,t,n);throw r})}async function tr(e,t,r=!1){let n=await W(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return e7._forOperation(e,"link",n)}async function tn(e,t,r=!1){let{auth:n}=e;if((0,a._isFirebaseServerApp)(n.app))return Promise.reject(g(n));let i="reauthenticate";try{let a=await W(e,tt(n,i,t,e),r);v(a.idToken,n,"internal-error");let s=q(a.idToken);v(s,n,"internal-error");let{sub:o}=s;return v(e.uid===o,n,"user-mismatch"),e7._forOperation(e,i,a)}catch(e){throw(null==e?void 0:e.code)==="auth/user-not-found"&&f(n,"user-mismatch"),e}}async function ta(e,t,r=!1){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(g(e));let n="signIn",i=await tt(e,n,t),s=await e7._fromIdTokenResponse(e,n,i);return r||await e._updateCurrentUser(s.user),s}async function ti(e,t){return ta(eE(e),t)}async function ts(e,t){return tn((0,i.getModularInstance)(e),t)}function to(e,t,r){var n;v((null==(n=r.url)?void 0:n.length)>0,e,"invalid-continue-uri"),v(void 0===r.dynamicLinkDomain||r.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=r.url,t.dynamicLinkDomain=r.dynamicLinkDomain,t.canHandleCodeInApp=r.handleCodeInApp,r.iOS&&(v(r.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=r.iOS.bundleId),r.android&&(v(r.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=r.android.installApp,t.androidMinimumVersionCode=r.android.minimumVersion,t.androidPackageName=r.android.packageName)}async function tl(e){let t=eE(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function tu(e,t,r){let n=eE(e),a={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};r&&to(n,a,r),await eC(n,a,"getOobCode",eU)}async function tc(e,t,r){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(g(e));let n=eE(e),i=eC(n,{returnSecureToken:!0,email:t,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",e8),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tl(e),t}),o=await e7._fromIdTokenResponse(n,"signIn",s);return await n._updateCurrentUser(o.user),o}function td(e,t,r){return(0,a._isFirebaseServerApp)(e.app)?Promise.reject(g(e)):ti((0,i.getModularInstance)(e),eZ.credential(t,r)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&tl(e),t})}async function th(e,t,r){let n=eE(e),a={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};v(r.handleCodeInApp,n,"argument-error"),r&&to(n,a,r),await eC(n,a,"getOobCode",eF)}async function tf(e,t,r){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(g(e));let n=(0,i.getModularInstance)(e),s=eZ.credentialWithLink(t,r||x());return v(s._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),ti(n,s)}async function tp(e,t){return D(e,"POST","/v1/accounts:createAuthUri",C(e,t))}async function tm(e,t){let r=k()?x():"http://localhost",{signinMethods:n}=await tp((0,i.getModularInstance)(e),{identifier:t,continueUri:r});return n||[]}async function tg(e,t){let r=(0,i.getModularInstance)(e),n={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&to(r.auth,n,t);let{email:a}=await eM(r.auth,n);a!==e.email&&await e.reload()}async function ty(e,t,r){let n=(0,i.getModularInstance)(e),a={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};r&&to(n.auth,a,r);let{email:s}=await eV(n.auth,a);s!==e.email&&await e.reload()}async function tv(e,t){return D(e,"POST","/v1/accounts:update",t)}async function tb(e,{displayName:t,photoURL:r}){if(void 0===t&&void 0===r)return;let n=(0,i.getModularInstance)(e),a=await n.getIdToken(),s=await W(n,tv(n.auth,{idToken:a,displayName:t,photoUrl:r,returnSecureToken:!0}));n.displayName=s.displayName||null,n.photoURL=s.photoUrl||null;let o=n.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(s)}function tx(e,t){let r=(0,i.getModularInstance)(e);return(0,a._isFirebaseServerApp)(r.auth.app)?Promise.reject(g(r.auth)):tk(r,t,null)}function tw(e,t){return tk((0,i.getModularInstance)(e),null,t)}async function tk(e,t,r){let{auth:n}=e,a={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(a.email=t),r&&(a.password=r);let i=await W(e,eP(n,a));await e._updateTokensIfNecessary(i,!0)}function tE(e,t,r,n){return(0,i.getModularInstance)(e).onIdTokenChanged(t,r,n)}function tS(e,t,r,n){return(0,i.getModularInstance)(e).onAuthStateChanged(t,r,n)}function tN(e){return(0,i.getModularInstance)(e).signOut()}new WeakMap;let t_="__sak";class tT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(t_,"1"),this.storage.removeItem(t_),Promise.resolve(!0)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class tI extends tT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ey(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let t of Object.keys(this.listeners)){let r=this.storage.getItem(t),n=this.localCache[t];r!==n&&e(t,n,r)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,r)=>{this.notifyListeners(e,r)});let r=e.key;t?this.detachListener():this.stopPolling();let n=()=>{let e=this.storage.getItem(r);(t||this.localCache[r]!==e)&&this.notifyListeners(r,e)},a=this.storage.getItem(r);(0,i.isIE)()&&10===document.documentMode&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,10):n()}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){let t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}tI.type="LOCAL";class tC extends tT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tC.type="SESSION";class tD{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;let r=new tD(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){let{eventId:t,eventType:r,data:n}=e.data,a=this.handlersMap[r];if(!(null==a?void 0:a.size))return;e.ports[0].postMessage({status:"ack",eventId:t,eventType:r});let i=Array.from(a).map(async t=>t(e.origin,n)),s=await Promise.all(i.map(async e=>{try{let t=await e;return{fulfilled:!0,value:t}}catch(e){return{fulfilled:!1,reason:e}}}));e.ports[0].postMessage({status:"done",eventId:t,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function tA(e="",t=10){let r="";for(let e=0;e<t;e++)r+=Math.floor(10*Math.random());return e+r}tD.receivers=[];class tj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let n,a,i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw Error("connection_unavailable");return new Promise((s,o)=>{let l=tA("",20);i.port1.start();let u=setTimeout(()=>{o(Error("unsupported_event"))},r);a={messageChannel:i,onMessage(e){if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(u),n=setTimeout(()=>{o(Error("timeout"))},3e3);break;case"done":clearTimeout(n),s(e.data.response);break;default:clearTimeout(u),clearTimeout(n),o(Error("invalid_response"))}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function tP(){return window}function tO(){return void 0!==tP().WorkerGlobalScope&&"function"==typeof tP().importScripts}async function tR(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}let tL="firebaseLocalStorageDb",tM="firebaseLocalStorage",tU="fbase_key";class tF{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tV(e,t){return e.transaction([tM],t?"readwrite":"readonly").objectStore(tM)}function tz(){let e=indexedDB.open(tL,1);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{let t=e.result;try{t.createObjectStore(tM,{keyPath:tU})}catch(e){r(e)}}),e.addEventListener("success",async()=>{let r=e.result;r.objectStoreNames.contains(tM)?t(r):(r.close(),await new tF(indexedDB.deleteDatabase(tL)).toPromise(),t(await tz()))})})}async function tB(e,t,r){return new tF(tV(e,!0).put({[tU]:t,value:r})).toPromise()}async function tH(e,t){let r=tV(e,!1).get(t),n=await new tF(r).toPromise();return void 0===n?null:n.value}function tq(e,t){return new tF(tV(e,!0).delete(t)).toPromise()}class t${constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await tz()),this.db}async _withRetries(e){let t=0;for(;;)try{let t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tO()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tD._getInstance(tO()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await tR(),!this.activeServiceWorker)return;this.sender=new tj(this.activeServiceWorker);let r=await this.sender._send("ping",{},800);r&&(null==(e=r[0])?void 0:e.fulfilled)&&(null==(t=r[0])?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null==(t=null==navigator?void 0:navigator.serviceWorker)?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;let e=await tz();return await tB(e,t_,"1"),await tq(e,t_),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tB(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){let t=await this._withRetries(t=>tH(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>tq(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){let e=await this._withRetries(e=>new tF(tV(e,!1).getAll()).toPromise());if(!e||0!==this.pendingWrites)return[];let t=[],r=new Set;if(0!==e.length)for(let{fbase_key:n,value:a}of e)r.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(a)&&(this.notifyListeners(n,a),t.push(n));for(let e of Object.keys(this.localCache))this.localCache[e]&&!r.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;let r=this.listeners[e];if(r)for(let e of Array.from(r))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}async function tW(e,t,r){var n,a,i;let s=await r.verify();try{let o;if(v("string"==typeof s,e,"argument-error"),v("recaptcha"===r.type,e,"argument-error"),o="string"==typeof t?{phoneNumber:t}:t,"session"in o){let t=o.session;if("phoneNumber"in o)return v("enroll"===t.type,e,"internal-error"),(await (a={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:s}},D(e,"POST","/v2/accounts/mfaEnrollment:start",C(e,a)))).phoneSessionInfo.sessionInfo;{v("signin"===t.type,e,"internal-error");let r=(null==(n=o.multiFactorHint)?void 0:n.uid)||o.multiFactorUid;return v(r,e,"missing-multi-factor-info"),(await (i={mfaPendingCredential:t.credential,mfaEnrollmentId:r,phoneSignInInfo:{recaptchaToken:s}},D(e,"POST","/v2/accounts/mfaSignIn:start",C(e,i)))).phoneResponseInfo.sessionInfo}}{let{sessionInfo:t}=await eW(e,{phoneNumber:o.phoneNumber,recaptchaToken:s});return t}}finally{r._reset()}}t$.type="LOCAL",e_("rcb"),new S(3e4,6e4);class tG{constructor(e){this.providerId=tG.PROVIDER_ID,this.auth=eE(e)}verifyPhoneNumber(e,t){return tW(this.auth,e,(0,i.getModularInstance)(t))}static credential(e,t){return eX._fromVerification(e,t)}static credentialFromResult(e){return tG.credentialFromTaggedObject(e)}static credentialFromError(e){return tG.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{phoneNumber:t,temporaryProof:r}=e;return t&&r?eX._fromTokenResponse(t,r):null}}function tK(e,t){return t?ea(t):(v(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}tG.PROVIDER_ID="phone",tG.PHONE_SIGN_IN_METHOD="phone";class tQ extends ej{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return eq(e,this._buildIdpRequest())}_linkToIdToken(e,t){return eq(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return eq(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function tY(e){return ta(e.auth,new tQ(e),e.bypassAuthState)}function tX(e){let{auth:t,user:r}=e;return v(r,t,"internal-error"),tn(r,new tQ(e),e.bypassAuthState)}async function tJ(e){let{auth:t,user:r}=e;return v(r,t,"internal-error"),tr(r,new tQ(e),e.bypassAuthState)}class tZ{constructor(e,t,r,n,a=!1){this.auth=e,this.resolver=r,this.user=n,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:n,tenantId:a,error:i,type:s}=e;if(i)return void this.reject(i);let o={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tY;case"linkViaPopup":case"linkViaRedirect":return tJ;case"reauthViaPopup":case"reauthViaRedirect":return tX;default:f(this.auth,"internal-error")}}resolve(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||b(r),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){var t,r;t=this.pendingPromise,r="Pending promise was never set",t||b(r),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}let t0=new S(2e3,1e4);async function t1(e,t,r){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(p(e,"operation-not-supported-in-this-environment"));let n=eE(e);if(!(t instanceof e0))throw e0.name!==t.constructor.name&&f(e,"argument-error"),m(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`);let i=tK(n,r);return new t2(n,"signInViaPopup",t,i).executeNotNull()}class t2 extends tZ{constructor(e,t,r,n,a){super(e,t,n,a),this.provider=r,this.authWindow=null,this.pollId=null,t2.currentPopupAction&&t2.currentPopupAction.cancel(),t2.currentPopupAction=this}async executeNotNull(){let e=await this.execute();return v(e,this.auth,"internal-error"),e}async onExecution(){var e,t;e=1===this.filter.length,t="Popup operations only handle one event",e||b(t);let r=tA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],r),this.authWindow.associatedEvent=r,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(p(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null==(e=this.authWindow)?void 0:e.associatedEvent)||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t2.currentPopupAction=null}pollUserCancellation(){let e=()=>{var t,r;if(null==(r=null==(t=this.authWindow)?void 0:t.window)?void 0:r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t0.get())};e()}}t2.currentPopupAction=null;let t5=new Map;class t3 extends tZ{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=t5.get(this.auth._key());if(!e){try{let t=await t4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}t5.set(this.auth._key(),e)}return this.bypassAuthState||t5.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"===e.type)return void this.resolve(null);if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t4(e,t){var r;let n=es("pendingRedirect",(r=t).config.apiKey,r.name),a=ea(e._redirectPersistence);if(!await a._isAvailable())return!1;let i=await a._get(n)==="true";return await a._remove(n),i}function t6(e,t){t5.set(e._key(),t)}async function t8(e,t,r=!1){if((0,a._isFirebaseServerApp)(e.app))return Promise.reject(g(e));let n=eE(e),i=tK(n,t),s=new t3(n,i,r),o=await s.execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}class t7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return re(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!re(e)){let n=(null==(r=e.error.code)?void 0:r.split("auth/")[1])||"internal-error";t.onError(p(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(t9(e))}saveEventToCache(e){this.cachedEventUids.add(t9(e)),this.lastProcessedEventTime=Date.now()}}function t9(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function re({type:e,error:t}){return"unknown"===e&&(null==t?void 0:t.code)==="auth/no-auth-event"}async function rt(e,t={}){return D(e,"GET","/v1/projects",t)}let rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rn=/^https?/;async function ra(e){if(e.config.emulator)return;let{authorizedDomains:t}=await rt(e);for(let e of t)try{if(function(e){let t=x(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){let a=new URL(e);return""===a.hostname&&""===n?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===n}if(!rn.test(r))return!1;if(rr.test(e))return n===e;let a=e.replace(/\./g,"\\.");return RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}(e))return}catch(e){}f(e,"unauthorized-domain")}let ri=new S(3e4,6e4);function rs(){let e=tP().___jsl;if(null==e?void 0:e.H){for(let t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}}let ro=null,rl=new S(5e3,15e3),ru={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function rd(e){let t=await (ro=ro||new Promise((t,r)=>{var n,a,i,s;function o(){rs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rs(),r(p(e,"network-request-failed"))},timeout:ri.get()})}if(null==(a=null==(n=tP().gapi)?void 0:n.iframes)?void 0:a.Iframe)t(gapi.iframes.getContext());else if(null==(i=tP().gapi)?void 0:i.load)o();else{let t=e_("iframefcb");return tP()[t]=()=>{gapi.load?o():r(p(e,"network-request-failed"))},(s=`${eN.gapiScript}?onload=${t}`,eN.loadJS(s)).catch(e=>r(e))}}).catch(e=>{throw ro=null,e})),r=tP().gapi;return v(r,e,"internal-error"),t.open({where:document.body,url:function(e){let t=e.config;v(t.authDomain,e,"auth-domain-config-required");let r=t.emulator?N(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,n={apiKey:t.apiKey,appName:e.name,v:a.SDK_VERSION},s=rc.get(e.config.apiHost);s&&(n.eid=s);let o=e._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${(0,i.querystring)(n).slice(1)}`}(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ru,dontclear:!0},t=>new Promise(async(r,n)=>{await t.restyle({setHideOnLeave:!1});let a=p(e,"network-request-failed"),i=tP().setTimeout(()=>{n(a)},rl.get());function s(){tP().clearTimeout(i),r(t)}t.ping(s).then(s,()=>{n(a)})}))}let rh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}let rp=encodeURIComponent("fac");async function rm(e,t,r,n,s,o){v(e.config.authDomain,e,"auth-domain-config-required"),v(e.config.apiKey,e,"invalid-api-key");let l={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:a.SDK_VERSION,eventId:s};if(t instanceof e0)for(let[r,n]of(t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.isEmpty)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters())),Object.entries(o||{})))l[r]=n;if(t instanceof e1){let e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}for(let t of(e.tenantId&&(l.tid=e.tenantId),Object.keys(l)))void 0===l[t]&&delete l[t];let u=await e._getAppCheckToken(),c=u?`#${rp}=${encodeURIComponent(u)}`:"";return`${function({config:e}){return e.emulator?N(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.querystring)(l).slice(1)}${c}`}let rg="webStorageSupport",ry=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tC,this._completeRedirectFn=t8,this._overrideRedirectResult=t6}async _openPopup(e,t,r,n){var a,s,o;s=null==(a=this.eventManagers[e._key()])?void 0:a.manager,o="_initialize() not called before _openPopup()",s||b(o);let l=await rm(e,t,r,x(),n);return function(e,t,r,n=500,a=600){let s=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString(),l="",u=Object.assign(Object.assign({},rh),{width:n.toString(),height:a.toString(),top:s,left:o}),c=(0,i.getUA)().toLowerCase();r&&(l=ed(c)?"_blank":r),eu(c)&&(t=t||"http://localhost",u.scrollbars="yes");let d=Object.entries(u).reduce((e,[t,r])=>`${e}${t}=${r},`,"");if(function(e=(0,i.getUA)()){var t;return eg(e)&&!!(null==(t=window.navigator)?void 0:t.standalone)}(c)&&"_self"!==l)return function(e,t){let r=document.createElement("a");r.href=e,r.target=t;let n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}(t||"",l),new rf(null);let h=window.open(t||"",l,d);v(h,e,"popup-blocked");try{h.focus()}catch(e){}return new rf(h)}(e,l,tA())}async _openRedirect(e,t,r,n){var a;return await this._originValidation(e),a=await rm(e,t,r,x(),n),tP().location.href=a,new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){var r;let{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(r="If manager is not set, promise should be",n||b(r),n)}let n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){let t=await rd(e),r=new t7(e);return t.register("authEvent",t=>(v(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rg,{type:rg},r=>{var n;let a=null==(n=null==r?void 0:r[0])?void 0:n[rg];void 0!==a&&t(!!a),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ra(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ey()||ec()||eg()}};var rv="@firebase/auth",rb="1.7.9";class rx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null==(e=this.auth.currentUser)?void 0:e.uid)||null}async getToken(e){return(this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser)?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){v(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}let rw=(0,i.getExperimentalSetting)("authIdTokenMaxAge")||300,rk=null;function rE(e=(0,a.getApp)()){let t=(0,a._getProvider)(e,"auth");if(t.isInitialized())return t.getImmediate();let r=function(e,t){let r=(0,a._getProvider)(e,"auth");if(r.isInitialized()){let e=r.getImmediate(),n=r.getOptions();if((0,i.deepEqual)(n,null!=t?t:{}))return e;f(e,"already-initialized")}return r.initialize({options:t})}(e,{popupRedirectResolver:ry,persistence:[t$,tI,tC]}),n=(0,i.getExperimentalSetting)("authTokenSyncURL");if(n&&"boolean"==typeof isSecureContext&&isSecureContext){let e=new URL(n,location.origin);if(location.origin===e.origin){let t,n=(t=e.toString(),async e=>{let r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>rw)return;let a=null==r?void 0:r.token;rk!==a&&(rk=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))});(0,i.getModularInstance)(r).beforeAuthStateChanged(n,()=>n(r.currentUser)),tE(r,e=>n(e))}}let s=(0,i.getDefaultEmulatorHost)("auth");return s&&function(e,t,r){let n=eE(e);v(n._canInitEmulator,n,"emulator-config-failed"),v(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");let a=eD(t),{host:i,port:s}=function(e){let t=eD(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};let n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){let e=a[1];return{host:e,port:eA(n.substr(e.length+1))}}{let[e,t]=n.split(":");return{host:e,port:eA(t)}}}(t),o=null===s?"":`:${s}`;n.config.emulator={url:`${a}//${i}${o}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:i,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:!1})}),function(){function e(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}(r,`http://${s}`),r}eN={loadJS:e=>new Promise((t,r)=>{var n,a;let i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{let t=p("internal-error");t.customData=e,r(t)},i.type="text/javascript",i.charset="UTF-8",(null!=(a=null==(n=document.getElementsByTagName("head"))?void 0:n[0])?a:document).appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},n="Browser",(0,a._registerComponent)(new(0,l.Component)("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;v(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let l=new ek(r,a,i,{apiKey:s,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ev(n)}),u=(null==t?void 0:t.persistence)||[],c=(Array.isArray(u)?u:[u]).map(ea);return(null==t?void 0:t.errorMap)&&l._updateErrorMap(t.errorMap),l._initializeWithPersistence(c,null==t?void 0:t.popupRedirectResolver),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),(0,a._registerComponent)(new(0,l.Component)("auth-internal",e=>new rx(eE(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,a.registerVersion)(rv,rb,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),(0,a.registerVersion)(rv,rb,"esm2017")}),k("7WQrb",function(t,r){function n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}e(t.exports,"__rest",()=>n),"function"==typeof SuppressedError&&SuppressedError}),k("fCOdq",function(t,r){e(t.exports,"getDownloadURL",()=>w("jceyq").getDownloadURL),e(t.exports,"getStorage",()=>w("jceyq").getStorage),e(t.exports,"ref",()=>w("jceyq").ref),e(t.exports,"uploadBytes",()=>w("jceyq").uploadBytes),w("jceyq")}),k("jceyq",function(t,r){e(t.exports,"uploadBytes",()=>ea),e(t.exports,"getDownloadURL",()=>ei),e(t.exports,"ref",()=>es),e(t.exports,"getStorage",()=>eo);var n,a,i,s,o=w("7xvHX"),l=w("gMVVg"),u=w("eryG9");let c="firebasestorage.googleapis.com",d="storageBucket";class h extends l.FirebaseError{constructor(e,t,r=0){super(f(e),`Firebase Storage: ${t} (${f(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,h.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function f(e){return"storage/"+e}function p(){return new h(i.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function m(e){return new h(i.INVALID_ARGUMENT,e)}function g(){return new h(i.APP_DELETED,"The Firebase app was deleted.")}function y(e,t){return new h(i.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function v(e){throw new h(i.INTERNAL_ERROR,"Internal error: "+e)}(n=i||(i={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment";class b{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=b.makeFromUrl(e,t)}catch(t){return new b(e,"")}if(""===r.path)return r;throw new h(i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}static makeFromUrl(e,t){let r=null,n="([A-Za-z0-9.\\-_]+)",a=RegExp("^gs://"+n+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}let o=t.replace(/[.]/g,"\\."),l=RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${n}/o(/([^?#]*).*)?$`,"i"),u=t===c?"(?:storage.googleapis.com|storage.cloud.google.com)":t,d=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:l,indices:{bucket:1,path:3},postModify:s},{regex:RegExp(`^https?://${u}/${n}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let t=0;t<d.length;t++){let n=d[t],a=n.regex.exec(e);if(a){let e=a[n.indices.bucket],t=a[n.indices.path];t||(t=""),r=new b(e,t),n.postModify(r);break}}if(null==r)throw new h(i.INVALID_URL,"Invalid URL '"+e+"'.");return r}}class x{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function k(e){return"string"==typeof e||e instanceof String}function E(e){return S()&&e instanceof Blob}function S(){return"undefined"!=typeof Blob}function N(e,t,r,n){if(n<t)throw m(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw m(`Invalid value for '${e}'. Expected ${r} or less.`)}function _(e,t,r){let n=t;return null==r&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function T(e){let t=encodeURIComponent,r="?";for(let n in e)e.hasOwnProperty(n)&&(r=r+(t(n)+"=")+t(e[n])+"&");return r.slice(0,-1)}(a=s||(s={}))[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT";class I{constructor(e,t,r,n,a,i,s,o,l,u,c,d=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=n,this.successCodes_=a,this.additionalRetryCodes_=i,this.callback_=s,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){let e=(e,t)=>{if(t)return void e(!1,new C(!1,null,!0));let r=this.connectionFactory_();this.pendingConnection_=r;let n=e=>{let t=e.loaded,r=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,r)};null!==this.progressCallback_&&r.addUploadProgressListener(n),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&r.removeUploadProgressListener(n),this.pendingConnection_=null;let t=r.getErrorCode()===s.NO_ERROR,a=r.getStatus();if(!t||function(e,t){let r=e>=500&&e<600,n=-1!==[408,429].indexOf(e),a=-1!==t.indexOf(e);return r||n||a}(a,this.additionalRetryCodes_)&&this.retry)return void e(!1,new C(!1,null,r.getErrorCode()===s.ABORT));e(!0,new C(-1!==this.successCodes_.indexOf(a),r))})},t=(e,t)=>{let r=this.resolve_,n=this.reject_,a=t.connection;if(t.wasSuccessCode)try{let e=this.callback_(a,a.getResponse());void 0!==e?r(e):r()}catch(e){n(e)}else if(null!==a){let e=p();e.serverResponse=a.getErrorText(),n(this.errorCallback_?this.errorCallback_(a,e):e)}else n(t.canceled?this.appDelete_?g():new h(i.CANCELED,"User canceled the upload/download."):new h(i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))};this.canceled_?t(!1,new C(!1,null,!0)):this.backoffId_=function(e,t,r){let n=1,a=null,i=null,s=!1,o=0,l=!1;function u(...e){l||(l=!0,t.apply(null,e))}function c(t){a=setTimeout(()=>{a=null,e(h,2===o)},t)}function d(){i&&clearTimeout(i)}function h(e,...t){let r;if(l)return void d();if(e||2===o||s){d(),u.call(null,e,...t);return}n<64&&(n*=2),1===o?(o=2,r=0):r=(n+Math.random())*1e3,c(r)}let f=!1;function p(e){f||(f=!0,d(),!l&&(null!==a?(e||(o=2),clearTimeout(a),c(0)):e||(o=1)))}return c(0),i=setTimeout(()=>{s=!0,p(!0)},r),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class C{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function D(...e){let t="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==t){let r=new t;for(let t=0;t<e.length;t++)r.append(e[t]);return r.getBlob()}if(S())return new Blob(e);throw new h(i.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}let A="base64",j="base64url",P="data_url";class O{constructor(e,t){this.data=e,this.contentType=t||null}}function R(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<=127?t.push(n):n<=2047?t.push(192|n>>6,128|63&n):(64512&n)==55296?r<e.length-1&&(64512&e.charCodeAt(r+1))==56320?(n=65536|(1023&n)<<10|1023&e.charCodeAt(++r),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)):t.push(239,191,189):(64512&n)==56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(t)}function L(e,t){let r;switch(e){case A:{let r=-1!==t.indexOf("-"),n=-1!==t.indexOf("_");if(r||n)throw y(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case j:{let r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw y(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}}try{r=function(e){if("undefined"==typeof atob)throw new h(i.UNSUPPORTED_ENVIRONMENT,"base-64 is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.");return atob(e)}(t)}catch(t){if(t.message.includes("polyfill"))throw t;throw y(e,"Invalid character found")}let n=new Uint8Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return n}class M{constructor(e){var t,r;this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(null===n)throw y(P,"Must be formatted 'data:[<mediatype>][;base64],<data>");let a=n[1]||null;null!=a&&(this.base64=(r=";base64",(t=a).length>=r.length&&t.substring(t.length-r.length)===r),this.contentType=this.base64?a.substring(0,a.length-7):a),this.rest=e.substring(e.indexOf(",")+1)}}class U{constructor(e,t){let r=0,n="";E(e)?(this.data_=e,r=e.size,n=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=n}size(){return this.size_}type(){return this.type_}slice(e,t){if(!E(this.data_))return new U(new Uint8Array(this.data_.buffer,e,t-e),!0);{var r,n,a;let i=(r=this.data_,n=e,a=t,r.webkitSlice?r.webkitSlice(n,a):r.mozSlice?r.mozSlice(n,a):r.slice?r.slice(n,a):null);return null===i?null:new U(i)}}static getBlob(...e){if(S()){let t=e.map(e=>e instanceof U?e.data_:e);return new U(D.apply(null,t))}{let t=e.map(e=>k(e)?function(e,t){return new O(R(t))}("raw",e).data:e.data_),r=0;t.forEach(e=>{r+=e.byteLength});let n=new Uint8Array(r),a=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)n[a++]=e[t]}),new U(n,!0)}}uploadData(){return this.data_}}function F(e){var t;let r;try{r=JSON.parse(e)}catch(e){return null}return"object"!=typeof(t=r)||Array.isArray(t)?null:r}function V(e){let t=e.lastIndexOf("/",e.length-2);return -1===t?e:e.slice(t+1)}function z(e,t){return t}class B{constructor(e,t,r,n){this.server=e,this.local=t||e,this.writable=!!r,this.xform=n||z}}let H=null;function q(){if(H)return H;let e=[];e.push(new B("bucket")),e.push(new B("generation")),e.push(new B("metageneration")),e.push(new B("name","fullPath",!0));let t=new B("name");t.xform=function(e,t){return!k(t)||t.length<2?t:V(t)},e.push(t);let r=new B("size");return r.xform=function(e,t){return void 0!==t?Number(t):t},e.push(r),e.push(new B("timeCreated")),e.push(new B("updated")),e.push(new B("md5Hash",null,!0)),e.push(new B("cacheControl",null,!0)),e.push(new B("contentDisposition",null,!0)),e.push(new B("contentEncoding",null,!0)),e.push(new B("contentLanguage",null,!0)),e.push(new B("contentType",null,!0)),e.push(new B("metadata","customMetadata",!0)),H=e}function $(e,t,r){let n=F(t);return null===n?null:function(e,t,r){let n={};n.type="file";let a=r.length;for(let e=0;e<a;e++){let a=r[e];n[a.local]=a.xform(n,t[a.server])}return Object.defineProperty(n,"ref",{get:function(){let t=new b(n.bucket,n.fullPath);return e._makeStorageReference(t)}}),n}(e,n,r)}class W{constructor(e,t,r,n){this.url=e,this.method=t,this.handler=r,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function G(e){if(!e)throw p()}function K(e){return function(t,r){var n,a;let s;return 401===t.getStatus()?s=t.getErrorText().includes("Firebase App Check token is invalid")?new h(i.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new h(i.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=e.bucket,s=new h(i.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(a=e.path,s=new h(i.UNAUTHORIZED,"User does not have permission to access '"+a+"'.")):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}}class Q{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,n){if(this.sent_)throw v("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==n)for(let e in n)n.hasOwnProperty(e)&&this.xhr_.setRequestHeader(e,n[e].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw v("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw v("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return -1}}getResponse(){if(!this.sent_)throw v("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw v("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Y extends Q{initXhr(){this.xhr_.responseType="text"}}function X(){return new Y}class J{constructor(e,t){this._service=e,t instanceof b?this._location=t:this._location=b.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new J(e,t)}get root(){let e=new b(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return V(this._location.path)}get storage(){return this._service}get parent(){let e=function(e){if(0===e.length)return null;let t=e.lastIndexOf("/");return -1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;let t=new b(this._location.bucket,e);return new J(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw new h(i.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}}function Z(e,t){let r=null==t?void 0:t[d];return null==r?null:b.makeFromBucketSpec(r,e)}class ee{constructor(e,t,r,n,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=n,this._firebaseVersion=a,this._bucket=null,this._host=c,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,null!=n?this._bucket=b.makeFromBucketSpec(n,this._host):this._bucket=Z(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=b.makeFromBucketSpec(this._url,e):this._bucket=Z(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){N("time",0,1/0,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){N("time",0,1/0,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new J(this,e)}_makeRequest(e,t,r,n,a=!0){if(this._deleted)return new x(g());{let i=function(e,t,r,n,a,i,s=!0){let o=T(e.urlParams),l=e.url+o,u=Object.assign({},e.headers);return t&&(u["X-Firebase-GMPID"]=t),null!==r&&r.length>0&&(u.Authorization="Firebase "+r),u["X-Firebase-Storage-Version"]="webjs/"+(null!=i?i:"AppManager"),null!==n&&(u["X-Firebase-AppCheck"]=n),new I(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,s)}(e,this._appId,r,n,t,this._firebaseVersion,a);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){let[r,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,n).getPromise()}}let et="@firebase/storage",er="0.13.2",en="storage";function ea(e,t,r){var n=e=(0,l.getModularInstance)(e);n._throwIfRoot("uploadBytes");let a=function(e,t,r,n,a){let s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+l;let u=function(e,t,r){let n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=t&&t.type()||"application/octet-stream"),n}(t,n,a),c="--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+function(e,t){let r={},n=t.length;for(let a=0;a<n;a++){let n=t[a];n.writable&&(r[n.server]=e[n.local])}return JSON.stringify(r)}(u,r)+"\r\n--"+l+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",d=U.getBlob(c,n,"\r\n--"+l+"--");if(null===d)throw new h(i.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.");let f={name:u.fullPath},p=_(s,e.host,e._protocol),m=e.maxUploadRetryTime,g=new W(p,"POST",function(t,n){let a=$(e,n,r);return G(null!==a),a},m);return g.urlParams=f,g.headers=o,g.body=d.uploadData(),g.errorHandler=K(t),g}(n.storage,n._location,q(),new U(t,!0),r);return n.storage.makeRequestWithTokens(a,X).then(e=>({metadata:e,ref:n}))}function ei(e){var t=e=(0,l.getModularInstance)(e);t._throwIfRoot("getDownloadURL");let r=function(e,t,r){let n=_(t.fullServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,s=new W(n,"GET",function(t,n){let a=$(e,n,r);return G(null!==a),function(e,t,r,n){let a=F(t);if(null===a||!k(a.downloadTokens))return null;let i=a.downloadTokens;if(0===i.length)return null;let s=encodeURIComponent;return i.split(",").map(t=>{let a=e.bucket,i=e.fullPath;return _("/b/"+s(a)+"/o/"+s(i),r,n)+T({alt:"media",token:t})})[0]}(a,n,e.host,e._protocol)},a);return s.errorHandler=function(e){let t=K(e);return function(r,n){var a;let s=t(r,n);return 404===r.getStatus()&&(a=e.path,s=new h(i.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")),s.serverResponse=n.serverResponse,s}}(t),s}(t.storage,t._location,q());return t.storage.makeRequestWithTokens(r,X).then(e=>{if(null===e)throw new h(i.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function es(e,t){var r=e=(0,l.getModularInstance)(e);if(!(t&&/^[A-Za-z]+:\/\//.test(t)))return function e(t,r){if(t instanceof ee){if(null==t._bucket)throw new h(i.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+d+"' property when initializing the app?");let n=new J(t,t._bucket);return null!=r?e(n,r):n}if(void 0===r)return t;let n=function(e,t){let r=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?r:e+"/"+r}(t._location.path,r),a=new b(t._location.bucket,n);return new J(t.storage,a)}(r,t);if(r instanceof ee)return new J(r,t);throw m("To use ref(service, url), the first argument must be a Storage instance.")}function eo(e=(0,o.getApp)(),t){e=(0,l.getModularInstance)(e);let r=(0,o._getProvider)(e,en).getImmediate({identifier:t}),n=(0,l.getDefaultEmulatorHostnameAndPort)("storage");return n&&function(e,t,r,n={}){!function(e,t,r,n={}){e.host=`${t}:${r}`,e._protocol="http";let{mockUserToken:a}=n;a&&(e._overrideAuthToken="string"==typeof a?a:(0,l.createMockUserToken)(a,e.app.options.projectId))}(e,t,r,n)}(r,...n),r}(0,o._registerComponent)(new(0,u.Component)(en,function(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate();return new ee(r,e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t,o.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(et,er,""),(0,o.registerVersion)(et,er,"esm2017")}),k("7FrCY",function(t,r){e(t.exports,"getAnalytics",()=>w("17EBg").getAnalytics),w("17EBg")}),k("17EBg",function(t,r){let n,a,i,s;e(t.exports,"getAnalytics",()=>O);var o=w("7xvHX"),l=w("5Z2ef"),u=w("gMVVg"),c=w("eryG9");w("2Ey2D");let d="analytics",h="https://www.googletagmanager.com/gtag/js",f=new(0,l.Logger)("@firebase/analytics"),p=new(0,u.ErrorFactory)("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function m(e){if(!e.startsWith(h)){let t=p.create("invalid-gtag-resource",{gtagURL:e});return f.warn(t.message),""}return e}function g(e){return Promise.all(e.map(e=>e.catch(e=>e)))}async function y(e,t,r,n,a,i){let s=n[a];try{if(s)await t[s];else{let e=(await g(r)).find(e=>e.measurementId===a);e&&await t[e.appId]}}catch(e){f.error(e)}e("config",a,i)}async function v(e,t,r,n,a){try{let i=[];if(a&&a.send_to){let e=a.send_to;Array.isArray(e)||(e=[e]);let n=await g(r);for(let r of e){let e=n.find(e=>e.measurementId===r),a=e&&t[e.appId];if(a)i.push(a);else{i=[];break}}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",n,a||{})}catch(e){f.error(e)}}let b=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};async function x(e){var t;let{appId:r,apiKey:n}=e,a={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":n})},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",r),s=await fetch(i,a);if(200!==s.status&&304!==s.status){let e="";try{let r=await s.json();(null==(t=r.error)?void 0:t.message)&&(e=r.error.message)}catch(e){}throw p.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}async function k(e,t=b,r){let{appId:n,apiKey:a,measurementId:i}=e.options;if(!n)throw p.create("no-app-id");if(!a){if(i)return{measurementId:i,appId:n};throw p.create("no-api-key")}let s=t.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new S;return setTimeout(async()=>{o.abort()},void 0!==r?r:6e4),E({appId:n,apiKey:a,measurementId:i},s,o,t)}async function E(e,{throttleEndTimeMillis:t,backoffCount:r},n,a=b){var i,s,o;let{appId:l,measurementId:c}=e;try{await (s=n,o=t,new Promise((e,t)=>{let r=setTimeout(e,Math.max(o-Date.now(),0));s.addEventListener(()=>{clearTimeout(r),t(p.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))}catch(e){if(c)return f.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:l,measurementId:c};throw e}try{let t=await x(e);return a.deleteThrottleMetadata(l),t}catch(o){if(!function(e){if(!(e instanceof u.FirebaseError)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(o)){if(a.deleteThrottleMetadata(l),c)return f.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${null==o?void 0:o.message}]`),{appId:l,measurementId:c};throw o}let t=503===Number(null==(i=null==o?void 0:o.customData)?void 0:i.httpStatus)?(0,u.calculateBackoffMillis)(r,a.intervalMillis,30):(0,u.calculateBackoffMillis)(r,a.intervalMillis),s={throttleEndTimeMillis:Date.now()+t,backoffCount:r+1};return a.setThrottleMetadata(l,s),f.debug(`Calling attemptFetch again in ${t} millis`),E(e,s,n,a)}}class S{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function N(e,t,r,n,a){if(a&&a.global)return void e("event",r,n);{let a=await t;e("event",r,Object.assign(Object.assign({},n),{send_to:a}))}}async function _(){if(!(0,u.isIndexedDBAvailable)())return f.warn(p.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await (0,u.validateIndexedDBOpenable)()}catch(e){return f.warn(p.create("indexeddb-unavailable",{errorInfo:null==e?void 0:e.toString()}).message),!1}return!0}async function T(e,t,r,i,s,o,l){var u;let c=k(e);c.then(t=>{r[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&f.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>f.error(e)),t.push(c);let d=_().then(e=>e?i.getId():void 0),[p,g]=await Promise.all([c,d]);!function(e){for(let t of Object.values(window.document.getElementsByTagName("script")))if(t.src&&t.src.includes(h)&&t.src.includes(e))return t;return null}(o)&&function(e,t){var r;let n,a=(r={createScriptURL:m},window.trustedTypes&&(n=window.trustedTypes.createPolicy("firebase-js-sdk-policy",r)),n),i=document.createElement("script"),s=`${h}?l=${e}&id=${t}`;i.src=a?null==a?void 0:a.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}(o,p.measurementId),a&&(s("consent","default",a),a=void 0),s("js",new Date);let y=null!=(u=null==l?void 0:l.config)?u:{};return y.origin="firebase",y.update=!0,null!=g&&(y.firebase_id=g),s("config",p.measurementId,y),n&&(s("set",n),n=void 0),p.measurementId}class I{constructor(e){this.app=e}_delete(){return delete C[this.app.options.appId],Promise.resolve()}}let C={},D=[],A={},j="dataLayer",P=!1;function O(e=(0,o.getApp)()){e=(0,u.getModularInstance)(e);let t=(0,o._getProvider)(e,d);return t.isInitialized()?t.getImmediate():function(e,t={}){let r=(0,o._getProvider)(e,d);if(r.isInitialized()){let e=r.getImmediate();if((0,u.deepEqual)(t,r.getOptions()))return e;throw p.create("already-initialized")}return r.initialize({options:t})}(e)}let R="@firebase/analytics",L="0.10.8";(0,o._registerComponent)(new(0,c.Component)(d,(e,{options:t})=>(function(e,t,r){let n=[];if((0,u.isBrowserExtension)()&&n.push("This is a browser extension environment."),(0,u.areCookiesEnabled)()||n.push("Cookies are not available."),n.length>0){let e=n.map((e,t)=>`(${t+1}) ${e}`).join(" "),t=p.create("invalid-analytics-context",{errorInfo:e});f.warn(t.message)}let a=e.options.appId;if(!a)throw p.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)f.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw p.create("no-api-key");if(null!=C[a])throw p.create("already-exists",{id:a});if(!P){var o,l;let e,t;e=[],Array.isArray(window[j])?e=window[j]:window[j]=e;let{wrappedGtag:r,gtagCore:n}=(o="gtag",t=function(){window[j].push(arguments)},window[o]&&"function"==typeof window[o]&&(t=window[o]),window[o]=(l=t,async function(e,...t){try{if("event"===e){let[e,r]=t;await v(l,C,D,e,r)}else if("config"===e){let[e,r]=t;await y(l,C,D,A,e,r)}else if("consent"===e){let[e,r]=t;l("consent",e,r)}else if("get"===e){let[e,r,n]=t;l("get",e,r,n)}else if("set"===e){let[e]=t;l("set",e)}else l(e,...t)}catch(e){f.error(e)}}),{gtagCore:t,wrappedGtag:window[o]});s=r,i=n,P=!0}return C[a]=T(e,D,A,t,i,j,r),new I(e)})(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,o._registerComponent)(new(0,c.Component)("analytics-internal",function(e){try{let t=e.getProvider(d).getImmediate();return{logEvent:(e,r,n)=>{var a;return a=t,void(a=(0,u.getModularInstance)(a),N(s,C[a.app.options.appId],e,r,n).catch(e=>f.error(e)))}}}catch(e){throw p.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),(0,o.registerVersion)(R,L),(0,o.registerVersion)(R,L,"esm2017")}),k("2Ey2D",function(e,t){var r=w("7xvHX"),n=w("eryG9"),a=w("gMVVg"),i=w("iItpQ");let s="@firebase/installations",o="0.6.9",l=`w:${o}`,u="FIS_v2",c=new(0,a.ErrorFactory)("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function d(e){return e instanceof a.FirebaseError&&e.code.includes("request-failed")}function h({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function f(e){return{token:e.token,requestStatus:2,expiresIn:Number(e.expiresIn.replace("s","000")),creationTime:Date.now()}}async function p(e,t){let r=(await t.json()).error;return c.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function m({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function g(e){let t=await e();return t.status>=500&&t.status<600?e():t}async function y({appConfig:e,heartbeatServiceProvider:t},{fid:r}){let n=h(e),a=m(e),i=t.getImmediate({optional:!0});if(i){let e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}let s={method:"POST",headers:a,body:JSON.stringify({fid:r,authVersion:u,appId:e.appId,sdkVersion:l})},o=await g(()=>fetch(n,s));if(o.ok){let e=await o.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:f(e.authToken)}}throw await p("Create Installation",o)}function v(e){return new Promise(t=>{setTimeout(t,e)})}let b=/^[cdef][\w-]{21}$/;function x(e){return`${e.appName}!${e.appId}`}let k=new Map;function E(e,t){let r=x(e);S(r,t),function(e,t){let r=(!N&&"BroadcastChannel"in self&&((N=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{S(e.data.key,e.data.fid)}),N);r&&r.postMessage({key:e,fid:t}),0===k.size&&N&&(N.close(),N=null)}(r,t)}function S(e,t){let r=k.get(e);if(r)for(let e of r)e(t)}let N=null,_="firebase-installations-store",T=null;function I(){return T||(T=(0,i.openDB)("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(_)}})),T}async function C(e,t){let r=x(e),n=(await I()).transaction(_,"readwrite"),a=n.objectStore(_),i=await a.get(r);return await a.put(t,r),await n.done,i&&i.fid===t.fid||E(e,t.fid),t}async function D(e){let t=x(e),r=(await I()).transaction(_,"readwrite");await r.objectStore(_).delete(t),await r.done}async function A(e,t){let r=x(e),n=(await I()).transaction(_,"readwrite"),a=n.objectStore(_),i=await a.get(r),s=t(i);return void 0===s?await a.delete(r):await a.put(s,r),await n.done,s&&(!i||i.fid!==s.fid)&&E(e,s.fid),s}async function j(e){let t,r=await A(e.appConfig,r=>{let n=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(c.create("app-offline"))};let r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=P(e,r);return{installationEntry:r,registrationPromise:n}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:O(e)}:{installationEntry:t}}(e,L(r||{fid:function(){try{var e;let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let r=(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return b.test(r)?r:""}catch(e){return""}}(),registrationStatus:0}));return t=n.registrationPromise,n.installationEntry});return""===r.fid?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}async function P(e,t){try{let r=await y(e,t);return C(e.appConfig,r)}catch(r){throw d(r)&&409===r.customData.serverCode?await D(e.appConfig):await C(e.appConfig,{fid:t.fid,registrationStatus:0}),r}}async function O(e){let t=await R(e.appConfig);for(;1===t.registrationStatus;)await v(100),t=await R(e.appConfig);if(0===t.registrationStatus){let{installationEntry:t,registrationPromise:r}=await j(e);return r||t}return t}function R(e){return A(e,e=>{if(!e)throw c.create("installation-not-found");return L(e)})}function L(e){var t;return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e}async function M({appConfig:e,heartbeatServiceProvider:t},r){let n=function(e,{fid:t}){return`${h(e)}/${t}/authTokens:generate`}(e,r),a=function(e,{refreshToken:t}){var r;let n=m(e);return n.append("Authorization",(r=t,`${u} ${r}`)),n}(e,r),i=t.getImmediate({optional:!0});if(i){let e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}let s={method:"POST",headers:a,body:JSON.stringify({installation:{sdkVersion:l,appId:e.appId}})},o=await g(()=>fetch(n,s));if(o.ok)return f(await o.json());throw await p("Generate Auth Token",o)}async function U(e,t=!1){let r,n=await A(e.appConfig,n=>{var a;if(!B(n))throw c.create("not-registered");let i=n.authToken;if(!t&&2===(a=i).requestStatus&&!function(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(a))return n;if(1===i.requestStatus)return r=F(e,t),n;{if(!navigator.onLine)throw c.create("app-offline");let t=function(e){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(n);return r=z(e,t),t}});return r?await r:n.authToken}async function F(e,t){let r=await V(e.appConfig);for(;1===r.authToken.requestStatus;)await v(100),r=await V(e.appConfig);let n=r.authToken;return 0===n.requestStatus?U(e,t):n}function V(e){return A(e,e=>{var t;if(!B(e))throw c.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function z(e,t){try{let r=await M(e,t),n=Object.assign(Object.assign({},t),{authToken:r});return await C(e.appConfig,n),r}catch(r){if(d(r)&&(401===r.customData.serverCode||404===r.customData.serverCode))await D(e.appConfig);else{let r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await C(e.appConfig,r)}throw r}}function B(e){return void 0!==e&&2===e.registrationStatus}async function H(e){let{installationEntry:t,registrationPromise:r}=await j(e);return r?r.catch(console.error):U(e).catch(console.error),t.fid}async function q(e,t=!1){return await $(e),(await U(e,t)).token}async function $(e){let{registrationPromise:t}=await j(e);t&&await t}function W(e){return c.create("missing-app-config-values",{valueName:e})}let G="installations";(0,r._registerComponent)(new(0,n.Component)(G,e=>{let t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw W("App Configuration");if(!e.name)throw W("App Name");for(let t of["projectId","apiKey","appId"])if(!e.options[t])throw W(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),a=(0,r._getProvider)(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:a,_delete:()=>Promise.resolve()}},"PUBLIC")),(0,r._registerComponent)(new(0,n.Component)("installations-internal",e=>{let t=e.getProvider("app").getImmediate(),n=(0,r._getProvider)(t,G).getImmediate();return{getId:()=>H(n),getToken:e=>q(n,e)}},"PRIVATE")),(0,r.registerVersion)(s,o),(0,r.registerVersion)(s,o,"esm2017")}),k("2hm3L",function(t,r){e(t.exports,"getFunctions",()=>w("dP6Kv").getFunctions),w("dP6Kv")}),k("dP6Kv",function(t,r){e(t.exports,"getFunctions",()=>f);var n,a=w("7xvHX"),i=w("gMVVg"),s=w("eryG9");let o="functions";i.FirebaseError;class l{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||r.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{let e=await this.auth.getToken();return null==e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){if(this.appCheck){let t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){let t=await this.getAuthToken();return{authToken:t,messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}let u="us-central1";class c{constructor(e,t,r,n,a=u,i){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new l(t,r,n),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{let e=new URL(a);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=u}catch(e){this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;if(null!==this.emulatorOrigin){let r=this.emulatorOrigin;return`${r}/${t}/${this.region}/${e}`}return null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}let d="@firebase/functions",h="0.11.8";function f(e=(0,a.getApp)(),t=u){let r=(0,a._getProvider)((0,i.getModularInstance)(e),o).getImmediate({identifier:t}),n=(0,i.getDefaultEmulatorHostnameAndPort)("functions");return n&&function(e,t,r){var n;n=(0,i.getModularInstance)(e),n.emulatorOrigin=`http://${t}:${r}`}(r,...n),r}n=fetch.bind(self),(0,a._registerComponent)(new(0,s.Component)(o,(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal");return new c(r,a,e.getProvider("messaging-internal"),e.getProvider("app-check-internal"),t,n)},"PUBLIC").setMultipleInstances(!0)),(0,a.registerVersion)(d,h,void 0),(0,a.registerVersion)(d,h,"esm2017")});var E={};E=w("8rWe0");var S=w("acw62"),N={};!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),N=w("iWoMt");var S=(w("acw62"),w("acw62")),_=((t={}).PENDING="Pendiente",t.IN_PROGRESS="En proceso",t.COMPLETED="Completada",t.NOT_DONE="No realizada",t.DELETED="Eliminada",t),T=((r={}).NONE="Nunca",r.DAILY="Diaria",r.WEEKLY="Semanal",r.MONTHLY="Mensual",r.CUSTOM_DAYS="Personalizada",r),I=((n={}).DASHBOARD="dashboard",n.STATS="stats",n.SETTINGS="settings",n.SUBSCRIPTION="subscription",n.SUCCESS="success",n),C=((a={}).HOMES="homes",a.MEMBERS="members",a.TASKS="tasks",a.PERIODIC_TASKS="periodic_tasks",a),S=w("acw62"),D=w("e0EYX");w("6AR8M");var A=w("2EDex");w("6AR8M");var A=w("2EDex"),D=w("e0EYX");const j=new(0,A.X),P=async()=>{try{let e=(await (0,A.c)(D.auth,j)).user,t={id:e.uid,name:e.displayName||"Usuario",email:e.email||"",avatar:e.photoURL||`https://i.pravatar.cc/150?u=${e.email}`,color:"#3b82f6",plan:"free"};return{success:!0,message:"¡Inicio de sesión con Google exitoso!",user:t}}catch(t){console.error("Error al iniciar sesión con Google:",t);let e="Error al iniciar sesión con Google";if(t.code)switch(t.code){case"auth/popup-closed-by-user":e="Has cerrado la ventana de inicio de sesión. Por favor, inténtalo de nuevo.";break;case"auth/popup-blocked":e="El navegador ha bloqueado la ventana emergente. Por favor, permite ventanas emergentes e inténtalo de nuevo.";break;case"auth/cancelled-popup-request":e="La solicitud de inicio de sesión fue cancelada. Por favor, inténtalo de nuevo.";break;case"auth/account-exists-with-different-credential":e="Ya existe una cuenta con este correo electrónico pero con otro método de inicio de sesión.";break;case"auth/network-request-failed":e="Error de conexión. Por favor, verifica tu conexión a internet e inténtalo de nuevo.";break;default:e="No se pudo iniciar sesión con Google. Por favor, inténtalo de nuevo más tarde."}return{success:!1,message:e}}};w("ilpIi");var O=w("9HrqM");w("fCOdq");var R=w("jceyq");const L=[T.NONE,T.DAILY,T.WEEKLY,T.MONTHLY,T.CUSTOM_DAYS];_.PENDING,_.IN_PROGRESS,_.COMPLETED,_.NOT_DONE,_.DELETED;const M=["#3b82f6","#ec4899","#22c55e","#f97316","#8b5cf6","#f43f5e","#14b8a6","#eab308"],U=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),F=e=>e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),V=e=>{let t=e.getDay(),r=new Date(e);return r.setDate(e.getDate()+((0===t?-6:1)-t)),r.setHours(0,0,0,0),r},z=e=>{let t=V(e),r=new Date(t);return r.setDate(t.getDate()+6),r.setHours(23,59,59,999),r},B=(e,t)=>{let r=new Date(e);return r.setDate(r.getDate()+7*t),r},H=(e,t)=>{let r=new Date(e);return r.setDate(r.getDate()+t),r},q=Symbol.for("constructDateFrom");function $(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&q in e?e[q](t):e instanceof Date?new e.constructor(t):new Date(t)}function W(e,t){return $(t||e,e)}function G(e,t,r){let n=W(e,r?.in);return isNaN(t)?$(r?.in||e,NaN):(t&&n.setDate(n.getDate()+t),n)}var K=w("g8dzF");const Q=new class{async googleLogin(){try{let e=await P();if(e.success&&e.user){let t=(0,O.doc)(D.db,"users",e.user.id);return(await (0,O.getDoc)(t)).exists()?await (0,O.updateDoc)(t,{avatar:e.user.avatar,name:e.user.name,lastLoginAt:(0,O.serverTimestamp)()}):await (0,O.setDoc)(t,{name:e.user.name,email:e.user.email.toLowerCase(),avatar:e.user.avatar,color:e.user.color,plan:"free",createdAt:(0,O.serverTimestamp)()}),{success:!0,message:"Login con Google exitoso."}}return{success:!1,message:e.message}}catch(e){return console.error("Error en googleLogin:",e),{success:!1,message:e.message||"Error al iniciar sesión con Google"}}}onAuthStateChange(e){let t=null,r=(0,A.y)(D.auth,async r=>{if(t&&(t(),t=null),r){let n=(0,O.doc)(D.db,"users",r.uid);try{if(!(await (0,O.getDoc)(n)).exists()&&!r.isAnonymous){let t={name:r.displayName||"Usuario",email:r.email?.toLowerCase()||"",avatar:r.photoURL||"/user.svg",color:M[Math.floor(Math.random()*M.length)],plan:"free",createdAt:(0,O.serverTimestamp)(),lastLoginAt:(0,O.serverTimestamp)()};await (0,O.setDoc)(n,t),e({id:r.uid,...t});return}}catch(e){console.error("Error al verificar usuario en Firestore:",e)}t=(0,O.onSnapshot)(n,t=>{if(t.exists())e({id:r.uid,...t.data()});else{console.error("Usuario autenticado pero no existe en Firestore");let t={name:r.displayName||"Usuario",email:r.email?.toLowerCase()||"",avatar:r.photoURL||"/user.svg",color:M[Math.floor(Math.random()*M.length)],plan:"free",createdAt:(0,O.serverTimestamp)(),lastLoginAt:(0,O.serverTimestamp)()};(0,O.setDoc)(n,t).then(()=>{console.log("Usuario creado automáticamente en Firestore"),e({id:r.uid,...t})}).catch(t=>{console.error("Error al crear usuario automáticamente:",t),e(null)})}})}else e(null)});return()=>{t&&t(),r()}}async register(e,t,r){try{if(r.length<8)return{success:!1,message:"La contraseña debe tener al menos 8 caracteres."};if(!/[A-Z]/.test(r))return{success:!1,message:"La contraseña debe contener al menos una letra mayúscula."};if(!/[0-9]/.test(r))return{success:!1,message:"La contraseña debe contener al menos un número."};if(!/[!@#$%^&*(),.?":{}|<>]/.test(r))return{success:!1,message:"La contraseña debe contener al menos un carácter especial."};let n=(await (0,A.aa)(D.auth,t,r)).user,a={url:window.location.origin+"/login",handleCodeInApp:!0};await (0,A.ag)(n,a);let i=`lastVerificationEmail_${t.toLowerCase()}`;localStorage.setItem(i,Date.now().toString());try{let r=(0,O.collection)(D.db,"users"),a=(await (0,O.getDocs)(r)).size,i={name:e,email:t.toLowerCase(),avatar:"/user.svg",color:M[a%M.length],plan:"free",createdAt:(0,O.serverTimestamp)(),lastLoginAt:(0,O.serverTimestamp)()};await (0,O.setDoc)((0,O.doc)(D.db,"users",n.uid),i)}catch(e){return await n.delete(),console.error("Error creando documento Firestore tras registro:",e),{success:!1,message:"Error creando perfil de usuario. Inténtalo de nuevo."}}return{success:!0,message:"¡Registro exitoso! Se ha enviado un correo de verificación a tu dirección de correo electrónico. Por favor, verifica tu correo antes de iniciar sesión. Si no encuentras el correo en tu bandeja de entrada, revisa también tu carpeta de spam."}}catch(e){if(console.error("Error en registro:",e),"auth/email-already-in-use"===e.code)return{success:!1,message:"El correo electrónico ya está en uso."};if("auth/weak-password"===e.code)return{success:!1,message:"La contraseña es demasiado débil."};if("auth/invalid-email"===e.code)return{success:!1,message:"El correo electrónico no es válido."};return{success:!1,message:`Error en el registro: ${e.message}`}}}async login(e,t){try{let r=`login_attempts_${e.toLowerCase()}`,n=`lockout_time_${e.toLowerCase()}`,a=localStorage.getItem(n);if(a&&Date.now()<parseInt(a)){let e=Math.ceil((parseInt(a)-Date.now())/6e4);return{success:!1,message:`Cuenta bloqueada temporalmente. Intenta de nuevo en ${e} minutos.`}}try{let a=(await (0,A.ab)(D.auth,e,t)).user;if(!a.emailVerified){let t=`lastVerificationEmail_${e.toLowerCase()}`,r=localStorage.getItem(t),n=!0,i="Inicio de sesión exitoso. Por favor, verifica tu correo electrónico para acceder a todas las funciones.";if(r){let e=Date.now()-parseInt(r);if(e<6e4){n=!1;let t=Math.ceil((6e4-e)/1e3);i+=` Ya se envi\xf3 un correo de verificaci\xf3n recientemente. Puedes solicitar otro en ${t} segundos.`}}if(n)try{let e={url:window.location.origin,handleCodeInApp:!1};await (0,A.ag)(a,e),localStorage.setItem(t,Date.now().toString()),i+=" Se ha enviado un nuevo correo de verificación."}catch(e){console.error("Error al enviar correo de verificación:",e),"auth/too-many-requests"===e.code?i+=" No se pudo enviar el correo de verificación debido a demasiadas solicitudes. Por favor, espera unos minutos.":i+=" No se pudo enviar el correo de verificación en este momento."}return{success:!0,message:i}}if(localStorage.removeItem(r),localStorage.removeItem(n),D.auth.currentUser){let e=(0,O.doc)(D.db,"users",D.auth.currentUser.uid);await (0,O.updateDoc)(e,{lastLoginAt:(0,O.serverTimestamp)()})}return{success:!0,message:"Login exitoso."}}catch(a){let t=parseInt(localStorage.getItem(r)||"0")+1;if(localStorage.setItem(r,t.toString()),t>=5){let e=Date.now()+9e5;return localStorage.setItem(n,e.toString()),{success:!1,message:"Demasiados intentos fallidos. Cuenta bloqueada temporalmente por 15 minutos."}}if("auth/invalid-credential"===a.code)try{let t=await this.checkAndSyncUserData(e);if(!t.success)return t;return{success:!1,message:"Contraseña incorrecta. Por favor, verifica tus credenciales."}}catch(e){return console.error("Error al verificar métodos de inicio de sesión:",e),{success:!1,message:"Error al verificar credenciales. Por favor, intenta de nuevo."}}throw a}}catch(t){console.error("Error en login:",t);let e="Error en el inicio de sesión.";switch(t.code){case"auth/user-not-found":e="No existe una cuenta con este correo electrónico.";break;case"auth/wrong-password":e="Contraseña incorrecta. Por favor, verifica tus credenciales.";break;case"auth/invalid-email":e="El formato del correo electrónico no es válido.";break;case"auth/too-many-requests":e="Demasiados intentos fallidos. Por favor, intenta más tarde o restablece tu contraseña.";break;case"auth/invalid-credential":e="Credenciales inválidas. Por favor, verifica tu correo y contraseña o intenta restablecer tu contraseña si el problema persiste.";break;case"auth/user-disabled":e="Esta cuenta ha sido deshabilitada. Por favor, contacta al soporte para más información.";break;case"auth/account-exists-with-different-credential":e="Ya existe una cuenta con este correo electrónico pero con otro método de inicio de sesión.";break;default:e=`Error: ${t.message}`}return{success:!1,message:e}}}async logout(){await (0,A.C)(D.auth)}async checkAndSyncUserData(e){try{let t=(0,O.collection)(D.db,"users"),r=(0,O.query)(t,(0,O.where)("email","==",e.toLowerCase())),n=await (0,O.getDocs)(r),a=await (0,A.af)(D.auth,e);if(!n.empty&&0===a.length)return{success:!1,message:"Tu cuenta existe en nuestro sistema pero hay un problema con la autenticación. Por favor, restablece tu contraseña o contacta con soporte."};if(n.empty&&a.length>0)return{success:!1,message:"Tu cuenta existe en el sistema de autenticación pero falta información en la base de datos. Por favor, contacta con soporte."};if(!n.empty&&a.length>0)return{success:!0,message:"Tu cuenta está correctamente sincronizada."};else return{success:!1,message:"No existe una cuenta con este correo electrónico."}}catch(e){return console.error("Error al verificar sincronización de usuario:",e),{success:!1,message:"Error al verificar la información de la cuenta."}}}async deleteAccount(e){try{let t=D.auth.currentUser;if(!t)return{success:!1,message:"No hay usuario autenticado."};if(e&&t.email)try{let r=A.V.credential(t.email,e);await (0,A.a3)(t,r)}catch(e){return console.error("Error al reautenticar:",e),{success:!1,message:"La contraseña proporcionada es incorrecta. Por favor, verifica e inténtalo de nuevo."}}let r=t.uid,n=(0,O.writeBatch)(D.db),a=(0,O.query)((0,O.collection)(D.db,"homes"),(0,O.where)("memberIds","array-contains",r));for(let e of(await (0,O.getDocs)(a)).docs){let t=e.data();if(1===t.memberIds.length&&t.memberIds[0]===r){let e=(0,O.query)((0,O.collection)(D.db,"tasks"),(0,O.where)("homeId","==",t.id));(await (0,O.getDocs)(e)).docs.forEach(e=>{n.delete((0,O.doc)(D.db,"tasks",e.id))}),n.delete((0,O.doc)(D.db,"homes",t.id))}else{let e=t.memberIds.filter(e=>e!==r);n.update((0,O.doc)(D.db,"homes",t.id),{memberIds:e});let a=(0,O.query)((0,O.collection)(D.db,"tasks"),(0,O.where)("homeId","==",t.id),(0,O.where)("assignedTo","==",r));(await (0,O.getDocs)(a)).docs.forEach(a=>{let i=t.createdBy;i===r&&(i=e.find(e=>e!==r)||""),n.update((0,O.doc)(D.db,"tasks",a.id),{assignedTo:i,assignedBy:t.createdBy!==r?t.createdBy:e[0]||""})})}}let i=(0,O.query)((0,O.collection)(D.db,"homeInvitations"),(0,O.where)("invitedBy","==",r));(await (0,O.getDocs)(i)).docs.forEach(e=>{n.delete((0,O.doc)(D.db,"homeInvitations",e.id))});let s=(0,O.query)((0,O.collection)(D.db,"homeInvitations"),(0,O.where)("invitedEmail","==",t.email));(await (0,O.getDocs)(s)).docs.forEach(e=>{n.delete((0,O.doc)(D.db,"homeInvitations",e.id))});let o=(0,O.query)((0,O.collection)(D.db,"notifications"),(0,O.where)("userId","==",r));(await (0,O.getDocs)(o)).docs.forEach(e=>{n.delete((0,O.doc)(D.db,"notifications",e.id))});let l=(0,O.doc)(D.db,"users",r);return await t.delete(),n.delete(l),await n.commit(),{success:!0,message:"Cuenta eliminada correctamente."}}catch(e){if(console.error("Error al eliminar la cuenta:",e),"auth/requires-recent-login"===e.code)return{success:!1,message:"Por seguridad, debes volver a iniciar sesión antes de eliminar tu cuenta. Por favor, cierra sesión y vuelve a iniciarla."};return{success:!1,message:e.message||"Error al eliminar la cuenta. Inténtalo de nuevo."}}}async resendVerificationEmail(){try{if(!D.auth.currentUser)return{success:!1,message:"No hay usuario logueado."};let e={url:window.location.origin,handleCodeInApp:!1},t=(0,O.doc)(D.db,"users",D.auth.currentUser.uid);if(!(await (0,O.getDoc)(t)).exists()){let e={name:D.auth.currentUser.displayName||"Usuario",email:D.auth.currentUser.email?.toLowerCase()||"",avatar:D.auth.currentUser.photoURL||"/user.svg",color:M[Math.floor(Math.random()*M.length)],plan:"free",createdAt:(0,O.serverTimestamp)(),lastLoginAt:(0,O.serverTimestamp)()};await (0,O.setDoc)(t,e)}return await (0,A.ag)(D.auth.currentUser,e),{success:!0,message:"Se ha enviado un nuevo correo de verificación. Por favor, revisa tu bandeja de entrada y la carpeta de spam."}}catch(t){console.error("Error al enviar correo de verificación:",t);let e="Error al enviar el correo de verificación. ";return"auth/too-many-requests"===t.code?e+="Has enviado demasiadas solicitudes. Intenta de nuevo más tarde.":"auth/invalid-email"===t.code?e+="El correo electrónico no es válido.":e+=t.message||"Inténtalo de nuevo más tarde.",{success:!1,message:e}}}async resetPassword(e){try{let t={url:window.location.origin+"/login",handleCodeInApp:!0};return await (0,A.a5)(D.auth,e,t),{success:!0,message:"Se ha enviado un correo electrónico para restablecer tu contraseña. Por favor, revisa tu bandeja de entrada."}}catch(t){console.error("Error al enviar correo de recuperación:",t);let e="Error al enviar el correo de recuperación.";switch(t.code){case"auth/user-not-found":e="No existe una cuenta con este correo electrónico.";break;case"auth/invalid-email":e="El correo electrónico no es válido.";break;case"auth/too-many-requests":e="Demasiados intentos. Intenta más tarde.";break;default:e=`Error: ${t.message}`}return{success:!1,message:e}}}async updateCurrentUser(e){if(!D.auth.currentUser)return{success:!1,message:"No hay usuario logueado."};let{password:t,...r}=e;try{if(Object.keys(r).length>0){let e=(0,O.doc)(D.db,"users",D.auth.currentUser.uid);await (0,O.updateDoc)(e,r)}return t&&await (0,A.am)(D.auth.currentUser,t),{success:!0,message:"Perfil actualizado."}}catch(e){return console.error("Error updating profile:",e),{success:!1,message:"Error al actualizar el perfil."}}}async uploadAvatar(e,t){let r=(0,R.ref)(D.storage,`avatars/${e}/${t.name}`);await (0,R.uploadBytes)(r,t);let n=await (0,R.getDownloadURL)(r);return await this.updateCurrentUser({avatar:n}),n}subscribeToUserData(e,t){let r={homes:[],tasks:[],invitations:[],users:[]},n=()=>{},a=()=>{},i=()=>{},s=()=>{},o=(0,O.query)((0,O.collection)(D.db,"homes"),(0,O.where)("memberIds","array-contains",e));n=(0,O.onSnapshot)(o,e=>{r.homes=e.docs.map(e=>({id:e.id,...e.data()})),a&&a(),i&&i();let n=r.homes.map(e=>e.id);if(n.length>0){let e=(0,O.query)((0,O.collection)(D.db,"tasks"),(0,O.where)("homeId","in",n));a=(0,O.onSnapshot)(e,e=>{r.tasks=e.docs.map(e=>({id:e.id,...e.data()})),t(r)});let s=[...new Set(r.homes.flatMap(e=>e.memberIds))];if(s.length>0){let e=(0,O.query)((0,O.collection)(D.db,"users"),(0,O.where)((0,O.documentId)(),"in",s));i=(0,O.onSnapshot)(e,e=>{r.users=e.docs.map(e=>({id:e.id,...e.data()})),t(r)})}else r.users=[]}else r.tasks=[],r.users=[];t(r)});let l=(0,O.query)((0,O.collection)(D.db,"users"),(0,O.where)((0,O.documentId)(),"==",e));return(0,O.getDocs)(l).then(e=>{let n=e.docs[0]?.data();if(n&&n.email){let e=(0,O.query)((0,O.collection)(D.db,"invitations"),(0,O.where)("inviteeEmail","==",n.email));s=(0,O.onSnapshot)(e,e=>{r.invitations=e.docs.map(e=>({id:e.id,...e.data()})),t(r)})}}),()=>{n(),a(),i(),s()}}async addTask(e){if(!D.auth.currentUser)return;if(console.log("Iniciando addTask con datos:",JSON.stringify(e)),e.periodicity!==T.NONE)try{let t=(0,O.doc)(D.db,"users",D.auth.currentUser.uid),r=(await (0,O.getDoc)(t)).data();if("free"===r.plan){console.log("Usuario gratuito detectado, aplicando restricciones");let t=new Date;t.setDate(t.getDate()+90),e.endDate&&new Date(e.endDate)>t&&(console.log("Fecha fin excede el límite para usuario gratuito, ajustando a 90 días"),e.endDate=t.toISOString())}else if("premium"===r.plan&&e.endDate){let t=new Date(e.endDate),r=new Date;r.setDate(r.getDate()+365),t>r&&(console.log("Fecha fin excede el límite para usuario premium, ajustando a 365 días"),e.endDate=r.toISOString())}}catch(e){console.error("Error al verificar límites de usuario:",e)}let t={...e,assignedTo:e.assignedTo??null,status:_.PENDING,createdBy:D.auth.currentUser.uid,createdAt:new Date().toISOString()};if(e.periodicity!==T.NONE)try{let r;console.log("Creando tarea periódica con nuevo formato");let n=new Date(e.dueDate);e.endDate?(r=new Date(e.endDate),isNaN(r.getTime())&&(console.error("Fecha límite inválida:",e.endDate),(r=new Date(n)).setFullYear(r.getFullYear()+1))):(r=new Date(n)).setFullYear(r.getFullYear()+1);let a=Math.ceil((r.getTime()-n.getTime())/864e5)+1;if(a<=0)throw console.error("La fecha fin es anterior o igual a la fecha inicio, no se puede crear la tarea periódica"),Error("La fecha fin debe ser posterior a la fecha inicio");let i={};for(let e=0;e<a;e++){let r=new Date(n);r.setDate(r.getDate()+e),i[e.toString()]={status:_.PENDING,date:r.toISOString(),day:e,assignedTo:t.assignedTo||null}}let s={...t,fechaInicio:n.toISOString(),fechaFin:r.toISOString(),registroDetallado:i};delete s.assignedTo,delete s.registro,console.log("Guardando tarea periódica:",JSON.stringify(s)),await (0,O.addDoc)((0,O.collection)(D.db,"tasks"),s)}catch(e){console.error("Error al crear tarea periódica:",e),console.log("Intentando guardar con formato antiguo como respaldo"),await (0,O.addDoc)((0,O.collection)(D.db,"tasks"),t)}else console.log("Guardando tarea no periódica"),await (0,O.addDoc)((0,O.collection)(D.db,"tasks"),t)}async updateTask(e,t){let r=(0,O.doc)(D.db,"tasks",e),n=await (0,O.getDoc)(r);if(n.exists()){let e=n.data(),a=e.status===_.COMPLETED,i={...t};if(a&&t.status&&t.status!==_.COMPLETED&&(delete i.completedBy,delete i.completedAt),e.periodicity!==T.NONE&&void 0!==t.assignedTo&&e.registroDetallado){let r={...e.registroDetallado};Object.keys(r).forEach(e=>{r[e]={...r[e],assignedTo:t.assignedTo}}),i.registroDetallado=r}await (0,O.updateDoc)(r,i)}}async deleteTask(e,t=!1,r){let n;console.log(">>> [deleteTask] INIT",{taskId:e,deleteAllFuture:t,selectedDate:r});let a=(0,O.doc)(D.db,"tasks",e);try{n=await (0,O.getDoc)(a)}catch(e){console.log("[deleteTask] ERROR getDoc:",e);return}if(!n.exists())return void console.log("[deleteTask] WARN: Task no encontrada:",e);let i=n.data();if(console.log("[deleteTask] Task cargada:",{title:i.title,periodicity:i.periodicity,lenRegistro:i.registroDetallado?Object.keys(i.registroDetallado).length:0}),i.periodicity===T.NONE){console.log("[deleteTask] Tarea no periódica, borrando doc completo"),await (0,O.deleteDoc)(a),console.log("[deleteTask] deleteDoc OK (no periódica)");return}if(!i.registroDetallado||0===Object.keys(i.registroDetallado).length)return void console.log("[deleteTask] WARN: Task periódica sin registroDetallado válido");let s=r?new Date(r):null;if(s||(s=i.dueDate?new Date(i.dueDate):null),!s)return void console.log("[deleteTask] ERROR: No hay selectedDate ni dueDate válido, abortando");s.setHours(0,0,0,0);let o={...i.registroDetallado},l=[],u=[];for(let[e,r]of Object.entries(i.registroDetallado)){if(!r?.date){u.push({dayKey:e,reason:"Fecha inválida",item:r});continue}let n=new Date(r.date);n.setHours(0,0,0,0);let a=!t&&n.getTime()===s.getTime(),i=t&&n.getTime()>=s.getTime();if(a||i){let t=r.status;"Eliminada"!==t?(o[e]={...r,status:"Eliminada"},l.push({dayKey:e,prev:t,next:"Eliminada",date:n.toISOString().slice(0,10)})):u.push({dayKey:e,reason:"Ya estaba Eliminada",date:n.toISOString().slice(0,10)})}else u.push({dayKey:e,reason:t?"Anterior a refDate":"No coincide con selectedDate",date:n.toISOString().slice(0,10)})}if(console.log("[deleteTask] Cambios aplicados:",l),console.log("[deleteTask] Elementos saltados:",u),Object.values(o).every(e=>"Eliminada"===e.status)){console.log("[deleteTask] Todas las entradas están eliminadas, borrando tarea completa");try{await (0,O.deleteDoc)(a),console.log("[deleteTask] deleteDoc OK (todas eliminadas)")}catch(e){console.log("[deleteTask] ERROR borrando doc completo:",e)}}else{console.log("[deleteTask] Guardando registroDetallado actualizado en Firestore");try{await (0,O.updateDoc)(a,{registroDetallado:o}),console.log("[deleteTask] updateDoc OK")}catch(e){console.log("[deleteTask] ERROR persistiendo en Firestore:",e)}}}async completeTask(e,t){let r=(0,O.doc)(D.db,"tasks",e),n=await (0,O.getDoc)(r);if(!n.exists())return;let a=n.data();if(console.log("Tarea antes de completar:",a),a.periodicity!==T.NONE){if(a.registroDetallado){console.log("Completando tarea periódica con registroDetallado");try{let e=new Date(a.fechaInicio),n=new Date;n.setHours(0,0,0,0),e.setHours(0,0,0,0);let i=Math.floor((n.getTime()-e.getTime())/864e5),s=i.toString();if(console.log("Días transcurridos desde inicio:",i),a.registroDetallado[s]){let e={...a.registroDetallado},n=e[s],i=n.assignedTo||t;e[s]={...n,status:_.COMPLETED,completedBy:t,completedAt:new Date().toISOString(),assignedTo:i},await (0,O.updateDoc)(r,{registroDetallado:e,status:_.COMPLETED,completedBy:t,completedAt:new Date().toISOString()}),console.log("RegistroDetallado actualizado para el día",s,"assignedTo:",i)}else console.error("No existe entrada en registroDetallado para el día:",s),await (0,O.updateDoc)(r,{status:_.COMPLETED,completedBy:t,completedAt:new Date().toISOString()})}catch(e){console.error("Error al actualizar registroDetallado:",e),await (0,O.updateDoc)(r,{status:_.COMPLETED,completedBy:t,completedAt:new Date().toISOString()})}}else if(a.fechaInicio&&a.fechaFin&&a.registro){console.log("Completando tarea periódica con formato antiguo (registro)");try{let e=new Date(a.fechaInicio),n=new Date;n.setHours(0,0,0,0),e.setHours(0,0,0,0);let i=Math.floor((n.getTime()-e.getTime())/864e5);if(console.log("Días transcurridos desde inicio:",i),i>=0&&i<a.registro.length){let e=a.registro.split("");e[i]="2";let n=a.assignedTo||t;await (0,O.updateDoc)(r,{registro:e.join(""),status:_.COMPLETED,completedBy:t,completedAt:new Date().toISOString(),assignedTo:n}),console.log("Registro actualizado para el día",i,"assignedTo:",n)}else{console.error("El día actual está fuera del rango del registro:",i,"longitud registro:",a.registro.length);let e=a.assignedTo||t;await (0,O.updateDoc)(r,{status:_.COMPLETED,completedBy:t,completedAt:new Date().toISOString(),assignedTo:e})}}catch(n){console.error("Error al actualizar registro de tarea periódica:",n);let e=a.assignedTo||t;await (0,O.updateDoc)(r,{status:_.COMPLETED,completedBy:t,completedAt:new Date().toISOString(),assignedTo:e})}}}else{console.log("Completando tarea no periódica");let e=a.assignedTo||t;await (0,O.updateDoc)(r,{status:_.COMPLETED,completedBy:t,completedAt:new Date().toISOString(),assignedTo:e})}console.log("Tarea completada")}async updateTaskStatus(e,t,r,n){console.log("\uD83D\uDD25 updateTaskStatus called:",{taskId:e,userId:t,status:r,dayIndex:n});let a=(0,O.doc)(D.db,"tasks",e),i=await (0,O.getDoc)(a);if(!i.exists())return void console.error("Tarea no encontrada");let s=i.data();if(console.log("Actualizando estado de tarea:",s.title,"a",r,"dayIndex:",n),s.periodicity!==T.NONE&&s.registroDetallado&&void 0!==n)try{let e={...s.registroDetallado};if(!e[n])return void console.error("No existe entrada en registroDetallado para el índice:",n);let i=e[n],o=r===_.COMPLETED&&(!i.assignedTo||null===i.assignedTo);e[n]={...i,status:r,...r===_.COMPLETED&&{completedBy:t,completedAt:new Date().toISOString(),...o?{assignedTo:t}:{}}},await (0,O.updateDoc)(a,{registroDetallado:e,status:r}),console.log("RegistroDetallado actualizado para el índice",n,"nuevo estado:",r)}catch(e){console.error("Error al actualizar registroDetallado:",e),await (0,O.updateDoc)(a,{status:r})}else console.log("Actualizando tarea no periódica o con formato antiguo"),await (0,O.updateDoc)(a,{status:r})}async markTaskAsPerformed(e,t,r){await this.updateTaskStatus(e,t,_.COMPLETED,r)}async markTaskAsNotDone(e,t,r){await this.updateTaskStatus(e,t,_.NOT_DONE,r)}getStats(e,t,r,n){return t?e.filter(e=>e.homeId===t&&e.completedBy===r&&e.status===_.COMPLETED&&e.completedAt).filter(e=>{let t=new Date(e.completedAt);if("weekly"===n){let e=new Date,r=new Date(e),n=(e.getDay()+6)%7;r.setDate(e.getDate()-n),r.setHours(0,0,0,0);let a=new Date(r);return a.setDate(r.getDate()+6),a.setHours(23,59,59,999),t>=r&&t<=a}if("monthly"===n){let e=new Date;return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}let r=new Date;return t.getFullYear()===r.getFullYear()}).reduce((e,t)=>(e.tasksCompleted+=1,e.pointsEarned+=t.points,e),{tasksCompleted:0,pointsEarned:0}):{tasksCompleted:0,pointsEarned:0}}async createHome(e,t){let r=(0,O.doc)((0,O.collection)(D.db,"homes")),n={name:e,adminIds:[t.id],memberIds:[t.id]};await (0,O.setDoc)(r,n)}async updateHome(e,t){await (0,O.updateDoc)((0,O.doc)(D.db,"homes",e),t)}async sendHomeInvitation(e,t,r){let n=(0,O.query)((0,O.collection)(D.db,"users"),(0,O.where)("email","==",e.toLowerCase())),a=await (0,O.getDocs)(n);if(a.empty)return{success:!1,message:"Usuario no encontrado. Asegúrate de que el correo esté registrado."};let i=a.docs[0],s={id:i.id,...i.data()};if(s.id===r.id)return{success:!1,message:"No puedes invitarte a ti mismo."};if(t.memberIds.includes(s.id))return{success:!1,message:"Este usuario ya es miembro de la casa."};let o=(0,O.query)((0,O.collection)(D.db,"invitations"),(0,O.where)("homeId","==",t.id),(0,O.where)("inviteeEmail","==",e.toLowerCase()));if(!(await (0,O.getDocs)(o)).empty)return{success:!1,message:"Ya se ha enviado una invitación a este usuario para esta casa."};let l={homeId:t.id,homeName:t.name,invitedBy:r.id,inviteeEmail:e.toLowerCase(),status:"pending"};return await (0,O.addDoc)((0,O.collection)(D.db,"invitations"),l),{success:!0,message:`\xa1Invitaci\xf3n enviada a ${s.name}!`}}async respondToInvitation(e,t,r){let n=(0,O.doc)(D.db,"invitations",e),a=await (0,O.getDoc)(n);if(a.exists()&&a.data().inviteeEmail===r.email){if(t){let e=a.data().homeId,t=(0,O.doc)(D.db,"homes",e),n=await (0,O.getDoc)(t);if(n.exists()){let e=n.data();e.memberIds.includes(r.id)||await (0,O.updateDoc)(t,{memberIds:[...e.memberIds,r.id]})}}await (0,O.deleteDoc)(n)}}async leaveHome(e,t){try{let r=(0,O.doc)(D.db,"homes",e),n=await (0,O.getDoc)(r);if(!n.exists())return{success:!1,message:"La casa no existe."};let a=n.data();if(a.adminIds.includes(t)&&1===a.adminIds.length&&a.memberIds.length>1)return{success:!1,message:"Eres el único administrador. Asigna otro administrador antes de salir."};let i=a.memberIds.filter(e=>e!==t),s=a.adminIds.filter(e=>e!==t);if(0===i.length)return await (0,O.deleteDoc)(r),{success:!0,message:"Has salido de la casa y ha sido eliminada por no tener miembros."};return await (0,O.updateDoc)(r,{memberIds:i,adminIds:s}),{success:!0,message:"Has salido de la casa correctamente."}}catch(e){return console.error("Error al salir de la casa:",e),{success:!1,message:"Error al salir de la casa."}}}async removeUserFromHome(e,t){let r=(0,O.doc)(D.db,"homes",e),n=await (0,O.getDoc)(r);if(!n.exists())return;let a=n.data();if(a.adminIds.includes(t)&&1===a.adminIds.length&&a.memberIds.length>1)throw Error("No puedes eliminar al único administrador si hay más miembros.");let i=a.memberIds.filter(e=>e!==t),s=a.adminIds.filter(e=>e!==t);if(0===i.length)return void await (0,O.deleteDoc)(r);await (0,O.updateDoc)(r,{memberIds:i,adminIds:s});let o=(0,O.query)((0,O.collection)(D.db,"tasks"),(0,O.where)("homeId","==",e),(0,O.where)("assignedTo","==",t)),l=await (0,O.getDocs)(o),u=(0,O.writeBatch)(D.db);l.forEach(e=>{u.update((0,O.doc)(D.db,"tasks",e.id),{assignedTo:null})}),await u.commit();try{let r=(0,O.doc)(D.db,"users",t);if(!(await (0,O.getDoc)(r)).exists())return;let{notificationService:n}=await Promise.resolve(w("g8dzF"));await n.sendNotification({userId:t,type:"home_removal",title:"Has sido eliminado de un hogar",message:`Has sido eliminado del hogar "${a.name}"`,metadata:{homeId:e,homeName:a.name},read:!1}),console.log(`Notificaci\xf3n enviada al usuario ${t} por eliminaci\xf3n del hogar ${e}`)}catch(e){console.error("Error al enviar notificación de eliminación de hogar:",e)}}togglePremium(e){return new Promise(async t=>{let r=(0,O.doc)(D.db,"users",e),n=await (0,O.getDoc)(r);if(n.exists()){let e="free"===n.data().plan?"premium":"free";await (0,O.updateDoc)(r,{plan:e})}t()})}async getNotifications(e){try{return await K.notificationService.getNotificationsForUser(e)}catch(e){return console.error("Error al obtener notificaciones:",e),[]}}async markNotificationAsRead(e){try{await K.notificationService.markAsRead(e)}catch(e){console.error("Error al marcar notificación como leída:",e)}}async updatePeriodicTaskDayAssignment(e,t,r,n){try{if(!n)throw Error("Debe proporcionarse selectedDate");console.log("\uD83D\uDD27 updatePeriodicTaskDayAssignment llamado con:",{taskId:e,dayIndex:t,assignedTo:r,selectedDate:n});let a=(0,O.doc)(D.db,"tasks",e),i=await (0,O.getDoc)(a);if(!i.exists())throw Error("Tarea no encontrada");let s=i.data();if(s.periodicity===T.NONE)throw Error("Esta función solo es para tareas periódicas");if(!s.registroDetallado||0===Object.keys(s.registroDetallado).length)throw Error("Tarea periódica sin registroDetallado válido");console.log("\uD83D\uDCCA registroDetallado actual:",s.registroDetallado);let o=new Date(n);o.setHours(0,0,0,0);let l=Object.keys(s.registroDetallado).find(e=>{let t=s.registroDetallado[e];if(!t)return!1;let r=t.date?new Date(t.date):s.fechaInicio?G(new Date(s.fechaInicio),parseInt(e)):null;return!!r&&(r.setHours(0,0,0,0),r.getTime()===o.getTime())});if(!l)throw Error("No se encontró el día específico para actualizar");let u=s.registroDetallado[l].assignedTo;await (0,O.updateDoc)(a,{[`registroDetallado.${l}.assignedTo`]:r}),console.log(`\u{2705} Asignaci\xf3n actualizada: ${u} \u{2192} ${r} para dayKey ${l}`)}catch(e){throw console.error("❌ Error al actualizar asignación del día:",e),e}}getPeriodicTaskDayInfo(e,t){if(e.registroDetallado){let r=t.toString(),n=e.registroDetallado[r];if(n)return{status:n.status,assignedTo:n.assignedTo||null}}if(e.registro&&t>=0&&t<e.registro.length){let r;switch(e.registro[t]){case"2":r=_.COMPLETED;break;case"1":r=_.IN_PROGRESS;break;case"3":case"4":r=_.NOT_DONE;break;default:r=_.PENDING}return{status:r,assignedTo:e.assignedTo||null}}return{status:_.PENDING,assignedTo:e.assignedTo||null}}subscribeToNotifications(e,t){try{return K.notificationService.subscribeToUserNotifications(e,t)}catch(e){return console.error("Error al suscribirse a notificaciones:",e),()=>{}}}};var K=w("g8dzF");const Y=()=>{let[e,t]=(0,S.useState)([]),[r,n]=(0,S.useState)([]),[a,i]=(0,S.useState)([]),[s,o]=(0,S.useState)([]),[l,u]=(0,S.useState)([]),[c,d]=function(e,t){let[r,n]=(0,S.useState)(()=>{if("undefined"==typeof window)return null;try{let t=window.localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return console.error(e),t}});return(0,S.useEffect)(()=>{let a=a=>{if(a.key===e)try{let e=a.newValue?JSON.parse(a.newValue):t;JSON.stringify(e)!==JSON.stringify(r)&&n(e)}catch(e){console.error("Error parsing localStorage change",e)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}},[e,t]),[r,t=>{try{let a=t instanceof Function?t(r):t;JSON.stringify(a)!==JSON.stringify(r)&&(n(a),"undefined"!=typeof window&&window.localStorage.setItem(e,JSON.stringify(a)))}catch(e){console.error(e)}}]}("houseZen-current-home",null),[h,f]=(0,S.useState)("loading"),[p,m]=(0,S.useState)(null);(0,S.useEffect)(()=>{f("loading");let e=Q.onAuthStateChange(e=>{e?(m(e),f("logged-in")):(m(null),f("logged-out"),d(null))});return()=>e()},[]),(0,S.useEffect)(()=>{if(!p){n([]),i([]),o([]),t([]),u([]);return}let e=null;if(Q.subscribeToNotifications)e=Q.subscribeToNotifications(p.id,e=>{u(e)});else if(K.notificationService.subscribeToUserNotifications)e=K.notificationService.subscribeToUserNotifications(p.id,e=>{u(e)});else if(Q.getNotifications){(async()=>{try{if(Q.getNotifications){let e=await Q.getNotifications(p.id);u(e)}else console.warn("La función getNotifications no está disponible")}catch(e){console.error("Error al cargar notificaciones iniciales:",e)}})();let t=setInterval(async()=>{try{if(Q.getNotifications){let e=await Q.getNotifications(p.id);u(e)}else console.warn("La función notificationInterval no está disponible")}catch(e){console.error("Error al actualizar notificaciones:",e)}},5e3);e=()=>clearInterval(t)}let r=Q.subscribeToUserData(p.id,e=>{if(n(e.homes),i(e.tasks),o(e.invitations),t(e.users),null===c&&e.homes.length>0){let t=e.homes[0].id;t!==c&&d(t)}else if(c&&!e.homes.some(e=>e.id===c)){let t=e.homes[0]?.id||null;t!==c&&d(t)}});return()=>{r(),e&&e()}},[p]);let g=(0,S.useMemo)(()=>r,[r]),y=(0,S.useMemo)(()=>{let e=r.find(e=>e.id===c);if(e){let t=a.filter(t=>t.homeId===e.id&&(t.status===_.PENDING||t.status===_.IN_PROGRESS)),r=p?.plan||"free",n=t.length;return"premium"!==r&&(n=t.filter(e=>e.periodicity===T.NONE).length),{...e,activeTaskCount:n}}},[c,r,a,p]),v=(0,S.useMemo)(()=>y?e.filter(e=>y.memberIds.includes(e.id)):[],[y,e]),b=(0,S.useMemo)(()=>c?a.filter(e=>e.homeId===c):[],[a,c]),x=(0,S.useMemo)(()=>s.filter(e=>"pending"===e.status),[s]),w=(0,S.useMemo)(()=>l.filter(e=>!e.read),[l]),k=async()=>{try{return await Q.googleLogin()}catch(e){return console.error("Error en googleLogin:",e),{success:!1,message:e.message||"Error al iniciar sesión con Google"}}},E=async e=>{p&&await Q.createHome(e,p)},N=async(e,t)=>p&&y?Q.sendHomeInvitation(e,y,p):{success:!1,message:"Error interno"},I=async(e,t)=>{p&&await Q.respondToInvitation(e,t,p)},C=(0,S.useCallback)((e,t)=>Q.getStats(a,c,e,t),[a,c]),D=async()=>{Q.togglePremium&&p&&await Q.togglePremium(p.id)},A=async e=>p?Q.deleteAccount(e):{success:!1,message:"No hay usuario conectado"},j=async e=>{try{Q.markNotificationAsRead?await Q.markNotificationAsRead(e):await K.notificationService.markAsRead(e),u(t=>t.map(t=>t.id===e?{...t,read:!0}:t))}catch(e){console.error("Error al marcar notificación como leída:",e)}};return{authStatus:h,currentUser:p,currentHome:y,userHomes:g,tasks:a,tasksForCurrentHome:b,users:e,membersOfCurrentHome:v,pendingInvitations:x,login:(e,t)=>Q.login(e,t),register:(e,t,r)=>Q.register(e,t,r),resetPassword:e=>Q.resetPassword(e),googleLogin:k,logout:()=>Q.logout(),updateCurrentUser:e=>Q.updateCurrentUser(e),uploadAvatar:e=>{if(!p)throw Error("No user logged in");return Q.uploadAvatar(p.id,e)},addTask:e=>Q.addTask(e),updateTask:(e,t)=>Q.updateTask(e,t),deleteTask:(e,t=!1,r)=>Q.deleteTask(e,t,r),completeTask:(e,t)=>Q.completeTask(e,t),getStats:C,updateTaskStatus:Q.updateTaskStatus.bind(Q),updatePeriodicTaskDayAssignment:Q.updatePeriodicTaskDayAssignment.bind(Q),getPeriodicTaskDayInfo:Q.getPeriodicTaskDayInfo.bind(Q),createHome:E,updateHome:(e,t)=>Q.updateHome(e,t),sendHomeInvitation:N,respondToInvitation:I,setCurrentHomeId:d,notifications:l,unreadNotifications:w,markNotificationAsRead:j,togglePremium:Q.togglePremium?D:void 0,leaveHome:(e,t)=>Q.leaveHome(e,t),removeUserFromHome:(e,t)=>Q.removeUserFromHome?Q.removeUserFromHome(e,t):Promise.resolve(),deleteAccount:A,resendVerificationEmail:()=>Q.resendVerificationEmail()}},X=(e,t,r,n=[])=>{let a=e?.plan||"free",i="premium"===a;return{plan:a,isPremium:i,checkLimit:(e,a)=>{if(i)return{isLimited:!1};switch(e){case C.HOMES:if(t.length>=1)return{isLimited:!0,message:"El plan gratuito permite solo 1 casa. ¡Mejora a premium para crear casas ilimitadas!"};break;case C.MEMBERS:if(r&&r.memberIds.length>=2)return{isLimited:!0,message:"El plan gratuito permite hasta 2 miembros por casa. ¡Invita a más personas con el plan premium!"};break;case C.TASKS:if(r&&(r.activeTaskCount||0)>=20)return{isLimited:!0,message:"Has alcanzado el límite de 20 tareas activas. ¡Mejora a premium para tener tareas ilimitadas!"};break;case C.PERIODIC_TASKS:if(a&&a.periodicity!==T.NONE&&r){let e=new Set;if(n.filter(e=>e.homeId===r.id&&e.periodicity!==T.NONE).forEach(t=>{e.add(t.title)}),e.size>=3&&!e.has(a.title))return{isLimited:!0,message:"El plan gratuito permite hasta 3 tareas periódicas diferentes. ¡Mejora a premium para tener tareas periódicas ilimitadas!"}}}return{isLimited:!1}}}};w("acw62"),w("acw62");const J=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Z=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})}),ee=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0z"})}),et=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-6.364-.386 1.591-1.591M3 12h2.25m.386-6.364 1.591 1.591M12 12a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"})}),er=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25c0 5.385 4.365 9.75 9.75 9.75 2.138 0 4.124-.589 5.752-1.599z"})}),en=({className:e})=>(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:[(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 0 1 0 1.905c-.008.379.137.752.43.992l1.004.827a1.125 1.125 0 0 1 .26 1.431l-1.296 2.247a1.125 1.125 0 0 1-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.6 6.6 0 0 1-.22.128c-.332.183-.582.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.37-.49l-1.296-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 0 1 0-1.905c.008-.379-.137-.752-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.431l1.296-2.247a1.125 1.125 0 0 1 1.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.213-1.281Z"}),(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),ea=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),ei=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),es=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"})}),eo=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})}),el=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})}),eu=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})}),ec=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e||"w-6 h-6",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),ed=({className:e})=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:e||"w-6 h-6",children:(0,E.jsx)("path",{fillRule:"evenodd",d:"M12 2.25a9.75 9.75 0 1 0 0 19.5 9.75 9.75 0 0 0 0-19.5Zm4.53 7.28a.75.75 0 0 1 0 1.06l-5.25 5.25a.75.75 0 0 1-1.06 0l-2.25-2.25a.75.75 0 0 1 1.06-1.06l1.72 1.72 4.72-4.72a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"})});var S=(w("acw62"),w("acw62"));const eh=()=>{let[e,t]=(0,S.useState)("web");return(0,S.useEffect)(()=>{t((()=>{let e=navigator.userAgent.toLowerCase();return/android/.test(e)?"android":/iphone|ipad|ipod/.test(e)?"ios":"web"})())},[]),{platform:e,isNative:"web"!==e,isWeb:"web"===e}};var ef=({className:e=""})=>{let{platform:t}=eh(),{authStatus:r}=Y(),[n,a]=(0,S.useState)(null),[i,s]=(0,S.useState)(!1),[o,l]=(0,S.useState)(!1),[u,c]=(0,S.useState)(!1);(0,S.useEffect)(()=>{(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://"))&&l(!0);let e=window.matchMedia("(display-mode: standalone)"),t=e=>{l(e.matches)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),(0,S.useEffect)(()=>{let e=e=>{e.preventDefault(),a(e),console.log("Evento beforeinstallprompt capturado",e)};window.addEventListener("beforeinstallprompt",e);let t=()=>{l(!0),a(null),console.log("App instalada correctamente")};return window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)}},[]),(0,S.useEffect)(()=>{if("android"===t&&n&&!u&&!o){let e=setTimeout(()=>{d(),c(!0)},3e3);return()=>clearTimeout(e)}},[n,t,u,o]);let d=async()=>{if("android"===t)if(n)try{await n.prompt();let{outcome:e}=await n.userChoice;a(null),"accepted"===e?(console.log("Usuario aceptó la instalación"),l(!0)):console.log("Usuario rechazó la instalación")}catch(e){console.error("Error al mostrar el prompt de instalación:",e)}else alert('Para instalar la aplicación: \n1. Abre el menú de Chrome (tres puntos) \n2. Selecciona "Instalar aplicación" o "Añadir a pantalla de inicio"');else"ios"===t&&s(!0)};return o?null:(0,E.jsxs)("div",{className:`flex items-center gap-2 ${e}`,children:["logged-in"!==r&&("android"===t?(0,E.jsxs)("button",{onClick:d,className:"flex items-center justify-center gap-1 bg-green-600 hover:bg-green-700 text-white font-medium py-1 px-3 rounded-lg text-sm transition-transform duration-200 hover:scale-105","aria-label":"Instalar en Android",children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,E.jsx)("path",{d:"M17.523 15.3414c-.5511 0-.9993-.4486-.9993-.9997s.4483-.9993.9993-.9993c.5511 0 .9993.4483.9993.9993.0001.5511-.4482.9997-.9993.9997m-11.046 0c-.5511 0-.9993-.4486-.9993-.9997s.4482-.9993.9993-.9993c.5511 0 .9993.4483.9993.9993 0 .5511-.4483.9997-.9993.9997m11.4045-6.02l1.9973-3.4592a.416.416 0 00-.1521-.5676.416.416 0 00-.5676.1521l-2.0223 3.503C15.5902 8.2439 13.8533 7.8508 12 7.8508s-3.5902.3931-5.1367 1.0729L4.841 5.4207a.4161.4161 0 00-.5677-.1521.4157.4157 0 00-.1521.5676l1.9973 3.4592C2.6889 11.1867.3432 14.6589 0 18.761h24c-.3435-4.1021-2.6892-7.5743-6.1185-9.4396"})}),(0,E.jsx)("span",{children:"Instalar"})]}):"ios"===t?(0,E.jsxs)("button",{onClick:()=>s(!0),className:"flex items-center justify-center gap-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-1 px-3 rounded-lg text-sm transition-transform duration-200 hover:scale-105","aria-label":"Instalar en iOS",children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,E.jsx)("path",{d:"M16.462 8.583c-.307 0-1.085.674-2.081.674-.997 0-1.798-.674-2.106-.674-1.419 0-3.333 2.76-3.333 5.461 0 2.701 2.135 7.046 3.554 7.046.673 0 1.419-.674 2.39-.674.949 0 1.491.674 2.164.674 1.419 0 3.333-3.986 3.333-6.686-.025 0-2.341-.842-2.341-3.554 0-2.39 1.995-3.277 2.045-3.277-.05-.125-1.344-2.736-3.625-2.736zM16.307 3c.05 1.545-1.142 3.089-2.561 3.089-1.394 0-2.786-1.545-2.736-3.089 0-1.545 1.242-3.089 2.736-3.089 1.444 0 2.511 1.545 2.561 3.089z"})}),(0,E.jsx)("span",{children:"Instalar"})]}):null),i&&(0,E.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg p-6 max-w-sm w-full shadow-xl transform translate-y-28",children:[(0,E.jsx)("h3",{className:"text-lg font-bold mb-4 text-slate-900 dark:text-white",children:"Instalar en iOS"}),(0,E.jsxs)("ol",{className:"list-decimal pl-5 mb-4 text-slate-700 dark:text-slate-300 space-y-3",children:[(0,E.jsxs)("li",{children:["Toca el icono de compartir en Safari"," ",(0,E.jsx)("span",{className:"inline-block",children:"⎙"})]}),(0,E.jsx)("li",{children:'Desplázate hacia abajo y toca "Añadir a pantalla de inicio"'}),(0,E.jsx)("li",{children:'Toca "Añadir" en la esquina superior derecha'})]}),(0,E.jsx)("div",{className:"flex justify-end mt-4",children:(0,E.jsx)("button",{onClick:()=>s(!1),className:"bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg",children:"Entendido"})})]})})]})},ep=({currentUser:e,currentHome:t,userHomes:r,onHomeChange:n,currentView:a,onViewChange:i,onNewTaskClick:s,onLogout:o,theme:l,onToggleTheme:u,onNotificationsClick:c,unreadNotifications:d})=>(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("header",{className:"sticky top-0 z-30 bg-white/80 dark:bg-slate-900/80 shadow-md backdrop-blur-sm",children:(0,E.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,E.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,E.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,E.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-primary-600 dark:text-primary-400",children:"HouseZen"}),r.length>0&&(0,E.jsx)("select",{value:t?.id||"",onChange:e=>n(e.target.value),className:"pl-2 pr-2 py-1 bg-white dark:bg-slate-800 border border-primary-200 dark:border-primary-700 rounded-lg text-sm font-semibold focus:ring-2 focus:ring-primary-500 cursor-pointer shadow-sm max-w-[160px] sm:max-w-xs",children:r.map(e=>(0,E.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,E.jsxs)("div",{className:"flex items-center gap-1",children:[(0,E.jsx)("img",{className:"hidden",src:e.avatar||"/user.svg",alt:e.name,onError:e=>{e.target.src="/user.svg"}}),(0,E.jsx)(ef,{className:"ml-1"}),(0,E.jsxs)("button",{onClick:c,className:"p-1 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 relative","aria-label":"Notificaciones",children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),d>0&&(0,E.jsx)("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-500 rounded-full",children:d>9?"9+":d})]}),(0,E.jsx)("button",{onClick:()=>i(I.SETTINGS),className:"p-1 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Ajustes",children:(0,E.jsx)(en,{className:"h-6 w-6"})}),(0,E.jsx)("button",{onClick:u,className:"p-1 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Cambiar tema",children:"light"===l?(0,E.jsx)(er,{className:"h-6 w-6"}):(0,E.jsx)(et,{className:"h-6 w-6"})}),(0,E.jsx)("button",{onClick:o,className:"p-1 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700","aria-label":"Cerrar sesión",children:(0,E.jsx)(es,{className:"h-6 w-6"})})]})]})})}),(0,E.jsxs)("nav",{className:"flex items-center justify-between p-2 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm border-t border-slate-200 dark:border-slate-700 fixed bottom-0 left-0 right-0 z-20",children:[(0,E.jsxs)("button",{disabled:!t,onClick:()=>t&&i(I.DASHBOARD),className:`flex-1 flex flex-col items-center py-1 text-xs font-medium ${a===I.DASHBOARD?"text-primary-600":"text-slate-600"} ${!t?"opacity-50 cursor-not-allowed":""}`,children:[(0,E.jsx)(ee,{className:"w-6 h-6"}),"Tareas"]}),t&&(0,E.jsxs)("button",{onClick:s,className:"flex flex-col items-center -mt-6",children:[(0,E.jsx)("div",{className:"bg-primary-600 text-white rounded-full p-3 shadow-lg border-4 border-white dark:border-slate-900",children:(0,E.jsx)(J,{className:"w-6 h-6"})}),(0,E.jsx)("span",{className:"text-xs font-medium mt-1 text-primary-600",children:"Añadir"})]}),(0,E.jsxs)("button",{disabled:!t,onClick:()=>t&&i(I.STATS),className:`flex-1 flex flex-col items-center py-1 text-xs font-medium ${a===I.STATS?"text-primary-600":"text-slate-600"} ${!t?"opacity-50 cursor-not-allowed":""}`,children:[(0,E.jsx)(Z,{className:"w-6 h-6"}),"Estadísticas"]})]})]}),S=w("acw62");w("acw62");var em=({task:e,users:t,onEdit:r,onDelete:n,onComplete:a,onUpdateStatus:i,onDragStart:s,onTaskClick:o,onUpdatePeriodicTaskDayStatus:l,getPeriodicTaskDayInfo:u})=>{let c=(()=>{if(e.periodicity!==T.NONE&&e.registroDetallado){let r=new Date(e.dueDate);for(let[n,a]of(r.setHours(0,0,0,0),Object.entries(e.registroDetallado)))if(a.date){let e=new Date(a.date);if(e.setHours(0,0,0,0),e.getTime()===r.getTime()&&a.assignedTo)return t.find(e=>e.id===a.assignedTo)||null}else if(void 0!==a.day){let n=new Date(e.fechaInicio||e.dueDate);n.setHours(0,0,0,0);let i=new Date(n);if(i.setDate(i.getDate()+a.day),i.setHours(0,0,0,0),i.getTime()===r.getTime()&&a.assignedTo)return t.find(e=>e.id===a.assignedTo)||null}}return e.assignedTo?t.find(t=>t.id===e.assignedTo):null})(),d=(()=>{if(e.periodicity===T.NONE||!e.fechaInicio)return null;let t=new Date(e.dueDate),r=new Date(e.fechaInicio);return t.setHours(0,0,0,0),r.setHours(0,0,0,0),Math.floor((t.getTime()-r.getTime())/864e5)})(),h=e.periodicity!==T.NONE&&null!==d,f=async t=>{h&&l?await l(e.id,d,t,new Date(e.dueDate)):await i(t)},p=async()=>{h&&l?await l(e.id,d,_.COMPLETED):await a()};return(0,E.jsxs)("div",{draggable:!0,onDragStart:s,className:"bg-white dark:bg-slate-900/70 p-2 rounded-lg shadow-sm border-l-4 transition-all duration-200 hover:scale-[1.03] transform-gpu cursor-grab active:cursor-grabbing active:opacity-50 overflow-hidden",style:{borderColor:c?c.color:"#9ca3af"},onClick:t=>{(t.target===t.currentTarget||"BUTTON"!==t.target.tagName)&&o(e)},children:[(0,E.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,E.jsxs)("div",{className:"flex items-center gap-1 max-w-[65%] sm:max-w-[75%]",children:[(0,E.jsx)("span",{className:"text-lg sm:text-xl flex-shrink-0",children:e.emoji}),(0,E.jsx)("div",{className:"w-full",children:(0,E.jsx)("h3",{className:"font-bold text-slate-800 dark:text-slate-100 text-xs sm:text-sm truncate",children:e.title})})]}),(0,E.jsxs)("div",{className:"flex items-center gap-1 ml-1 flex-shrink-0",children:[c&&(0,E.jsxs)("div",{className:"flex items-center gap-1",children:[(0,E.jsx)("img",{src:c.avatar,alt:c.name,className:"hidden"}),(0,E.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 truncate max-w-[40px] sm:max-w-[60px]",children:c.name})]}),(0,E.jsxs)("span",{className:"flex-shrink-0 bg-yellow-400 text-yellow-900 text-xs font-bold px-1 py-0.5 rounded-full",children:[e.points," pts"]})]})]}),(0,E.jsx)("div",{className:"flex flex-col gap-1",children:(0,E.jsxs)("div",{className:"flex gap-1 w-full",children:[(0,E.jsx)("div",{className:"flex-1",children:(()=>{switch(e.status){case _.PENDING:return(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),f(_.IN_PROGRESS)},className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white text-xs font-bold py-1 px-2 rounded-md transition-colors",children:"Empezar"});case _.IN_PROGRESS:return(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),p()},className:"flex-1 bg-green-500 hover:bg-green-600 text-white text-xs font-bold py-1 px-2 rounded-md transition-colors",children:"Completar"});case _.NOT_DONE:return(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),f(_.PENDING)},className:"flex-1 bg-gray-500 hover:bg-gray-600 text-white text-xs font-bold py-1 px-2 rounded-md transition-colors",children:"Reactivar"});case _.COMPLETED:return(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),f(_.IN_PROGRESS)},className:"flex-1 bg-purple-500 hover:bg-purple-600 text-white text-xs font-bold py-1 px-2 rounded-md transition-colors",children:"Reabrir"});default:return null}})()}),(0,E.jsx)("div",{className:"flex-1",children:(()=>{switch(e.status){case _.PENDING:return(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),f(_.NOT_DONE)},className:"flex-1 bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded-md transition-colors",children:"Rechazar"});case _.IN_PROGRESS:return(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),f(_.PENDING)},className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-white text-xs font-bold py-1 px-2 rounded-md transition-colors",children:"Pendiente"});case _.COMPLETED:return(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),f(_.NOT_DONE)},className:"flex-1 bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-1 px-2 rounded-md transition-colors",children:"Rechazar"});case _.NOT_DONE:return(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),f(_.IN_PROGRESS)},className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white text-xs font-bold py-1 px-2 rounded-md transition-colors",children:"Empezar"});default:return null}})()}),(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),r()},className:"w-8 h-7 bg-blue-100 hover:bg-blue-200 text-blue-700 text-xs font-medium rounded-md transition-colors flex items-center justify-center","aria-label":"Editar",children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"w-8 h-7 bg-red-100 hover:bg-red-200 text-red-700 text-xs font-medium rounded-md transition-colors flex items-center justify-center","aria-label":"Eliminar",children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]})};w("acw62"),w("acw62");var eg=({isOpen:e,onClose:t,children:r})=>e?(0,E.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:t,children:(0,E.jsx)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:r})}):null,S=w("acw62"),ey=({task:e,users:t,onUpdateDayAssignment:r,onUpdateDayStatus:n,getPeriodicTaskDayInfo:a})=>{let[i,s]=(0,S.useState)({}),[o,l]=(0,S.useState)({}),[u,c]=(0,S.useState)(null),d=(0,S.useMemo)(()=>{if(e.periodicity===T.NONE)return[];let t=[];if(e.registroDetallado&&a)Object.entries(e.registroDetallado).forEach(([r,n])=>{let i=parseInt(r),s=a(e,i);t.push({index:i,date:new Date(n.date?n.date:e.fechaInicio||e.dueDate),status:s.status,assignedTo:s.assignedTo})});else if(e.fechaInicio&&e.fechaFin&&a){let r=new Date(e.fechaInicio),n=Math.ceil((new Date(e.fechaFin).getTime()-r.getTime())/864e5)+1;for(let i=0;i<n;i++){let n=new Date(r);n.setDate(r.getDate()+i);let s=a(e,i);t.push({index:i,date:n,status:s.status,assignedTo:s.assignedTo})}}return t.sort((e,t)=>e.index-t.index)},[e,a]),h=async(t,r)=>{s(e=>({...e,[t]:r}));try{let a=H(new Date(e.fechaInicio),t);await n(t,r,a)}catch(e){console.error("Error al actualizar estado del día:",e),s(e=>{let r={...e};return delete r[t],r})}},f=async(t,n)=>{l(e=>({...e,[t]:n}));try{let a=H(new Date(e.fechaInicio),t);await r(t,n,a)}catch(e){console.error("Error al actualizar asignación del día:",e),l(e=>{let r={...e};return delete r[t],r})}};return e.periodicity===T.NONE?null:(0,E.jsxs)("div",{className:"mt-6",children:[(0,E.jsx)("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100 mb-4",children:"Gestión Diaria de Tarea Periódica"}),(0,E.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:d.map(r=>{let n=a?a(e,r.index):{status:r.status,assignedTo:r.assignedTo},s=void 0!==i[r.index]?i[r.index]:n.status,l=void 0!==o[r.index]?o[r.index]:n.assignedTo,d=l?t.find(e=>e.id===l):null,p=u===r.index;return(0,E.jsxs)("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg",children:[(0,E.jsx)("div",{className:"p-3 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",onClick:()=>c(p?null:r.index),children:(0,E.jsxs)("div",{className:"flex items-center justify-between",children:[(0,E.jsxs)("div",{className:"flex items-center gap-3",children:[(0,E.jsxs)("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:["Día ",r.index+1]}),(0,E.jsx)("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:r.date.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})})]}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${(e=>{switch(e){case _.COMPLETED:return"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300";case _.IN_PROGRESS:return"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300";case _.NOT_DONE:return"bg-gray-100 dark:bg-gray-700/30 text-gray-800 dark:text-gray-300";default:return"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"}})(s)}`,children:s}),d&&(0,E.jsx)("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:d.name}),(0,E.jsx)("span",{className:"text-slate-400 dark:text-slate-500",children:p?"▼":"▶"})]})]})}),p&&(0,E.jsx)("div",{className:"px-3 pb-3 border-t border-slate-200 dark:border-slate-700",children:(0,E.jsxs)("div",{className:"pt-3 space-y-3",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Estado:"}),(0,E.jsxs)("select",{value:s,onChange:e=>h(r.index,e.target.value),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm",children:[(0,E.jsx)("option",{value:_.PENDING,children:"Pendiente"}),(0,E.jsx)("option",{value:_.IN_PROGRESS,children:"En proceso"}),(0,E.jsx)("option",{value:_.COMPLETED,children:"Completada"}),(0,E.jsx)("option",{value:_.NOT_DONE,children:"No realizada"})]})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignado a:"}),(0,E.jsxs)("select",{value:l||"",onChange:e=>f(r.index,e.target.value||null),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm",children:[(0,E.jsx)("option",{value:"",children:"Sin asignar"}),t.map(e=>(0,E.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})})]},r.index)})})]})};const ev=e=>e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});var eb=({task:e,users:t,isOpen:r,onClose:n,onUpdatePeriodicTaskDayAssignment:a,onUpdatePeriodicTaskDayStatus:i,getPeriodicTaskDayInfo:s})=>{if(!e)return null;let o=e.completedBy?t.find(t=>t.id===e.completedBy):null,l=e.assignedTo?t.find(t=>t.id===e.assignedTo):null,u=(e=>{let t=new Date;return e.getTime()<t.getTime()})(new Date(e.dueDate))&&e.status!==_.COMPLETED;return(0,E.jsx)(eg,{isOpen:r,onClose:n,children:(0,E.jsxs)("div",{className:"p-5",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E.jsxs)("div",{className:"flex items-center gap-3",children:[(0,E.jsx)("span",{className:"text-3xl",children:e.emoji}),(0,E.jsx)("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:e.title})]}),(0,E.jsxs)("span",{className:"bg-yellow-400 text-yellow-900 text-sm font-bold px-3 py-1 rounded-full",children:[e.points," pts"]})]}),(0,E.jsx)("div",{className:"mb-4 bg-slate-100 dark:bg-slate-700/30 p-3 rounded-lg",children:(0,E.jsx)("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-line",children:e.description})}),(0,E.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,E.jsxs)("div",{className:"flex justify-between items-center p-2 border-b border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:"Estado:"}),(0,E.jsx)("span",{className:`font-semibold px-2 py-1 rounded-full ${e.status===_.COMPLETED?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":e.status===_.IN_PROGRESS?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":e.status===_.NOT_DONE?"bg-gray-100 dark:bg-gray-700/30 text-gray-800 dark:text-gray-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"}`,children:e.status})]}),(0,E.jsxs)("div",{className:"flex justify-between items-center p-2 border-b border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:"Fecha límite:"}),(0,E.jsx)("span",{className:`font-semibold ${u?"text-red-500":"text-slate-700 dark:text-slate-300"}`,children:ev(new Date(e.dueDate))})]}),(0,E.jsxs)("div",{className:"flex justify-between items-center p-2 border-b border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:"Repetición:"}),(0,E.jsx)("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:e.periodicity})]}),e.periodicity!==T.NONE&&(e.fechaFin||e.endDate)&&(0,E.jsxs)("div",{className:"flex justify-between items-center p-2 border-b border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:"Fecha de fin:"}),(0,E.jsx)("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:ev(new Date(e.fechaFin||e.endDate))})]}),l&&(0,E.jsxs)("div",{className:"flex justify-between items-center p-2 border-b border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:"Asignada a:"}),(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)("img",{src:l.avatar,alt:l.name,className:"hidden"}),(0,E.jsx)("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:l.name})]})]}),e.status===_.COMPLETED&&o&&(0,E.jsxs)("div",{className:"flex justify-between items-center p-2 border-b border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:"Completada por:"}),(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)("img",{src:o.avatar,alt:o.name,className:"hidden"}),(0,E.jsx)("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:o.name})]})]}),e.completedAt&&e.status===_.COMPLETED&&(0,E.jsxs)("div",{className:"flex justify-between items-center p-2 border-b border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("span",{className:"font-medium text-slate-500 dark:text-slate-400",children:"Fecha de completado:"}),(0,E.jsx)("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:ev(new Date(e.completedAt))})]})]}),e.periodicity!==T.NONE&&a&&i&&s&&(0,E.jsx)(ey,{task:e,users:t,onUpdateDayAssignment:(t,r)=>{let n=G(new Date(e.fechaInicio||e.dueDate),t);return a(e.id,t,r,n)},onUpdateDayStatus:(t,r)=>{let n=G(new Date(e.fechaInicio||e.dueDate),t);return i(e.id,t,r,n)},getPeriodicTaskDayInfo:s}),(0,E.jsx)("div",{className:"mt-6 flex justify-end",children:(0,E.jsx)("button",{onClick:n,className:"bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-medium py-2 px-4 rounded-lg transition-colors",children:"Cerrar"})})]})})};w("acw62");var ex=({isOpen:e,onClose:t,onConfirmDelete:r,isPeriodic:n})=>(0,E.jsx)(eg,{isOpen:e,onClose:t,children:(0,E.jsxs)("div",{className:"p-6",children:[(0,E.jsx)("h3",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Confirmar eliminación"}),(0,E.jsx)("p",{className:"mb-6 dark:text-gray-300",children:n?"¿Deseas eliminar esta tarea y todas sus repeticiones futuras?":"¿Estás seguro de que deseas eliminar esta tarea?"}),(0,E.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,E.jsx)("button",{onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",children:"Cancelar"}),(0,E.jsx)("button",{onClick:()=>r(!1),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:n?"Eliminar solo esta":"Eliminar"}),n&&(0,E.jsx)("button",{onClick:()=>r(!0),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Eliminar todas las futuras"})]})]})});const ew=[_.PENDING,_.IN_PROGRESS,_.NOT_DONE,_.COMPLETED],ek=({selectedDate:e,onDateChange:t,tasks:r,expandedTasks:n,users:a,isPremium:i,onNewTask:s})=>{let[o,l]=(0,S.useState)(V(e)),u=(0,S.useMemo)(()=>((e,t)=>{let r=new Date(e);return r.setDate(r.getDate()-t),r})(new Date,7),[]),c=((e,t)=>{let r=[],n=new Date(e);for(;n<=t;)r.push(new Date(n)),n.setDate(n.getDate()+1);return r})(o,z(o));return(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 p-2 rounded-xl shadow-sm mb-6 flex flex-col items-center",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between w-full mb-2",children:[(0,E.jsx)("button",{onClick:()=>l(B(o,-1)),className:"p-1 sm:p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:(0,E.jsx)(ea,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,E.jsxs)("h3",{className:"text-xs sm:text-sm font-medium text-slate-600 dark:text-slate-300 text-center",children:[F(o)," - ",F(z(o))]}),(0,E.jsx)("button",{onClick:()=>l(B(o,1)),className:"p-1 sm:p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:(0,E.jsx)(ei,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,E.jsx)("div",{className:"grid grid-cols-7 gap-0.5 sm:gap-1 w-full",children:c.map(r=>{let o=U(r,e),l=U(r,new Date),c=!i&&r<u&&!U(r,u);return(0,E.jsxs)("button",{onClick:()=>t(r),onDoubleClick:()=>{!c&&s&&s(r)},disabled:c,className:`p-1 sm:p-2 rounded-lg text-center transition-colors ${o?"bg-primary-600 text-white shadow":l?"bg-blue-200 dark:bg-blue-800 text-blue-800 dark:text-blue-200 hover:bg-blue-300 dark:hover:bg-blue-700":"hover:bg-slate-100 dark:hover:bg-slate-700"} ${c?"opacity-50 cursor-not-allowed":""}`,title:c?"Fecha no disponible":"Clic para seleccionar, doble clic para crear nueva tarea",children:[(0,E.jsx)("p",{className:"text-xs capitalize",children:r.toLocaleDateString("es-ES",{weekday:"short"})}),(0,E.jsx)("p",{className:"font-bold text-base sm:text-lg",children:r.getDate().toString()}),(0,E.jsx)("div",{className:"h-3 sm:h-4",children:(e=>{let t=n.filter(t=>U(new Date(t.dueDate),e)&&"Eliminada"!==t.status);if(0===t.length)return null;let r=t.filter(e=>e.status!==_.COMPLETED);if(0===r.length)return(0,E.jsx)("span",{className:"text-lg",children:"✅"});let i=r.filter(e=>!e.assignedTo),s=[...new Set(r.map(e=>e.assignedTo).filter(Boolean).map(e=>a.find(t=>t.id===e)?.color).filter(e=>!!e))];return(0,E.jsxs)("div",{className:"flex justify-center items-center gap-1 h-2 mt-1",children:[s.map(e=>(0,E.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e}},e)),i.length>0&&(0,E.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-400"})]})})(r)})]},r.toString())})})]})};var eE=({tasks:e,users:t,currentUser:r,allTasks:n,onEditTask:a,onDeleteTask:i,onCompleteTask:s,onUpdateTaskStatus:o,onNewTask:l,isPremium:u,onUpdatePeriodicTaskDayAssignment:c,onUpdatePeriodicTaskDayStatus:d,getPeriodicTaskDayInfo:h,onDateChange:f})=>{let[p,m]=(0,S.useState)(new Date),[g,y]=(0,S.useState)(null),[v,b]=(0,S.useState)(null),[x,w]=(0,S.useState)(!1),[k,N]=(0,S.useState)(!1),[I,C]=(0,S.useState)(null),[D,A]=(0,S.useState)({[_.PENDING]:!1,[_.IN_PROGRESS]:!1,[_.NOT_DONE]:!1,[_.COMPLETED]:!1,[_.DELETED]:!1}),j=(0,S.useMemo)(()=>{let t=[];return e.forEach(e=>{if(e.periodicity===T.NONE||!e.fechaInicio||!e.fechaFin)return void t.push(e);let r=new Date(e.fechaInicio),n=new Date(e.fechaFin);if(e.registroDetallado)Object.keys(e.registroDetallado).forEach(a=>{let i,s=parseInt(a),o=e.registroDetallado[a];if(o.date)i=new Date(o.date);else{let e=void 0!==o.day?o.day:s;i=H(new Date(r),e)}let l=new Date(i);l.setHours(0,0,0,0);let u=new Date(n);if(u.setHours(0,0,0,0),l>u)return;let c={...e,dueDate:i.toISOString(),status:o.status,assignedTo:o.assignedTo||null,registro:void 0};t.push(c)});else{let a=Math.ceil((n.getTime()-r.getTime())/864e5)+1;for(let i=0;i<a;i++){let a=H(new Date(r),i),s=new Date(a);s.setHours(0,0,0,0);let o=new Date(n);if(o.setHours(0,0,0,0),s>o)break;let l={...e,dueDate:a.toISOString(),status:e.status||_.PENDING,assignedTo:e.assignedTo||null,registro:void 0};t.push(l)}}}),t},[e]),P=(0,S.useMemo)(()=>j.filter(e=>U(new Date(e.dueDate),p)&&"Eliminada"!==e.status),[j,p]),O=(0,S.useMemo)(()=>ew.reduce((e,t)=>(e[t]=P.filter(e=>e.status===t).sort((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()),e),{}),[P]),R=e=>{e.preventDefault(),y(null)},L=e=>{b(e),w(!0)};return(0,E.jsxs)("div",{className:"min-h-screen w-full px-2 sm:px-4",children:[(0,E.jsx)(ek,{selectedDate:p,onDateChange:e=>{m(e),f&&f(e)},tasks:n,expandedTasks:j,users:t,isPremium:u,onNewTask:l}),(0,E.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 w-full",children:ew.map(e=>(0,E.jsxs)("div",{onDragOver:t=>{t.preventDefault(),y(e)},onDragLeave:R,onDrop:t=>((e,t)=>{e.preventDefault(),y(null);let r=e.dataTransfer.getData("taskId"),n=j.find(e=>e.id===r);if(console.log("\uD83D\uDD04 handleDrop called:",{taskId:r,newStatus:t,task:n?.title,currentStatus:n?.status}),n&&n.status!==t){let e=(()=>{if(n.periodicity===T.NONE||!n.fechaInicio)return null;let e=new Date(n.dueDate),t=new Date(n.fechaInicio);return e.setHours(0,0,0,0),t.setHours(0,0,0,0),Math.floor((e.getTime()-t.getTime())/864e5)})(),a=n.periodicity!==T.NONE&&null!==e;console.log("\uD83D\uDD0D Task analysis:",{isPeriodicTask:a,dayIndex:e,periodicity:n.periodicity}),a&&d?(console.log("\uD83D\uDCC5 Calling onUpdatePeriodicTaskDayStatus:",{taskId:r,dayIndex:e,newStatus:t,selectedDate:p}),d(r,e,t,p)):(console.log("\uD83D\uDCDD Calling normal task update:",{taskId:r,newStatus:t}),t===_.COMPLETED?s(r):n.status===_.COMPLETED?o(r,{status:t,completedBy:void 0,completedAt:void 0}):o(r,{status:t}))}})(t,e),className:`bg-slate-100/50 dark:bg-slate-800/50 rounded-xl p-4 flex flex-col transition-all duration-300 
              ${g===e?"ring-2 ring-primary-500 bg-primary-50 dark:bg-primary-900/20":""}`,children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-4 cursor-pointer",onClick:()=>{A(t=>({...t,[e]:!t[e]}))},children:[(0,E.jsxs)("div",{className:`text-sm font-bold px-3 py-1 rounded-full self-start ${(e=>{switch(e){case _.PENDING:return"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300";case _.IN_PROGRESS:return"bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-300";case _.NOT_DONE:return"bg-gray-100 dark:bg-gray-700/50 text-gray-800 dark:text-gray-300";case _.COMPLETED:return"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300"}})(e)}`,children:[e," (",O[e].length,")"]}),(0,E.jsx)("button",{className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:D[e]?(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),(0,E.jsx)("div",{className:`space-y-4 transition-all duration-300 ${D[e]?"hidden":"opacity-100"}`,children:O[e].length>0?O[e].map(e=>(0,E.jsx)(em,{task:e,users:t,onEdit:()=>a(e),onDelete:()=>{console.log("[TaskDashboard] handleDeleteClick:",{taskId:e.id,taskTitle:e.title,taskDueDate:e.dueDate,taskPeriodicity:e.periodicity,selectedDate:p?.toISOString()}),C(e),N(!0)},onComplete:()=>s(e.id),onUpdateStatus:t=>o(e.id,{status:t}),onDragStart:t=>{let r;return r=e.id,t.dataTransfer.setData("taskId",r)},onTaskClick:L,onUpdatePeriodicTaskDayStatus:d,getPeriodicTaskDayInfo:h},e.id)):(0,E.jsx)("div",{className:"text-center pt-4 text-slate-500 dark:text-slate-400 text-sm",children:(0,E.jsx)("p",{children:"No hay tareas en este estado."})})})]},e))}),(0,E.jsx)(eb,{task:v,users:t,isOpen:x,onClose:()=>w(!1),onUpdatePeriodicTaskDayAssignment:c,onUpdatePeriodicTaskDayStatus:d,getPeriodicTaskDayInfo:h}),(0,E.jsx)(ex,{isOpen:k,onClose:()=>N(!1),onConfirmDelete:e=>{I&&(console.log("[TaskDashboard] handleConfirmDelete:",{taskId:I.id,deleteAll:e,selectedDate:p?.toISOString()}),i(I.id,e,p),N(!1),C(null))},isPeriodic:I?.periodicity!==T.NONE})]})},S=w("acw62");const eS=()=>(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 inline-block ml-1",children:(0,E.jsx)("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})}),eN=({colorClass:e})=>(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:`w-8 h-8 ${e}`,children:[(0,E.jsx)("path",{fillRule:"evenodd",d:"M11.624 2.12a.75.75 0 0 1 .752 0l2.036.958a.75.75 0 0 0 .684.053l2.434-.926a.75.75 0 0 1 .91.688l-.29 2.504a.75.75 0 0 0 .423.73l2.28.912a.75.75 0 0 1 .374.998l-1.462 2.193a.75.75 0 0 0 .097.835l1.83 1.83a.75.75 0 0 1-.53 1.28l-2.432-.54a.75.75 0 0 0-.74.19l-1.63 1.956a.75.75 0 0 1-1.012 0l-1.63-1.956a.75.75 0 0 0-.74-.19l-2.432.54a.75.75 0 0 1-.53-1.28l1.83-1.83a.75.75 0 0 0 .097-.835L2.53 11.002a.75.75 0 0 1 .374-.998l2.28-.912a.75.75 0 0 0 .423-.73l-.29-2.504a.75.75 0 0 1 .91-.688l2.434.926a.75.75 0 0 0 .684-.053l2.036-.958ZM12 6.375a5.625 5.625 0 1 0 0 11.25 5.625 5.625 0 0 0 0-11.25Z",clipRule:"evenodd"}),(0,E.jsx)("path",{d:"M12.75 18.165a.75.75 0 0 0-1.5 0V21a.75.75 0 0 0 1.5 0v-2.835Z"}),(0,E.jsx)("path",{d:"M8.25 21a.75.75 0 0 1 .75-.75h6a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75Z"})]});var e_=({users:e,getStats:t,currentHome:r,isPremium:n})=>{let[a,i]=(0,S.useState)("weekly"),s=(0,S.useMemo)(()=>{if(!r)return[];let n=new Set;return r.memberIds.forEach(e=>n.add(e)),e.forEach(e=>{let r=t(e.id,a);(r.tasksCompleted>0||r.pointsEarned>0)&&n.add(e.id)}),Array.from(n).map(n=>{let i=e.find(e=>e.id===n),s=r.memberIds.includes(n);return{id:n,name:i?.name||"Usuario",avatar:i?.avatar||"/user.svg",color:i?.color||"#cccccc",isCurrentMember:s,stats:t(n,a)}}).filter(e=>e.stats.tasksCompleted>0||e.stats.pointsEarned>0).sort((e,t)=>{let r=e.stats.pointsEarned,n=t.stats.pointsEarned;return n!==r?n-r:t.stats.tasksCompleted-e.stats.tasksCompleted})},[e,t,a,r]),o=["text-yellow-400","text-slate-400","text-yellow-600"];return(0,E.jsxs)("div",{className:"space-y-8",children:[(0,E.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,E.jsxs)("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:["Estadísticas de ",r?.name||""]}),(0,E.jsxs)("div",{className:"bg-slate-200 dark:bg-slate-700 p-1 rounded-lg flex space-x-1",children:[(0,E.jsx)("button",{onClick:()=>i("weekly"),className:`px-4 py-1.5 text-sm font-semibold rounded-md transition-all ${"weekly"===a?"bg-white dark:bg-slate-800 shadow-sm text-primary-600 dark:text-primary-400":"text-slate-600 dark:text-slate-300"}`,children:"Semana"}),["monthly","annually"].map(e=>(0,E.jsxs)("div",{className:"relative group",children:[(0,E.jsxs)("button",{onClick:()=>n&&i(e),disabled:!n,className:`px-4 py-1.5 text-sm font-semibold rounded-md transition-all capitalize ${a===e?"bg-white dark:bg-slate-800 shadow-sm text-primary-600 dark:text-primary-400":"text-slate-600 dark:text-slate-300"} ${!n?"cursor-not-allowed opacity-60":""}`,children:["monthly"===e?"Mes":"Año"," ",!n&&(0,E.jsx)(eS,{})]}),!n&&(0,E.jsx)("div",{className:"absolute bottom-full mb-2 hidden group-hover:block w-max bg-slate-800 text-white text-xs rounded py-1 px-2 z-10",children:"Desbloquea con Premium"})]},e))]})]}),(0,E.jsx)("div",{className:"space-y-4",children:s.length>0?s.map((e,t)=>(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800/50 p-4 rounded-xl shadow-md flex items-center space-x-4 transition-transform duration-300 hover:scale-[1.02] hover:shadow-lg",children:[(0,E.jsx)("div",{className:"flex items-center justify-center w-12 h-12 text-2xl font-bold",children:t<3?(0,E.jsx)(eN,{colorClass:o[t]}):(0,E.jsx)("span",{className:"text-slate-400 dark:text-slate-500",children:t+1})}),(0,E.jsx)("img",{src:e.avatar||"/user.svg",alt:e.name,className:"hidden",onError:e=>{let t=e.target;t.onerror=null,t.src="/user.svg"}}),(0,E.jsxs)("div",{className:"flex-grow",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:e.name}),!e.isCurrentMember&&(0,E.jsx)("span",{className:"text-xs font-medium px-2 py-1 bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-400 rounded-full",children:"Ya no en la casa"})]}),(0,E.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.stats.tasksCompleted," tareas completadas"]})]}),(0,E.jsxs)("div",{className:"text-right",children:[(0,E.jsx)("p",{className:"text-3xl font-bold text-primary-500 dark:text-primary-400",children:e.stats.pointsEarned}),(0,E.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"puntos"})]})]},e.id)):(0,E.jsxs)("div",{className:"text-center py-20 text-slate-500 dark:text-slate-400",children:[(0,E.jsx)("p",{children:"No hay datos de tareas completadas para este período."}),(0,E.jsx)("p",{className:"text-sm mt-2",children:"¡Completa algunas tareas para empezar a ver las estadísticas!"})]})})]})},S=(w("acw62"),w("acw62")),eT=({isOpen:e,onClose:t,onConfirmDelete:r})=>{let[n,a]=(0,S.useState)(""),[i,s]=(0,S.useState)(""),[o,l]=(0,S.useState)(""),[u,c]=(0,S.useState)(!1),[d,h]=(0,S.useState)("");(0,S.useEffect)(()=>{e&&(s(Math.floor(1e3+9e3*Math.random()).toString()),a(""),l(""),h(""))},[e]);let f=async()=>{if(h(""),n!==i)return void h("El código de verificación no es correcto. Por favor, introduce el código mostrado.");if(!o)return void h("Por favor, introduce tu contraseña para confirmar.");c(!0);try{await r(o)}catch(e){h(e.message||"Error al eliminar la cuenta. Inténtalo de nuevo."),c(!1)}};return(0,E.jsx)(eg,{isOpen:e,onClose:t,children:(0,E.jsxs)("div",{className:"p-6 space-y-6",children:[(0,E.jsx)("h3",{className:"text-2xl font-bold text-red-600 dark:text-red-500",children:"Eliminar cuenta"}),(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/50 border-l-4 border-red-500 p-4 rounded",children:[(0,E.jsx)("p",{className:"text-red-700 dark:text-red-300 font-medium",children:"¡Advertencia! Esta acción es irreversible."}),(0,E.jsx)("p",{className:"text-red-600 dark:text-red-200 mt-2",children:"Al eliminar tu cuenta:"}),(0,E.jsxs)("ul",{className:"list-disc list-inside text-red-600 dark:text-red-200 mt-1 space-y-1",children:[(0,E.jsx)("li",{children:"Se eliminarán todos tus datos personales"}),(0,E.jsx)("li",{children:"Perderás acceso a todas tus casas"}),(0,E.jsx)("li",{children:"Las tareas que hayas creado permanecerán en las casas, pero sin tu nombre"}),(0,E.jsx)("li",{children:"Si eres el único miembro de una casa, esta será eliminada junto con todas sus tareas"})]})]}),(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{className:"p-4 bg-gray-100 dark:bg-slate-800 rounded-md mb-4",children:[(0,E.jsx)("p",{className:"mb-2 font-medium",children:"Código de verificación:"}),(0,E.jsx)("div",{className:"text-2xl font-bold text-center tracking-wider bg-white dark:bg-slate-700 p-3 rounded border dark:border-slate-600",children:i})]}),(0,E.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Introduce el código de verificación mostrado arriba:"}),(0,E.jsx)("input",{type:"text",value:n,onChange:e=>a(e.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded",placeholder:"Código de 4 números",maxLength:4})]}),(0,E.jsxs)("div",{className:"mt-4",children:[(0,E.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Introduce tu contraseña para confirmar"}),(0,E.jsx)("input",{type:"password",value:o,onChange:e=>l(e.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded",placeholder:"Contraseña"})]}),d&&(0,E.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm",children:d})]}),(0,E.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,E.jsx)("button",{onClick:t,className:"py-2 px-4 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-md font-bold",children:"Cancelar"}),(0,E.jsx)("button",{onClick:f,disabled:4!==n.length||!o||u,className:"py-2 px-4 bg-red-600 hover:bg-red-700 text-white rounded-md font-bold disabled:bg-red-300 disabled:dark:bg-red-800/50",children:u?"Eliminando...":"Eliminar mi cuenta"})]})]})})},S=(w("acw62"),w("acw62"));const eI=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},eC=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var S=w("acw62"),eD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const eA=(0,S.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:s,...o},l)=>(0,S.createElement)("svg",{ref:l,...eD,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:eC("lucide",a),...!i&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(o)&&{"aria-hidden":"true"},...o},[...s.map(([e,t])=>(0,S.createElement)(e,t)),...Array.isArray(i)?i:[i]])),ej=((e,t)=>{let r=(0,S.forwardRef)(({className:r,...n},a)=>(0,S.createElement)(eA,{ref:a,iconNode:t,className:eC(`lucide-${eI(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...n}));return r.displayName=eI(e),r})("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);w("ilpIi");var O=w("9HrqM"),D=w("e0EYX"),eP=({isOpen:e,onClose:t})=>{let[r,n]=(0,S.useState)(""),[a,i]=(0,S.useState)(!1),[s,o]=(0,S.useState)("idle"),l=async e=>{if(e.preventDefault(),!r.trim()||!D.auth.currentUser)return void o("error");i(!0),o("idle");try{let e={userId:D.auth.currentUser.uid,userEmail:D.auth.currentUser.email,userName:D.auth.currentUser.displayName||"No especificado",message:r.trim(),createdAt:(0,O.serverTimestamp)(),status:"pending"};await (0,O.addDoc)((0,O.collection)(D.db,"reports"),e),o("success"),n(""),setTimeout(()=>{t(),o(null)},2e3)}catch(e){console.error("Error al guardar reporte:",e),o("error")}finally{i(!1)}},u=()=>{n(""),o("idle"),t()};return e?(0,E.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl p-6 max-w-md w-full mx-4",children:[(0,E.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,E.jsx)("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reportar Error"}),(0,E.jsx)("button",{onClick:u,className:"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:(0,E.jsx)(ej,{className:"w-6 h-6"})})]}),"success"===s&&(0,E.jsx)("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/50 border border-green-300 dark:border-green-700 rounded-lg",children:(0,E.jsx)("p",{className:"text-green-800 dark:text-green-200 text-sm",children:"¡Gracias por tu reporte! Tu mensaje ha sido guardado correctamente."})}),"error"===s&&(0,E.jsx)("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/50 border border-red-300 dark:border-red-700 rounded-lg",children:(0,E.jsx)("p",{className:"text-red-800 dark:text-red-200 text-sm",children:"Hubo un error al procesar tu reporte. Por favor, intenta nuevamente."})}),(0,E.jsxs)("form",{onSubmit:l,children:[(0,E.jsxs)("div",{className:"mb-4",children:[(0,E.jsx)("label",{htmlFor:"reportText",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Describe el error o problema que encontraste:"}),(0,E.jsx)("textarea",{id:"reportText",value:r,onChange:e=>n(e.target.value),placeholder:"Por favor, describe el problema con el mayor detalle posible. Incluye los pasos que seguiste antes de encontrar el error...",className:"w-full h-32 p-3 border border-slate-300 dark:border-slate-600 dark:bg-slate-700 dark:text-white rounded-lg resize-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,disabled:a})]}),(0,E.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,E.jsx)("button",{type:"button",onClick:u,className:"px-4 py-2 text-slate-600 dark:text-slate-300 hover:text-slate-800 dark:hover:text-slate-100 font-medium",disabled:a,children:"Cancelar"}),(0,E.jsx)("button",{type:"submit",disabled:!r.trim()||a,className:"px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white font-bold rounded-lg disabled:bg-slate-400 disabled:cursor-not-allowed",children:a?"Enviando...":"Enviar Reporte"})]})]})]})}):null},eO=({currentUser:e,userHomes:t,users:r,createHome:n,updateHome:a,updateCurrentUser:i,uploadAvatar:s,sendHomeInvitation:o,pendingInvitations:l,respondToInvitation:u,onViewChange:c,onLimitReached:d,togglePremium:h,leaveHome:f,setCurrentHomeId:p,removeUserFromHome:m,deleteAccount:g})=>{let{checkLimit:y,isPremium:v}=X(e,t,t.find(e=>"some-id"===e.id)),{isNative:b}=eh(),[x,w]=(0,S.useState)(null),[k,N]=(0,S.useState)({}),[_,T]=(0,S.useState)(e?.name||""),[D,A]=(0,S.useState)(e?.avatar||"/user.svg"),[j,P]=(0,S.useState)(e?.color||M[0]),[O,R]=(0,S.useState)(""),[L,U]=(0,S.useState)(""),[F,V]=(0,S.useState)(null),[z,B]=(0,S.useState)(""),[H,q]=(0,S.useState)(null),[$,W]=(0,S.useState)(""),[G,K]=(0,S.useState)(""),[Q,Y]=(0,S.useState)(null),[J,Z]=(0,S.useState)(null),[ee,et]=(0,S.useState)(null),[er,en]=(0,S.useState)(null),[ea,ei]=(0,S.useState)(null),[es,ed]=(0,S.useState)(null),[ef,ep]=(0,S.useState)(!1),[em,eg]=(0,S.useState)(!1);(0,S.useEffect)(()=>{e&&e.name!==_&&document.activeElement?.id!=="userName"&&T(e.name),e&&e.avatar!==D&&"/user.svg"!==D&&A(e.avatar||"/user.svg"),e&&j===M[0]&&e.color&&P(e.color),t.length>0&&!Q&&Y(t[0].id)},[e,t,Q,_,D]);let ey=(e,t)=>{w({type:e,text:t}),setTimeout(()=>w(null),4e3)},ev=async e=>{e.preventDefault(),N({...k,profile:!0});try{if(O&&O!==L){ey("error","Las contraseñas no coinciden."),N({...k,profile:!1});return}let e=D;if(F)try{e=await s(F)}catch(e){console.error("Error al subir avatar:",e),ey("error","Error al subir la imagen."),N({...k,profile:!1});return}let t={name:_,avatar:e,color:j};O&&(t.password=O);let r=await i(t);ey(r.success?"success":"error",r.message),r.success&&(R(""),U(""),V(null))}catch(e){console.error("Error al actualizar perfil:",e),ey("error","Error al actualizar el perfil.")}finally{N({...k,profile:!1})}},eb=async e=>{e.preventDefault();let t=y(C.HOMES);if(t.isLimited)return void d(t.message);z.trim()&&(N({...k,createHome:!0}),await n(z.trim()),ey("success",`\xa1Casa "${z.trim()}" creada!`),B(""),N({...k,createHome:!1}))},ex=async e=>{$.trim()&&(N({...k,[`home_${e}`]:!0}),await a(e,{name:$.trim()}),ey("success","Nombre de la casa actualizado."),q(null),W(""),N({...k,[`home_${e}`]:!1}))},ew=async e=>{e.preventDefault(),t.find(e=>e.id===Q);let r=y(C.MEMBERS);if(r.isLimited)return void d(r.message);if(G.trim()&&Q){N({...k,invite:!0});let e=await o(G.trim(),Q);e.success?(ei({type:"success",text:e.message}),K("")):ei({type:"error",text:e.message}),N({...k,invite:!1})}},ek=async(e,r)=>{if(r){let e=y(C.HOMES);if(e.isLimited)return void d(e.message)}await u(e,r),r&&(setTimeout(()=>{t.length>0&&(p(t[t.length-1].id),c(I.DASHBOARD))},500),window.location.reload()),ey("success",`Invitaci\xf3n ${r?"aceptada":"rechazada"}.`)};if(!e)return null;let eE=async(e,t)=>{let n=r.find(e=>e.id===t);n&&en({homeId:e,user:n})},eS=async()=>{if(er){N({...k,[`remove_${er.user.id}`]:!0});try{let e=t.find(e=>e.id===er.homeId)?.name||"la casa";await m(er.homeId,er.user.id),ey("success",`${er.user.name} ha sido eliminado de ${e}.`),ed({userName:er.user.name,homeName:e}),console.log(`Se ha notificado a ${er.user.name} que ha sido eliminado de ${e}`)}catch(e){ey("error",e.message||"Error al eliminar usuario.")}finally{N({...k,[`remove_${er.user.id}`]:!1}),en(null)}}},eN=async t=>{e&&et(t)},e_=async()=>{if(e&&ee){N({...k,[`leave_${ee}`]:!0});try{let t=await f(ee,e.id);ey(t.success?"success":"error",t.message)}catch(e){ey("error","Error al salir de la casa.")}finally{N({...k,[`leave_${ee}`]:!1}),Z(null),et(null)}}};return(0,E.jsxs)("div",{className:"space-y-10",children:[(0,E.jsxs)("div",{className:"flex justify-between items-center",children:[(0,E.jsx)("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Ajustes"}),(0,E.jsx)("button",{onClick:()=>c(I.SUBSCRIPTION),className:"font-semibold text-white bg-gradient-to-r from-secondary-500 to-primary-500 hover:from-secondary-600 hover:to-primary-600 px-4 py-2 rounded-lg shadow-lg transition-transform hover:scale-105 opacity-50 cursor-not-allowed",disabled:!0,children:"✨ Hacerse Premium"})]}),x&&(0,E.jsx)("div",{className:`p-4 rounded-md text-sm mb-6 ${"success"===x.type?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-200":"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-200"}`,children:x.text}),(0,E.jsxs)("div",{className:"p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md",children:[(0,E.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Mi Perfil"}),(0,E.jsxs)("form",{onSubmit:ev,className:"space-y-4",children:[(0,E.jsxs)("div",{className:"flex items-center gap-4",children:[(0,E.jsx)("img",{src:D,alt:"Avatar",className:"hidden"}),(0,E.jsxs)("div",{className:"flex-grow space-y-2",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 block",children:"Nombre"}),(0,E.jsx)("input",{type:"text",id:"userName",value:_,onChange:e=>T(e.target.value),maxLength:16,required:!0,className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded mt-1"}),(0,E.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[_.length,"/16 caracteres"]})]}),(0,E.jsxs)("div",{className:"hidden",children:[(0,E.jsx)("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 block",children:"Avatar"}),(0,E.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,E.jsx)("img",{src:D,alt:"Avatar",className:"hidden"}),v?(0,E.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(t){V(t);let e=new FileReader;e.onloadend=()=>A(e.result),e.readAsDataURL(t)}},className:"text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100 dark:file:bg-slate-700 dark:file:text-slate-200"}):(0,E.jsxs)("div",{className:"flex items-center gap-1 text-sm text-amber-600 dark:text-amber-400",children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:(0,E.jsx)("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})}),(0,E.jsx)("span",{children:"Función premium"})]})]}),(0,E.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:v?"Recomendado: imagen cuadrada en formato PNG o JPG.":"Actualiza a premium para personalizar tu avatar."})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 block",children:"Color en tus casas"}),v?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:M.map((n,a)=>{let i=t.some(t=>r.filter(r=>t.memberIds.includes(r.id)&&r.id!==e.id).some(e=>e.color===n));return(0,E.jsx)("button",{type:"button",onClick:()=>P(n),className:`w-8 h-8 rounded-full transition-transform 
                                                            ${j===n?"ring-2 ring-offset-2 ring-primary-500 scale-110":"hover:scale-110"}
                                                            ${i?"opacity-30":""}`,style:{backgroundColor:n},"aria-label":`Color ${a+1}`,title:i?"Este color ya está siendo usado por otro miembro en alguna de tus casas":`Color ${a+1}`},a)})}),(0,E.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Los colores marcados con menor opacidad ya están siendo utilizados por otros miembros en tus casas, pero puedes seleccionarlos si lo deseas."})]}):(0,E.jsxs)("div",{className:"mt-1",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:j}}),(0,E.jsxs)("div",{className:"flex items-center gap-1 text-sm text-amber-600 dark:text-amber-400",children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4",children:(0,E.jsx)("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})}),(0,E.jsx)("span",{children:"Función premium"})]})]}),(0,E.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Actualiza a premium para personalizar tu color en las casas."})]})]})]})]}),(0,E.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 block",children:"Nueva Contraseña"}),(0,E.jsx)("input",{type:"password",value:O,onChange:e=>R(e.target.value),placeholder:"Dejar en blanco para no cambiar",className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded mt-1"})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"text-sm font-medium text-gray-600 dark:text-gray-300 block",children:"Confirmar Contraseña"}),(0,E.jsx)("input",{type:"password",value:L,onChange:e=>U(e.target.value),className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded mt-1"})]})]}),(0,E.jsx)("div",{className:"flex justify-end",children:(0,E.jsx)("button",{type:"submit",disabled:k.profile,className:"py-2 px-4 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-bold disabled:bg-primary-300",children:k.profile?"Guardando...":"Guardar Cambios"})})]})]}),l.length>0&&(0,E.jsxs)("div",{className:"p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md",children:[(0,E.jsxs)("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[(0,E.jsx)(eo,{className:"w-6 h-6 text-primary-500"}),"Invitaciones Pendientes"]}),(0,E.jsx)("div",{className:"space-y-3",children:l.map(e=>{let t;return(0,E.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[(0,E.jsx)("div",{children:(0,E.jsxs)("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:[(0,E.jsx)("span",{className:"font-bold",children:(t=e.invitedBy,r.find(e=>e.id===t)?.name||"Alguien")})," te ha invitado a unirte a ",(0,E.jsx)("span",{className:"font-bold text-primary-600 dark:text-primary-400",children:e.homeName}),"."]})}),(0,E.jsxs)("div",{className:"flex gap-2",children:[(0,E.jsx)("button",{onClick:()=>ek(e.id,!0),className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded-full",children:(0,E.jsx)(el,{className:"w-5 h-5"})}),(0,E.jsx)("button",{onClick:()=>ek(e.id,!1),className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-full",children:(0,E.jsx)(eu,{className:"w-5 h-5"})})]})]},e.id)})})]}),(0,E.jsxs)("div",{className:"p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md",children:[(0,E.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Mis Casas"}),(0,E.jsx)("div",{className:"space-y-4 mb-6",children:t.map(t=>(0,E.jsxs)("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg",children:[(0,E.jsx)("div",{className:"flex justify-between items-start",children:H===t.id?(0,E.jsxs)("div",{className:"flex-grow flex gap-2 items-center",children:[(0,E.jsx)("input",{type:"text",value:$,onChange:e=>W(e.target.value),maxLength:30,className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded"}),(0,E.jsx)("button",{onClick:()=>ex(t.id),disabled:k[`home_${t.id}`],className:"p-2 bg-green-500 text-white rounded-md disabled:bg-green-300",children:(0,E.jsx)(el,{className:"w-5 h-5"})}),(0,E.jsx)("button",{onClick:()=>q(null),className:"p-2 bg-red-500 text-white rounded-md",children:(0,E.jsx)(eu,{className:"w-5 h-5"})})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("h4",{className:"font-bold text-lg text-primary-600 dark:text-primary-400",children:t.name}),(0,E.jsx)("button",{onClick:()=>{q(t.id),W(t.name)},className:"text-slate-500 hover:text-primary-600 dark:text-slate-400 dark:hover:text-primary-400",children:(0,E.jsx)(ec,{className:"w-5 h-5"})})]})}),(0,E.jsx)("p",{className:"text-sm font-semibold mt-2 mb-1",children:"Miembros:"}),(0,E.jsx)("div",{className:"flex flex-wrap gap-2",children:r.filter(e=>t.memberIds.includes(e.id)).map(r=>(0,E.jsxs)("div",{className:"flex items-center gap-2 bg-slate-200 dark:bg-slate-700 px-2 py-1 rounded-full",style:{borderLeft:`4px solid ${r.color}`},children:[(0,E.jsx)("img",{src:r.avatar||"/user.svg",alt:r.name,className:"hidden",onError:e=>{let t=e.target;t.onerror=null,t.src="/user.svg"}}),(0,E.jsx)("span",{className:"text-sm",children:r.name}),t.adminIds.includes(e.id)&&r.id!==e.id&&(0,E.jsx)("button",{onClick:()=>eE(t.id,r.id),disabled:k[`remove_${r.id}`],className:"ml-1 px-2 py-1 bg-red-500 hover:bg-red-600 text-white text-xs rounded-full disabled:bg-red-300",title:"Eliminar usuario de la casa",children:"×"})]},r.id))}),(0,E.jsx)("div",{className:"flex justify-end mt-4",children:(0,E.jsx)("button",{onClick:()=>{Z(t.id),eN(t.id)},disabled:k[`leave_${t.id}`],className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md font-bold disabled:bg-red-300",children:k[`leave_${t.id}`]?"Saliendo...":"Salir de la casa"})})]},t.id))}),(0,E.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 pt-6 border-t border-slate-200 dark:border-slate-700",children:[(0,E.jsxs)("form",{onSubmit:eb,className:"space-y-3",children:[(0,E.jsx)("h4",{className:"font-semibold",children:"Crear una nueva casa"}),(0,E.jsx)("input",{type:"text",value:z,onChange:e=>B(e.target.value),placeholder:"Nombre de la casa",className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded"}),(0,E.jsx)("button",{type:"submit",disabled:k.createHome,className:"w-full py-2 px-4 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-bold disabled:bg-primary-300",children:k.createHome?"Creando...":"Crear Casa"})]}),(0,E.jsxs)("form",{onSubmit:ew,className:"space-y-3",children:[(0,E.jsx)("h4",{className:"font-semibold",children:"Invitar miembro a una casa"}),(0,E.jsxs)("select",{value:Q||"",onChange:e=>Y(e.target.value),required:!0,className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded",children:[(0,E.jsx)("option",{value:"",disabled:!0,children:"Selecciona una casa"}),t.map(e=>(0,E.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,E.jsx)("input",{type:"email",value:G,onChange:e=>K(e.target.value),placeholder:"Email del usuario a invitar",className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded"}),(0,E.jsx)("button",{type:"submit",disabled:!Q||k.invite,className:"w-full py-2 px-4 bg-secondary-500 hover:bg-secondary-600 text-white rounded-md font-bold disabled:bg-slate-400",children:k.invite?"Enviando...":"Enviar Invitación"})]})]}),!t.length&&!l.length&&(0,E.jsxs)("div",{className:"text-center py-10 text-slate-500 dark:text-slate-400",children:[(0,E.jsx)("p",{children:"Aún no perteneces a ninguna casa."}),(0,E.jsx)("p",{className:"text-sm mt-2",children:"¡Crea una para empezar a añadir tareas e invitar a miembros!"})]})]}),(0,E.jsxs)("div",{className:"p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md mt-6",children:[(0,E.jsx)("h3",{className:"text-xl font-bold mb-4 text-blue-600 dark:text-blue-400",children:"Soporte y Ayuda"}),(0,E.jsx)("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"¿Encontraste un error o tienes algún problema con la aplicación? Ayúdanos a mejorar reportándolo."}),(0,E.jsx)("button",{onClick:()=>eg(!0),className:"py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-bold",children:"Reportar Error"})]}),(0,E.jsxs)("div",{className:"p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md mt-6",children:[(0,E.jsx)("h3",{className:"text-xl font-bold mb-4 text-red-600 dark:text-red-400",children:"Zona de Peligro"}),(0,E.jsx)("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"La eliminación de tu cuenta es permanente y no se puede deshacer. Todos tus datos personales, casas y tareas serán eliminados."}),(0,E.jsx)("button",{onClick:()=>ep(!0),className:"py-2 px-4 bg-red-600 hover:bg-red-700 text-white rounded-md font-bold",children:"Eliminar mi cuenta"})]}),b&&(0,E.jsx)("div",{className:"p-6 bg-white dark:bg-slate-800/50 rounded-xl shadow-md text-center",children:(0,E.jsx)("button",{className:"font-semibold text-primary-600 dark:text-primary-400",children:"¿Te gusta la app? ¡Ayúdanos con una reseña! ⭐"})}),!1,ee&&(0,E.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 max-w-sm w-full",children:[(0,E.jsx)("h3",{className:"text-lg font-bold mb-2 text-slate-900 dark:text-white",children:"¿Seguro que quieres salir de la casa?"}),(0,E.jsx)("p",{className:"mb-4 text-slate-600 dark:text-slate-300",children:"Perderás acceso a todas las tareas y miembros de esta casa."}),(0,E.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,E.jsx)("button",{onClick:()=>et(null),className:"px-4 py-2 rounded bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-semibold",children:"Cancelar"}),(0,E.jsx)("button",{onClick:e_,className:"px-4 py-2 rounded bg-red-600 text-white font-bold hover:bg-red-700 disabled:bg-red-300",disabled:k[`leave_${ee}`],children:k[`leave_${ee}`]?"Saliendo...":"Salir"})]})]})}),er&&(0,E.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 max-w-sm w-full",children:[(0,E.jsxs)("h3",{className:"text-lg font-bold mb-2 text-slate-900 dark:text-white",children:["¿Seguro que quieres eliminar a ",(0,E.jsx)("span",{className:"text-red-600",children:er.user.name})," de la casa?"]}),(0,E.jsx)("p",{className:"mb-4 text-slate-600 dark:text-slate-300",children:"Esta acción no se puede deshacer."}),(0,E.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,E.jsx)("button",{onClick:()=>en(null),className:"px-4 py-2 rounded bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-semibold",children:"Cancelar"}),(0,E.jsx)("button",{onClick:eS,className:"px-4 py-2 rounded bg-red-600 text-white font-bold hover:bg-red-700 disabled:bg-red-300",disabled:k[`remove_${er.user.id}`],children:k[`remove_${er.user.id}`]?"Eliminando...":"Eliminar"})]})]})}),ea&&(0,E.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,E.jsxs)("div",{className:`bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 max-w-sm w-full border-l-4 ${"success"===ea.type?"border-green-500":"border-red-500"}`,children:[(0,E.jsx)("h3",{className:`text-lg font-bold mb-2 ${"success"===ea.type?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:"success"===ea.type?"Invitación enviada":"Error"}),(0,E.jsx)("p",{className:"mb-4 text-slate-600 dark:text-slate-300",children:ea.text}),(0,E.jsx)("div",{className:"flex justify-end",children:(0,E.jsx)("button",{onClick:()=>ei(null),className:"px-4 py-2 rounded bg-primary-600 text-white font-bold hover:bg-primary-700",children:"Cerrar"})})]})}),es&&(0,E.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 max-w-sm w-full border-l-4 border-red-500",children:[(0,E.jsx)("h3",{className:"text-lg font-bold mb-2 text-red-700 dark:text-red-300",children:"Usuario eliminado"}),(0,E.jsxs)("p",{className:"mb-4 text-slate-600 dark:text-slate-300",children:[(0,E.jsx)("span",{className:"font-semibold",children:es.userName})," ha sido eliminado de ",(0,E.jsx)("span",{className:"font-semibold",children:es.homeName}),"."]}),(0,E.jsx)("p",{className:"mb-4 text-slate-600 dark:text-slate-300",children:"Ya no tendrá acceso a las tareas ni a los miembros de esta casa."}),(0,E.jsx)("div",{className:"flex justify-end",children:(0,E.jsx)("button",{onClick:()=>ed(null),className:"px-4 py-2 rounded bg-primary-600 text-white font-bold hover:bg-primary-700",children:"Entendido"})})]})}),(0,E.jsx)(eP,{isOpen:em,onClose:()=>eg(!1)}),ef&&(0,E.jsx)(eT,{isOpen:ef,onClose:()=>ep(!1),onConfirmDelete:async e=>{let t=await g(e);t.success||(ey("error",t.message),ep(!1))}})]})},S=w("acw62"),eR="basil",eL="https://js.stripe.com",eM="".concat(eL,"/").concat(eR,"/stripe.js"),eU=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,eF=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,eV=function(){for(var e=document.querySelectorAll('script[src^="'.concat(eL,'"]')),t=0;t<e.length;t++){var r,n=e[t];if(r=n.src,eU.test(r)||eF.test(r))return n}return null},ez=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(eM).concat(t);var n=document.head||document.body;if(!n)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},eB=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"7.6.1",startTime:t})},eH=null,eq=null,e$=null,eW=function(e,t,r){if(null===e)return null;var n,a=t[0].match(/^pk_test/),i=3===(n=e.version)?"v3":n;a&&i!==eR&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.6.1"," expected Stripe.js@").concat(eR,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var s=e.apply(void 0,t);return eB(s,r),s},eG=!1,eK=function(){return f?f:f=(null!==eH?eH:(eH=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document)return void e(null);if(window.Stripe,window.Stripe)return void e(window.Stripe);try{var r,n=eV();n?n&&null!==e$&&null!==eq&&(n.removeEventListener("load",e$),n.removeEventListener("error",eq),null==(r=n.parentNode)||r.removeChild(n),n=ez(null)):n=ez(null),e$=function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))},eq=function(e){t(Error("Failed to load Stripe.js",{cause:e}))},n.addEventListener("load",e$),n.addEventListener("error",eq)}catch(e){t(e);return}})).catch(function(e){return eH=null,Promise.reject(e)})).catch(function(e){return f=null,Promise.reject(e)})};Promise.resolve().then(function(){return eK()}).catch(function(e){eG||console.warn(e)});var eQ=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];eG=!0;var n=Date.now();return eK().then(function(e){return eW(e,t,n)})};w("6AR8M");var A=w("2EDex"),S=w("acw62"),eY=function(){return(eY=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},eX=function(e){return{loading:null==e,value:e}},eJ=function(e){var t=e?e():void 0,r=(0,S.useReducer)(function(e,t){switch(t.type){case"error":return eY(eY({},e),{error:t.error,loading:!1,value:void 0});case"reset":return eX(t.defaultValue);case"value":return eY(eY({},e),{error:void 0,loading:!1,value:t.value});default:return e}},eX(t)),n=r[0],a=r[1],i=(0,S.useCallback)(function(){a({type:"reset",defaultValue:e?e():void 0})},[e]),s=(0,S.useCallback)(function(e){a({type:"error",error:e})},[]),o=(0,S.useCallback)(function(e){a({type:"value",value:e})},[]);return(0,S.useMemo)(function(){return{error:n.error,loading:n.loading,reset:i,setError:s,setValue:o,value:n.value}},[n.error,n.loading,i,s,o,n.value])},eZ=function(e,t){var r=eJ(function(){return e.currentUser}),n=r.error,a=r.loading,i=r.setError,s=r.setValue,o=r.value;return(0,S.useEffect)(function(){var r=(0,A.y)(e,function(e){var r,n,a,o;return r=void 0,n=void 0,a=void 0,o=function(){return function(e,t){var r,n,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){var l=[i,o];if(r)throw TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(a=2&l[0]?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,n=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(a=(a=s.trys).length>0&&a[a.length-1])&&(6===l[0]||2===l[0])){s=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){s.label=l[1];break}if(6===l[0]&&s.label<a[1]){s.label=a[1],a=l;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(l);break}a[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],n=0}finally{r=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(r){switch(r.label){case 0:if(!(null==t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return i(r.sent()),[3,4];case 4:return s(e),[2]}})},new(a||(a=Promise))(function(e,t){function i(e){try{l(o.next(e))}catch(e){t(e)}}function s(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof a?r:new a(function(e){e(r)})).then(i,s)}l((o=o.apply(r,n||[])).next())})},i);return function(){r()}},[e]),[o,a,n]},D=w("e0EYX");const e0="",e1="",e2=["\uD83C\uDFE0 Casas ilimitadas","\uD83D\uDC65 Miembros ilimitados por casa","✅ Tareas activas ilimitadas","\uD83D\uDCCA Historial completo de tareas","\uD83D\uDCC8 Estadísticas mensuales y anuales"];var e5=({onViewChange:e})=>{let{platform:t}=eh(),[r]=eZ(D.auth),[n,a]=(0,S.useState)(!1),i={monthly:e0,yearly:e1},s=async e=>{a(!0);try{if("web"===t){let t=eQ(""),n=await t;if(!n)throw Error("Stripe no se pudo cargar");let a={lineItems:[{price:i[e],quantity:1}],mode:"subscription",successUrl:`${window.location.origin}/success?session_id={CHECKOUT_SESSION_ID}&plan=${e}`,cancelUrl:`${window.location.origin}/settings`,customerEmail:r?.email||void 0,clientReferenceId:r?.uid},{error:s}=await n.redirectToCheckout(a);s&&(console.error("Error al redirigir a Stripe:",s),alert("Error al procesar el pago. Por favor, inténtalo de nuevo."))}else alert("Iniciando compra in-app... (implementación pendiente)")}catch(e){console.error("Error al iniciar el proceso de pago:",e),alert("Error al procesar el pago. Por favor, inténtalo de nuevo.")}finally{a(!1)}},o=Math.round(30.555555555555557);return(0,E.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:(0,E.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,E.jsxs)("div",{className:"text-center mb-12",children:[(0,E.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-6",children:"Desbloquea HouseZen Premium"}),(0,E.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Transforma la gestión de tu hogar con funciones avanzadas y sin límites"})]}),(0,E.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl p-6 mb-12 text-center text-white shadow-xl",children:[(0,E.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\uD83C\uDF89 ¡Oferta Especial del Plan Anual!"}),(0,E.jsxs)("p",{className:"text-lg",children:["Ahorra ",(0,E.jsxs)("span",{className:"font-bold text-3xl",children:[11,"€"]})," al año eligiendo el plan anual"]}),(0,E.jsxs)("p",{className:"text-green-100 mt-2",children:["Eso es un ",(0,E.jsxs)("span",{className:"font-semibold",children:[o,"% de descuento"]})," comparado con el plan mensual"]})]}),(0,E.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8 mb-12",children:[(0,E.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-200 transform hover:scale-105 transition-all duration-300",children:[(0,E.jsxs)("div",{className:"text-center mb-8",children:[(0,E.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Plan Mensual"}),(0,E.jsxs)("div",{className:"mb-6",children:[(0,E.jsxs)("span",{className:"text-5xl font-bold text-blue-600",children:[3,"€"]}),(0,E.jsx)("span",{className:"text-gray-600 text-lg",children:"/mes"})]}),(0,E.jsx)("p",{className:"text-gray-500",children:"Perfecto para probar Premium"})]}),(0,E.jsx)("button",{onClick:()=>s("monthly"),disabled:n,className:"w-full bg-blue-600 text-white py-4 px-6 rounded-xl font-semibold text-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl",children:n?"Procesando...":"Comenzar Plan Mensual"})]}),(0,E.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 to-purple-700 rounded-2xl shadow-2xl p-8 border-4 border-yellow-400 transform hover:scale-105 transition-all duration-300 relative",children:[(0,E.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:(0,E.jsx)("span",{className:"bg-yellow-400 text-gray-900 px-6 py-2 rounded-full text-sm font-bold shadow-lg",children:"\uD83C\uDFC6 MÁS POPULAR"})}),(0,E.jsx)("div",{className:"absolute -top-4 -right-4",children:(0,E.jsx)("div",{className:"bg-green-500 text-white rounded-full w-20 h-20 flex items-center justify-center shadow-lg transform rotate-12",children:(0,E.jsxs)("div",{className:"text-center",children:[(0,E.jsx)("div",{className:"text-xs font-bold",children:"AHORRA"}),(0,E.jsxs)("div",{className:"text-lg font-bold",children:[o,"%"]})]})})}),(0,E.jsxs)("div",{className:"text-center mb-8 text-white",children:[(0,E.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"Plan Anual"}),(0,E.jsx)("div",{className:"mb-2",children:(0,E.jsxs)("span",{className:"text-3xl text-blue-200 line-through",children:[36,"€"]})}),(0,E.jsxs)("div",{className:"mb-6",children:[(0,E.jsxs)("span",{className:"text-5xl font-bold",children:[25,"€"]}),(0,E.jsx)("span",{className:"text-blue-200 text-lg",children:"/año"})]}),(0,E.jsxs)("div",{className:"bg-white/20 rounded-lg p-3 mb-4",children:[(0,E.jsxs)("p",{className:"text-lg font-semibold",children:["Solo ",(25/12).toFixed(2),"€/mes"]}),(0,E.jsxs)("p",{className:"text-blue-200 text-sm",children:["Te ahorras ",11,"€ al año"]})]})]}),(0,E.jsx)("button",{onClick:()=>s("yearly"),disabled:n,className:"w-full bg-yellow-400 text-gray-900 py-4 px-6 rounded-xl font-bold text-lg hover:bg-yellow-300 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl",children:n?"Procesando...":"\uD83D\uDE80 ¡Obtener Plan Anual!"}),(0,E.jsxs)("div",{className:"mt-6 bg-white/10 rounded-lg p-4",children:[(0,E.jsx)("h4",{className:"font-semibold text-white mb-2",children:"✨ Beneficios exclusivos del plan anual:"}),(0,E.jsxs)("ul",{className:"text-blue-100 text-sm space-y-1",children:[(0,E.jsx)("li",{children:"• Acceso prioritario a nuevas funciones"}),(0,E.jsx)("li",{children:"• Soporte técnico premium"}),(0,E.jsx)("li",{children:"• Temas exclusivos adicionales"})]})]})]})]}),(0,E.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-12",children:[(0,E.jsx)("h3",{className:"text-2xl font-bold text-center text-gray-900 mb-8",children:"\uD83D\uDCB0 Comparación de Ahorro"}),(0,E.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 text-center",children:[(0,E.jsxs)("div",{className:"p-6 bg-gray-50 rounded-xl",children:[(0,E.jsxs)("div",{className:"text-3xl font-bold text-gray-600 mb-2",children:[36,"€"]}),(0,E.jsx)("div",{className:"text-gray-500",children:"Plan Mensual (12 meses)"})]}),(0,E.jsxs)("div",{className:"p-6 bg-green-50 rounded-xl border-2 border-green-500",children:[(0,E.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[25,"€"]}),(0,E.jsx)("div",{className:"text-green-700 font-semibold",children:"Plan Anual"})]}),(0,E.jsxs)("div",{className:"p-6 bg-yellow-50 rounded-xl",children:[(0,E.jsxs)("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:["-",11,"€"]}),(0,E.jsx)("div",{className:"text-yellow-700 font-semibold",children:"Tu Ahorro"})]})]})]}),(0,E.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,E.jsx)("h3",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"\uD83C\uDF1F Todo lo que incluye Premium"}),(0,E.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e2.map((e,t)=>(0,E.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl hover:from-blue-100 hover:to-indigo-100 transition-all duration-300",children:[(0,E.jsx)(el,{className:"w-6 h-6 text-green-500 flex-shrink-0"}),(0,E.jsx)("span",{className:"text-gray-700 font-medium",children:e})]},t))})]}),(0,E.jsxs)("div",{className:"text-center mt-12",children:[(0,E.jsx)("p",{className:"text-gray-600 mb-6",children:"¿Tienes dudas? Puedes cancelar tu suscripción en cualquier momento"}),(0,E.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,E.jsx)("span",{className:"inline-flex items-center px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"✅ Sin compromisos"}),(0,E.jsx)("span",{className:"inline-flex items-center px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"\uD83D\uDD12 Pago seguro"}),(0,E.jsx)("span",{className:"inline-flex items-center px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:"⚡ Activación inmediata"})]})]})]})})},S=(w("acw62"),w("acw62")),e3=w("1u0KT");function e4(){return(e4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function e6(e,t){if(!1===e||null==e)throw Error(t)}(i=p||(p={})).Pop="POP",i.Push="PUSH",i.Replace="REPLACE";function e8(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}(s=m||(m={})).data="data",s.deferred="deferred",s.redirect="redirect",s.error="error";function e7(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field [")+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function e9(e,t){let r=e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0);return t?r.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase):r.map(e=>e.pathnameBase)}function te(e,t,r,n){let a,i;void 0===n&&(n=!1),"string"==typeof e?a=e8(e):(e6(!(a=e4({},e)).pathname||!a.pathname.includes("?"),e7("?","pathname","search",a)),e6(!a.pathname||!a.pathname.includes("#"),e7("#","pathname","hash",a)),e6(!a.search||!a.search.includes("#"),e7("#","search","hash",a)));let s=""===e||""===a.pathname,o=s?"/":a.pathname;if(null==o)i=r;else{let e=t.length-1;if(!n&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){var r;let n;void 0===t&&(t="/");let{pathname:a,search:i="",hash:s=""}="string"==typeof e?e8(e):e;return{pathname:a?a.startsWith("/")?a:(r=a,n=t.replace(/\/+$/,"").split("/"),r.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"):t,search:tt(i),hash:tr(s)}}(a,i),u=o&&"/"!==o&&o.endsWith("/"),c=(s||"."===o)&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const tt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",tr=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Symbol("deferred");var S=w("acw62");function tn(){return(tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const ta=S.createContext(null),ti=S.createContext(null),ts=S.createContext(null),to=S.createContext({outlet:null,matches:[],isDataRoute:!1});function tl(){return null!=S.useContext(ts)}function tu(){return tl()||e6(!1),S.useContext(ts).location}function tc(e){S.useContext(ti).static||S.useLayoutEffect(e)}S.Component;var td=((o=td||{}).UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o),th=((l=th||{}).UseBlocker="useBlocker",l.UseLoaderData="useLoaderData",l.UseActionData="useActionData",l.UseRouteError="useRouteError",l.UseNavigation="useNavigation",l.UseRouteLoaderData="useRouteLoaderData",l.UseMatches="useMatches",l.UseRevalidator="useRevalidator",l.UseNavigateStable="useNavigate",l.UseRouteId="useRouteId",l);S.startTransition;var tf=((u=tf||{})[u.pending=0]="pending",u[u.success=1]="success",u[u.error=2]="error",u);new Promise(()=>{});S.Component;function tp(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}try{window.__reactRouterVersion="6"}catch(e){}S.startTransition,e3.flushSync,S.useId,"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement;(c=g||(g={})).UseScrollRestoration="useScrollRestoration",c.UseSubmit="useSubmit",c.UseSubmitFetcher="useSubmitFetcher",c.UseFetcher="useFetcher",c.useViewTransitionState="useViewTransitionState",(d=y||(y={})).UseFetcher="useFetcher",d.UseFetchers="useFetchers",d.UseScrollRestoration="useScrollRestoration";w("ilpIi");var O=w("9HrqM"),D=w("e0EYX"),tm=()=>{let e,t,r,n,a,i,[s]=(e=S.useRef(tp(void 0)),t=S.useRef(!1),r=tu(),n=S.useMemo(()=>{var n,a;let i;return n=r.search,a=t.current?null:e.current,i=tp(n),a&&a.forEach((e,t)=>{i.has(t)||a.getAll(t).forEach(e=>{i.append(t,e)})}),i},[r.search]),a=function(){let{isDataRoute:e}=S.useContext(to);return e?function(){let e,{router:t}=(td.UseNavigateStable,(e=S.useContext(ta))||e6(!1),e),r=function(e){let t,r=((t=S.useContext(to))||e6(!1),t),n=r.matches[r.matches.length-1];return n.route.id||e6(!1),n.route.id}(th.UseNavigateStable),n=S.useRef(!1);return tc(()=>{n.current=!0}),S.useCallback(function(e,a){void 0===a&&(a={}),n.current&&("number"==typeof e?t.navigate(e):t.navigate(e,tn({fromRouteId:r},a)))},[t,r])}():function(){tl()||e6(!1);let e=S.useContext(ta),{basename:t,future:r,navigator:n}=S.useContext(ti),{matches:a}=S.useContext(to),{pathname:i}=tu(),s=JSON.stringify(e9(a,r.v7_relativeSplatPath)),o=S.useRef(!1);return tc(()=>{o.current=!0}),S.useCallback(function(r,a){if(void 0===a&&(a={}),!o.current)return;if("number"==typeof r)return void n.go(r);let l=te(r,JSON.parse(s),i,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:[t,l.pathname].join("/").replace(/\/\/+/g,"/")),(a.replace?n.replace:n.push)(l,a.state,a)},[t,n,s,i,e])}()}(),i=S.useCallback((e,r)=>{let i=tp("function"==typeof e?e(n):e);t.current=!0,a("?"+i,r)},[a,n]),[n,i]),[o]=eZ(D.auth),[l,u]=(0,S.useState)(!0),[c,d]=(0,S.useState)(!1),h=s.get("session_id"),f=s.get("plan");return((0,S.useEffect)(()=>{(async()=>{if(o&&h&&f)try{let e=new Date,t=new Date(e);"yearly"===f?t.setFullYear(e.getFullYear()+1):t.setMonth(e.getMonth()+1),await (0,O.updateDoc)((0,O.doc)(D.db,"users",o.uid),{plan:"premium",subscriptionType:f,subscriptionStart:e,subscriptionEnd:t,stripeSessionId:h,updatedAt:e}),d(!0)}catch(e){console.error("Error al actualizar el plan del usuario:",e)}u(!1)})()},[o,h,f]),l)?(0,E.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center",children:(0,E.jsxs)("div",{className:"text-center",children:[(0,E.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4"}),(0,E.jsx)("p",{className:"text-lg text-gray-600",children:"Procesando tu suscripción..."})]})}):(0,E.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:(0,E.jsx)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:c?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ed,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,E.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"¡Pago Exitoso!"}),(0,E.jsxs)("p",{className:"text-gray-600 mb-6",children:["Tu suscripción ","yearly"===f?"anual":"mensual"," ha sido activada correctamente."]}),(0,E.jsx)("button",{onClick:()=>window.location.href="/dashboard",className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition-colors",children:"Ir al Dashboard"})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,E.jsx)("span",{className:"text-red-600 text-2xl",children:"✕"})}),(0,E.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error en el Pago"}),(0,E.jsx)("p",{className:"text-gray-600 mb-6",children:"Hubo un problema al procesar tu suscripción. Por favor, contacta con soporte."}),(0,E.jsx)("button",{onClick:()=>window.location.href="/settings",className:"w-full bg-gray-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-gray-700 transition-colors",children:"Volver a Configuración"})]})})})},S=w("acw62");const tg=e=>/^\p{Emoji}$/u.test(e);var ty=({onSave:e,onCancel:t,task:r,homeId:n,members:a,currentUser:i,selectedDate:s,onUpdateDayAssignment:o,onUpdateDayStatus:l,getPeriodicTaskDayInfo:u})=>{let[c,d]=(0,S.useState)(""),[h,f]=(0,S.useState)(""),[p,m]=(0,S.useState)("\uD83E\uDDF9"),[g,y]=(0,S.useState)(0),[v,b]=(0,S.useState)(s||new Date),[x,w]=(0,S.useState)(null),[k,N]=(0,S.useState)(T.NONE),[_,I]=(0,S.useState)(7),[C,D]=(0,S.useState)(void 0),[A,j]=(0,S.useState)(!1),[P,O]=(0,S.useState)(!1),[R,M]=(0,S.useState)(null),{isPremium:U}=X(i,[],null,[]);(0,S.useEffect)(()=>{r?(d(r.title),f(r.description),m(r.emoji),y(r.points),b(new Date(r.dueDate)),w(r.endDate?new Date(r.endDate):null),N(r.periodicity),D(r.assignedTo??void 0)):(b(s||new Date),w(null))},[r,s]);let F=async t=>{t.preventDefault(),j(!0);let a={title:c,description:h,emoji:p,points:g,dueDate:v.toISOString(),homeId:n,assignedTo:C||null};a=r?{...a,periodicity:r.periodicity,endDate:r.endDate?r.endDate:null,customDays:r.customDays}:{...a,periodicity:k,endDate:k!==T.NONE&&x?x.toISOString():null,customDays:k===T.CUSTOM_DAYS?_:null};try{if(r&&"id"in r){let t={...r,...a};Object.keys(t).forEach(e=>{void 0===t[e]&&delete t[e]}),await e(t)}else await e(a);M({message:"Tarea guardada con éxito.",type:"success"})}catch(e){console.log(e),M({message:"Error al guardar la tarea.",type:"error"})}finally{j(!1),O(!0)}};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("form",{onSubmit:F,className:"p-6 space-y-6 bg-white dark:bg-slate-800 rounded-xl shadow-lg max-w-2xl mx-auto border border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("div",{className:"text-center mb-6",children:(0,E.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,E.jsx)("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full shadow-md",children:(0,E.jsx)(J,{className:"w-5 h-5 text-white"})}),(0,E.jsx)("h2",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:r?"Editar Tarea":"Crear Nueva Tarea"})]})}),(0,E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,E.jsxs)("div",{className:"md:col-span-2 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,E.jsx)("div",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center",children:(0,E.jsx)(el,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),(0,E.jsx)("h3",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:"Información Básica"})]}),(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Título de la tarea"}),(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("input",{type:"text",id:"title",value:c,onChange:e=>d(e.target.value),maxLength:16,required:!0,className:"mt-1 block w-full px-3 py-2 rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-700 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base font-medium",placeholder:"Ej: Lavar platos"}),(0,E.jsxs)("div",{className:"absolute right-2 top-2 text-xs text-slate-500 dark:text-slate-400",children:[c.length,"/16"]})]})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Descripción (opcional)"}),(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("textarea",{id:"description",value:h,onChange:e=>f(e.target.value),maxLength:200,rows:3,className:"mt-1 block w-full px-3 py-2 rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-700 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Describe los detalles de la tarea..."}),(0,E.jsxs)("div",{className:"absolute right-2 bottom-2 text-xs text-slate-500 dark:text-slate-400",children:[h.length,"/200"]})]})]})]})]}),(0,E.jsxs)("div",{className:"md:col-span-2 bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,E.jsx)("div",{className:"w-6 h-6 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center",children:(0,E.jsx)(en,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"})}),(0,E.jsx)("h3",{className:"text-lg font-semibold text-purple-700 dark:text-purple-300",children:"Configuración"})]}),(0,E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{htmlFor:"emoji",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Icono"}),(0,E.jsx)("input",{type:"text",value:p,onChange:e=>{let t=e.target.value;t.length<=2&&(""===t||tg(t))?m(t):(M({message:"Por favor, inserta un emoji válido.",type:"error"}),O(!0))},className:"text-2xl w-16 h-16 text-center rounded-lg border border-slate-300 dark:border-slate-600 bg-slate-50 dark:bg-slate-700 focus:border-primary-500 focus:ring-primary-500",placeholder:"\uD83D\uDE04"})]}),(0,E.jsxs)("div",{children:[(0,E.jsxs)("label",{htmlFor:"points",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Puntos: ",(0,E.jsx)("span",{className:"font-semibold text-primary-600 dark:text-primary-400",children:g})]}),(0,E.jsx)("input",{type:"range",id:"points",min:"0",max:"100",step:"5",value:g,onChange:e=>y(Number(e.target.value)),className:"mt-1 block w-full h-2 bg-slate-200 dark:bg-slate-600 rounded-lg appearance-none cursor-pointer"}),(0,E.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mt-1",children:[(0,E.jsx)("span",{children:"0"}),(0,E.jsx)("span",{children:"50"}),(0,E.jsx)("span",{children:"100"})]})]})]})]}),(0,E.jsxs)("div",{className:"md:col-span-2 bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,E.jsx)("div",{className:"w-6 h-6 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center",children:(0,E.jsx)(el,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),(0,E.jsx)("h3",{className:"text-lg font-semibold text-green-700 dark:text-green-300",children:"Fechas y Periodicidad"})]}),(0,E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha Límite"}),(0,E.jsx)("input",{type:"date",id:"dueDate",value:(e=>{let t=new Date(e);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,10)})(v),min:k!==T.NONE?new Date().toISOString().slice(0,10):void 0,onChange:e=>{let t=new Date(e.target.value);if(k!==T.NONE){let e=new Date;if(e.setHours(0,0,0,0),t<e){M({message:"Las tareas periódicas deben comenzar desde hoy en adelante",type:"error"}),O(!0);return}}b(t)},required:!0,className:"mt-1 block w-full px-3 py-2 rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-700 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),k!==T.NONE&&(0,E.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Las tareas periódicas deben comenzar desde hoy en adelante"})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{htmlFor:"periodicity",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Periodicidad"}),(0,E.jsx)("select",{id:"periodicity",value:k,onChange:e=>N(e.target.value),className:"mt-1 block w-full px-3 py-2 rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-700 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:null!==r,children:L.map(e=>(0,E.jsx)("option",{value:e,children:e},e))}),r&&(0,E.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"La periodicidad no se puede modificar en tareas existentes"})]}),k!==T.NONE&&(0,E.jsxs)("div",{className:"md:col-span-2",children:[(0,E.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha límite de repetición"}),(0,E.jsx)("input",{type:"date",id:"endDate",value:x?x.toISOString().split("T")[0]:"",max:new Date(new Date().setDate(new Date().getDate()+(U?365:14))).toISOString().split("T")[0],onChange:e=>{if(e.target.value){let t=new Date(e.target.value),r=new Date;if(r.setDate(r.getDate()+(U?365:14)),t>r){M({message:`La fecha l\xedmite no puede ser mayor a ${U?"365":"14"} d\xedas desde hoy para usuarios ${U?"premium":"gratuitos"}`,type:"error"}),O(!0);return}if(t<=v){M({message:"La fecha límite de repetición debe ser posterior a la fecha límite inicial",type:"error"}),O(!0);return}w(t)}else w(null)},className:"mt-1 block w-full px-3 py-2 rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-700 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:null!==r}),(0,E.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:r?"La fecha límite de repetición no se puede modificar en tareas existentes":`Opcional: fecha hasta la que se repetir\xe1 la tarea (m\xe1ximo ${U?"365":"14"} d\xedas para usuarios ${U?"premium":"gratuitos"})`})]}),k===T.CUSTOM_DAYS&&(0,E.jsxs)("div",{className:"md:col-span-2",children:[(0,E.jsx)("label",{htmlFor:"customDays",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cada cuántos días"}),(0,E.jsx)("input",{type:"number",id:"customDays",min:"1",max:"365",value:_,onChange:e=>I(Math.max(1,parseInt(e.target.value)||1)),className:"mt-1 block w-full px-3 py-2 rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-700 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:null!==r}),r&&(0,E.jsx)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"No se puede modificar en tareas existentes"})]})]})]}),r&&r.periodicity!==T.NONE&&o&&l&&u?(0,E.jsxs)("div",{className:"md:col-span-2 bg-teal-50 dark:bg-teal-900/20 p-4 rounded-lg border border-teal-200 dark:border-teal-800",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,E.jsx)("div",{className:"w-6 h-6 bg-teal-100 dark:bg-teal-900 rounded-lg flex items-center justify-center",children:(0,E.jsx)(eo,{className:"w-4 h-4 text-teal-600 dark:text-teal-400"})}),(0,E.jsx)("h3",{className:"text-lg font-semibold text-teal-700 dark:text-teal-300",children:"Gestión Diaria"})]}),(0,E.jsx)(ey,{task:r,users:a,onUpdateDayAssignment:(e,t,r)=>o(e,t,r),onUpdateDayStatus:(e,t,r)=>l(e,t,r),getPeriodicTaskDayInfo:u})]}):(0,E.jsxs)("div",{className:"md:col-span-2 bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,E.jsx)("div",{className:"w-6 h-6 bg-emerald-100 dark:bg-emerald-900 rounded-lg flex items-center justify-center",children:(0,E.jsx)(eo,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"})}),(0,E.jsx)("h3",{className:"text-lg font-semibold text-emerald-700 dark:text-emerald-300",children:"Asignación"})]}),(0,E.jsx)("label",{htmlFor:"assignedTo",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignar a"}),(0,E.jsxs)("select",{id:"assignedTo",value:C||"",onChange:e=>D(e.target.value||void 0),className:"mt-1 block w-full px-3 py-2 rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-700 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,E.jsx)("option",{value:"",children:"Sin asignar"}),a.map(e=>(0,E.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,E.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-800 dark:text-slate-100 font-medium rounded-lg transition-colors duration-200",children:"Cancelar"}),(0,E.jsxs)("button",{type:"submit",disabled:A||!tg(p),className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg flex items-center gap-2 disabled:bg-primary-300 transition-colors duration-200",children:[(0,E.jsx)(J,{className:"w-5 h-5"}),A?"Guardando...":r?"Guardar Cambios":"Crear Tarea"]})]})]}),P&&R&&(0,E.jsx)(eg,{isOpen:P,onClose:()=>O(!1),children:(0,E.jsxs)("div",{className:`p-4 rounded-md ${"success"===R.type?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-200":"bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-200"}`,children:[(0,E.jsx)("p",{children:R.message}),(0,E.jsx)("button",{onClick:()=>O(!1),className:"mt-4 px-4 py-2 bg-primary-600 text-white rounded-md",children:"Cerrar"})]})})]})};w("acw62");var tv=({isOpen:e,onClose:t,onUpgrade:r,reason:n})=>e?(0,E.jsx)(eg,{isOpen:e,onClose:t,children:(0,E.jsxs)("div",{className:"p-6 text-center",children:[(0,E.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-gradient-to-r from-secondary-200 to-primary-200 mb-4",children:(0,E.jsx)("span",{className:"text-4xl",children:"✨"})}),(0,E.jsx)("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Desbloquea más poder"}),(0,E.jsx)("div",{className:"mt-2 px-4 text-sm text-slate-600 dark:text-slate-300",children:(0,E.jsx)("p",{children:n})}),(0,E.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 justify-center",children:[(0,E.jsx)("button",{onClick:t,type:"button",className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent px-4 py-2 bg-slate-200 dark:bg-slate-700 text-base font-medium text-slate-700 dark:text-slate-200 hover:bg-slate-300 dark:hover:bg-slate-600",children:"Entendido"}),(0,E.jsx)("button",{onClick:r,type:"button",className:"w-full sm:w-auto inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 opacity-50 cursor-not-allowed",disabled:!0,children:"Ver Plan Premium"})]})]})}):null,S=w("acw62");const tb={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function tx(e){return (t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const tw={date:tx({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:tx({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:tx({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},tk={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function tE(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,a=r?.width?String(r.width):t;n=e.formattingValues[a]||e.formattingValues[t]}else{let t=e.defaultWidth,a=r?.width?String(r.width):e.defaultWidth;n=e.values[a]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function tS(e){return(t,r={})=>{let n,a=r.width,i=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;let o=s[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(l,e=>e.test(o)):function(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(l,e=>e.test(o));return n=e.valueCallback?e.valueCallback(u):u,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(o.length)}}}function tN(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let a=n[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:t.slice(a.length)}}}const t_={code:"en-US",formatDistance:(e,t,r)=>{let n,a=tb[e];if(n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),r?.addSuffix)if(r.comparison&&r.comparison>0)return"in "+n;else return n+" ago";return n},formatLong:tw,formatRelative:(e,t,r,n)=>tk[e],localize:{ordinalNumber:(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:tE({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:tE({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:tE({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:tE({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:tE({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:tN({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:tS({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:tS({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tS({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:tS({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tS({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let tT={};function tI(e){let t=W(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),e-r}function tC(e,...t){let r=$.bind(null,e||t.find(e=>"object"==typeof e));return t.map(r)}function tD(e,t){let r=W(e)-W(t);return r<0?-1:r>0?1:r}const tA={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},tj={date:tx({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:tx({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:tx({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},tP={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},tO={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},tR={code:"es",formatDistance:(e,t,r)=>{let n,a=tA[e];if(n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),r?.addSuffix)if(r.comparison&&r.comparison>0)return"en "+n;else return"hace "+n;return n},formatLong:tj,formatRelative:(e,t,r,n)=>1!==t.getHours()?tO[e]:tP[e],localize:{ordinalNumber:(e,t)=>Number(e)+"º",era:tE({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},defaultWidth:"wide"}),quarter:tE({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:tE({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:tE({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},defaultWidth:"wide"}),dayPeriod:tE({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:tN({matchPattern:/^(\d+)(º)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:tS({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},defaultParseWidth:"any"}),quarter:tS({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:tS({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:tS({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:tS({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:1}};var tL=({isOpen:e,onClose:t})=>{let{notifications:r,markNotificationAsRead:n,unreadNotifications:a}=Y(),[i,s]=(0,S.useState)("unread");(0,S.useEffect)(()=>{let r=r=>{let n=document.getElementById("notifications-panel");n&&!n.contains(r.target)&&e&&t()};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[e,t]);let o="unread"===i?r.filter(e=>!e.read):r;return(0,E.jsxs)("div",{id:"notifications-panel",className:`fixed right-4 top-16 w-96 max-w-[calc(100vw-2rem)] bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 z-50 transition-transform duration-300 ${e?"translate-y-0 opacity-100":"-translate-y-4 opacity-0 pointer-events-none"}`,children:[(0,E.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[(0,E.jsx)("h3",{className:"font-bold text-lg",children:"Notificaciones"}),(0,E.jsxs)("div",{className:"flex space-x-2",children:[(0,E.jsxs)("button",{onClick:()=>s("unread"),className:`px-3 py-1 text-sm rounded-full ${"unread"===i?"bg-primary-100 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300 font-semibold":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:["No leídas ",a.length>0&&`(${a.length})`]}),(0,E.jsx)("button",{onClick:()=>s("all"),className:`px-3 py-1 text-sm rounded-full ${"all"===i?"bg-primary-100 text-primary-700 dark:bg-primary-900/50 dark:text-primary-300 font-semibold":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:"Todas"})]})]}),(0,E.jsx)("div",{className:"max-h-[70vh] overflow-y-auto",children:0===o.length?(0,E.jsxs)("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:[(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto mb-3 text-slate-400 dark:text-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),(0,E.jsx)("p",{className:"font-medium",children:"unread"===i?"No tienes notificaciones sin leer":"No tienes notificaciones"}),"unread"===i&&r.length>0&&(0,E.jsx)("button",{onClick:()=>s("all"),className:"mt-2 text-primary-600 dark:text-primary-400 text-sm hover:underline",children:"Ver todas las notificaciones"})]}):(0,E.jsx)("ul",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:o.map(e=>{var t,r;return(0,E.jsx)("li",{className:`p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 ${!e.read?"bg-primary-50 dark:bg-primary-900/20":""}`,children:(0,E.jsxs)("div",{className:"flex items-start gap-3",children:[(e=>{switch(e){case"home_invitation":return(0,E.jsx)("div",{className:"flex-shrink-0 rounded-full p-2 bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300",children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,E.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})})});case"home_removal":return(0,E.jsx)("div",{className:"flex-shrink-0 rounded-full p-2 bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-300",children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,E.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})});case"task_assigned":return(0,E.jsx)("div",{className:"flex-shrink-0 rounded-full p-2 bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-300",children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,E.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})});case"task_completed":return(0,E.jsx)("div",{className:"flex-shrink-0 rounded-full p-2 bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-300",children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,E.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})});default:return(0,E.jsx)("div",{className:"flex-shrink-0 rounded-full p-2 bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300",children:(0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,E.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})}})(e.type),(0,E.jsxs)("div",{className:"flex-grow",children:[(0,E.jsxs)("div",{className:"flex justify-between items-start",children:[(0,E.jsx)("h4",{className:"font-semibold text-slate-900 dark:text-white",children:e.title}),(0,E.jsx)("span",{className:"text-xs text-slate-500 dark:text-slate-400 whitespace-nowrap ml-2",children:(t=e.createdAt.toDate(),r={addSuffix:!0,locale:tR},function(e,t,r){let n,a=r?.locale??tT.locale??t_,i=tD(e,t);if(isNaN(i))throw RangeError("Invalid time value");let s=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:i}),[o,l]=tC(r?.in,...i>0?[t,e]:[e,t]),u=function(e,t,r){var n;return(n=void 0,e=>{let t=(n?Math[n]:Math.trunc)(e);return 0===t?0:t})((W(e)-W(t))/1e3)}(l,o),c=Math.round((u-(tI(l)-tI(o))/1e3)/60);if(c<2)if(r?.includeSeconds)if(u<5)return a.formatDistance("lessThanXSeconds",5,s);else if(u<10)return a.formatDistance("lessThanXSeconds",10,s);else if(u<20)return a.formatDistance("lessThanXSeconds",20,s);else if(u<40)return a.formatDistance("halfAMinute",0,s);else if(u<60)return a.formatDistance("lessThanXMinutes",1,s);else return a.formatDistance("xMinutes",1,s);else if(0===c)return a.formatDistance("lessThanXMinutes",1,s);else return a.formatDistance("xMinutes",c,s);if(c<45)return a.formatDistance("xMinutes",c,s);if(c<90)return a.formatDistance("aboutXHours",1,s);if(c<1440){let e=Math.round(c/60);return a.formatDistance("aboutXHours",e,s)}if(c<2520)return a.formatDistance("xDays",1,s);else if(c<43200){let e=Math.round(c/1440);return a.formatDistance("xDays",e,s)}else if(c<86400)return n=Math.round(c/43200),a.formatDistance("aboutXMonths",n,s);if((n=function(e,t,r){let[n,a,i]=tC(void 0,e,e,t),s=tD(a,i),o=Math.abs(function(e,t,r){let[n,a]=tC(void 0,e,t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}(a,i));if(o<1)return 0;1===a.getMonth()&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*o);let l=tD(a,i)===-s;(function(e,t){let r=W(e,void 0);return+function(e,t){let r=W(e,t?.in);return r.setHours(23,59,59,999),r}(r,void 0)==+function(e,t){let r=W(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}(r,t)})(n)&&1===o&&1===tD(n,i)&&(l=!1);let u=s*(o-l);return 0===u?0:u}(l,o))<12){let e=Math.round(c/43200);return a.formatDistance("xMonths",e,s)}{let e=n%12,t=Math.trunc(n/12);return e<3?a.formatDistance("aboutXYears",t,s):e<9?a.formatDistance("overXYears",t,s):a.formatDistance("almostXYears",t+1,s)}}(t,$(t,Date.now()),r))})]}),(0,E.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:e.message}),!e.read&&(0,E.jsx)("button",{onClick:()=>n(e.id),className:"mt-2 text-xs font-medium text-primary-600 dark:text-primary-400 hover:underline",children:"Marcar como leída"})]})]})},e.id)})})}),r.length>0&&(0,E.jsx)("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 text-center",children:(0,E.jsx)("button",{onClick:t,className:"text-sm font-medium text-primary-600 dark:text-primary-400 hover:underline",children:"Cerrar"})})]})},S=w("acw62"),tM=({onGetStarted:e})=>{let[t,r]=(0,S.useState)("home");return(0,E.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50 dark:from-slate-900 dark:to-primary-900/30 text-slate-800 dark:text-slate-200",children:[(0,E.jsx)("nav",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm shadow-sm sticky top-0 z-10",children:(0,E.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,E.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)("div",{className:"flex-shrink-0",children:(0,E.jsx)("h1",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:"HouseZen"})}),(0,E.jsx)("div",{className:"hidden md:block",children:(0,E.jsxs)("div",{className:"ml-10 flex items-baseline space-x-4",children:[(0,E.jsx)("button",{onClick:()=>r("home"),className:`px-3 py-2 rounded-md text-sm font-medium ${"home"===t?"text-primary-600 dark:text-primary-400":"text-slate-600 dark:text-slate-300 hover:text-primary-500 dark:hover:text-primary-400"}`,children:"Inicio"}),(0,E.jsx)("button",{onClick:()=>r("features"),className:`px-3 py-2 rounded-md text-sm font-medium ${"features"===t?"text-primary-600 dark:text-primary-400":"text-slate-600 dark:text-slate-300 hover:text-primary-500 dark:hover:text-primary-400"}`,children:"Características"}),(0,E.jsx)("button",{onClick:()=>r("about"),className:`px-3 py-2 rounded-md text-sm font-medium ${"about"===t?"text-primary-600 dark:text-primary-400":"text-slate-600 dark:text-slate-300 hover:text-primary-500 dark:hover:text-primary-400"}`,children:"Acerca de"})]})})]}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)(ef,{className:"flex"}),(0,E.jsx)("button",{onClick:e,className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded-lg transition-transform hover:scale-105",children:"Comenzar"})]})]})})}),"home"===t&&(0,E.jsx)("section",{className:"py-12 sm:py-20",children:(0,E.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,E.jsxs)("div",{className:"lg:grid lg:grid-cols-12 lg:gap-8",children:[(0,E.jsxs)("div",{className:"sm:text-center md:max-w-2xl md:mx-auto lg:col-span-6 lg:text-left",children:[(0,E.jsxs)("h1",{children:[(0,E.jsx)("span",{className:"block text-sm font-semibold uppercase tracking-wide text-primary-600 dark:text-primary-400",children:"Organiza tu hogar"}),(0,E.jsxs)("span",{className:"mt-1 block text-4xl tracking-tight font-extrabold sm:text-5xl xl:text-6xl",children:[(0,E.jsx)("span",{className:"block text-slate-900 dark:text-white",children:"Simplifica la gestión"}),(0,E.jsx)("span",{className:"block text-primary-600 dark:text-primary-400",children:"de tareas del hogar"})]})]}),(0,E.jsx)("p",{className:"mt-3 text-base text-slate-600 dark:text-slate-300 sm:mt-5 sm:text-xl lg:text-lg xl:text-xl",children:"HouseZen te ayuda a organizar las tareas domésticas, asignarlas a los miembros de tu hogar y hacer un seguimiento de su progreso. Olvídate de las discusiones sobre quién hace qué."}),(0,E.jsxs)("div",{className:"mt-8 sm:max-w-lg sm:mx-auto sm:text-center lg:text-left lg:mx-0",children:[(0,E.jsx)("button",{onClick:e,className:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 md:py-4 md:text-lg md:px-10",children:"Comenzar ahora"}),(0,E.jsx)("p",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:"Regístrate en menos de 1 minutos y comienza a organizar tu hogar."})]})]}),(0,E.jsx)("div",{className:"mt-12 relative sm:max-w-lg sm:mx-auto lg:mt-0 lg:max-w-none lg:mx-0 lg:col-span-6 lg:flex lg:items-center",children:(0,E.jsx)("div",{className:"relative mx-auto w-full rounded-lg shadow-lg lg:max-w-md",children:(0,E.jsxs)("div",{className:"relative block w-full bg-white dark:bg-slate-800 rounded-lg overflow-hidden",children:[(0,E.jsx)("div",{className:"max-w-5xl mx-auto mt-10",children:(0,E.jsx)("img",{className:"w-full rounded-lg shadow-lg",src:"https://i.imgur.com/TEMEujo.png",alt:"Captura de pantalla de HouseZen"})}),(0,E.jsx)("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center",children:(0,E.jsxs)("svg",{className:"h-20 w-20 text-primary-500",fill:"currentColor",viewBox:"0 0 84 84",children:[(0,E.jsx)("circle",{opacity:"0.9",cx:"42",cy:"42",r:"42",fill:"white"}),(0,E.jsx)("path",{d:"M55 42L35 55V29L55 42Z",fill:"currentColor"})]})})]})})})]})})}),"features"===t&&(0,E.jsx)("section",{className:"py-12 bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:(0,E.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,E.jsxs)("div",{className:"lg:text-center",children:[(0,E.jsx)("h2",{className:"text-base text-primary-600 dark:text-primary-400 font-semibold tracking-wide uppercase",children:"Características"}),(0,E.jsx)("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-slate-900 dark:text-white sm:text-4xl",children:"Todo lo que necesitas para organizar tu hogar"}),(0,E.jsx)("p",{className:"mt-4 max-w-2xl text-xl text-slate-600 dark:text-slate-300 lg:mx-auto",children:"HouseZen ofrece todas las herramientas necesarias para gestionar las tareas domésticas de forma eficiente y justa."})]}),(0,E.jsx)("div",{className:"mt-10",children:(0,E.jsxs)("div",{className:"space-y-10 md:space-y-0 md:grid md:grid-cols-2 md:gap-x-8 md:gap-y-10",children:[(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white",children:(0,E.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,E.jsxs)("div",{className:"ml-16",children:[(0,E.jsx)("h3",{className:"text-lg leading-6 font-medium text-slate-900 dark:text-white",children:"Gestión de tareas"}),(0,E.jsx)("p",{className:"mt-2 text-base text-slate-600 dark:text-slate-300",children:"Crea, asigna y haz seguimiento de tareas domésticas. Establece fechas límite y periodicidad para tareas recurrentes."})]})]}),(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white",children:(0,E.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),(0,E.jsxs)("div",{className:"ml-16",children:[(0,E.jsx)("h3",{className:"text-lg leading-6 font-medium text-slate-900 dark:text-white",children:"Múltiples hogares"}),(0,E.jsx)("p",{className:"mt-2 text-base text-slate-600 dark:text-slate-300",children:"Gestiona varios hogares y añade a todos los miembros. Ideal para familias, compañeros de piso o segundas residencias."})]})]}),(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white",children:(0,E.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,E.jsxs)("div",{className:"ml-16",children:[(0,E.jsx)("h3",{className:"text-lg leading-6 font-medium text-slate-900 dark:text-white",children:"Estadísticas"}),(0,E.jsx)("p",{className:"mt-2 text-base text-slate-600 dark:text-slate-300",children:"Visualiza quién está haciendo qué con gráficos detallados. Asegúrate de que la carga de trabajo se distribuye de forma equitativa."})]})]}),(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("div",{className:"absolute flex items-center justify-center h-12 w-12 rounded-md bg-primary-500 text-white",children:(0,E.jsx)("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),(0,E.jsxs)("div",{className:"ml-16",children:[(0,E.jsx)("h3",{className:"text-lg leading-6 font-medium text-slate-900 dark:text-white",children:"Notificaciones"}),(0,E.jsx)("p",{className:"mt-2 text-base text-slate-600 dark:text-slate-300",children:"Recibe recordatorios de tareas pendientes y notificaciones cuando alguien completa una tarea asignada."})]})]})]})})]})}),"about"===t&&(0,E.jsx)("section",{className:"py-12",children:(0,E.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,E.jsxs)("div",{className:"lg:text-center",children:[(0,E.jsx)("h2",{className:"text-base text-primary-600 dark:text-primary-400 font-semibold tracking-wide uppercase",children:"Acerca de"}),(0,E.jsx)("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-slate-900 dark:text-white sm:text-4xl",children:"¿Por qué HouseZen?"}),(0,E.jsx)("p",{className:"mt-4 max-w-2xl text-xl text-slate-600 dark:text-slate-300 lg:mx-auto",children:"HouseZen nació de la necesidad de resolver un problema común en todos los hogares: la organización de las tareas domésticas."})]}),(0,E.jsx)("div",{className:"mt-10",children:(0,E.jsxs)("div",{className:"prose prose-primary dark:prose-invert mx-auto lg:max-w-none",children:[(0,E.jsx)("p",{children:"Todos hemos vivido situaciones en las que no está claro quién debe hacer qué en casa, o donde parece que siempre son las mismas personas las que acaban haciendo la mayoría de las tareas. HouseZen resuelve este problema proporcionando una plataforma clara y transparente para la gestión de tareas domésticas."}),(0,E.jsx)("p",{children:"Con HouseZen, puedes:"}),(0,E.jsxs)("ul",{children:[(0,E.jsx)("li",{children:"Crear y asignar tareas a los miembros del hogar"}),(0,E.jsx)("li",{children:"Establecer recordatorios y fechas límite"}),(0,E.jsx)("li",{children:"Ver estadísticas sobre quién está haciendo qué"}),(0,E.jsx)("li",{children:"Recibir notificaciones cuando las tareas se completan"}),(0,E.jsx)("li",{children:"Gestionar múltiples hogares (ideal para familias con segundas residencias)"})]}),(0,E.jsx)("p",{children:"Nuestra misión es hacer que la convivencia sea más fácil y justa para todos, eliminando las discusiones sobre las tareas domésticas y proporcionando una herramienta que ayude a distribuir el trabajo de forma equitativa."}),(0,E.jsx)("hr",{className:"my-8"}),(0,E.jsx)("h3",{className:"text-center text-lg font-semibold mb-4",children:"¿Qué viene después?"}),(0,E.jsx)("p",{className:"text-center max-w-xl mx-auto mb-6",children:"En futuras versiones, planeamos implementar un sistema de puntos que los miembros del hogar podrán ganar al completar tareas. Estos puntos se podrán canjear por recompensas personalizadas, diseñadas especialmente para cada familia, incentivando la colaboración y haciendo que las tareas del hogar sean más divertidas y motivadoras."}),(0,E.jsx)("div",{className:"mt-8 flex justify-center",children:(0,E.jsx)("img",{className:"rounded-lg shadow-lg max-w-full h-auto",src:"https://via.placeholder.com/800x400/3b82f6/FFFFFF?text=Equipo+HouseZen",alt:"Equipo de HouseZen"})})]})})]})}),(0,E.jsx)("section",{className:"py-12 bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:(0,E.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,E.jsxs)("div",{className:"lg:text-center",children:[(0,E.jsx)("h2",{className:"text-base text-primary-600 dark:text-primary-400 font-semibold tracking-wide uppercase",children:"Testimonios"}),(0,E.jsx)("p",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-slate-900 dark:text-white sm:text-4xl",children:"Lo que dicen nuestros usuarios"})]}),(0,E.jsx)("div",{className:"mt-10",children:(0,E.jsxs)("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-3",children:[(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800 shadow-lg rounded-lg p-6",children:[(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)("img",{className:"h-12 w-12 rounded-full",src:"https://via.placeholder.com/150",alt:"Avatar"}),(0,E.jsxs)("div",{className:"ml-4",children:[(0,E.jsx)("h4",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Nombre de reseñador"}),(0,E.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Mi amigo :3"})]})]}),(0,E.jsx)("p",{className:"mt-4 text-slate-600 dark:text-slate-300",children:'"AQUI IRA UNA DE VUESTRAS RESEÑAS"'})]}),(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800 shadow-lg rounded-lg p-6",children:[(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)("img",{className:"h-12 w-12 rounded-full",src:"https://via.placeholder.com/150",alt:"Avatar"}),(0,E.jsxs)("div",{className:"ml-4",children:[(0,E.jsx)("h4",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"¿De quien?"}),(0,E.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Gracias por probar la app"})]})]}),(0,E.jsx)("p",{className:"mt-4 text-slate-600 dark:text-slate-300",children:'"Otra reseñita"'})]}),(0,E.jsxs)("div",{className:"bg-white dark:bg-slate-800 shadow-lg rounded-lg p-6",children:[(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)("img",{className:"h-12 w-12 rounded-full",src:"https://via.placeholder.com/150",alt:"Avatar"}),(0,E.jsxs)("div",{className:"ml-4",children:[(0,E.jsx)("h4",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Sois los mejores"}),(0,E.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Espero que os guste"})]})]}),(0,E.jsx)("p",{className:"mt-4 text-slate-600 dark:text-slate-300",children:'"Preparad tambien esta reseñita"'})]})]})})]})}),(0,E.jsx)("section",{className:"py-12",children:(0,E.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,E.jsx)("div",{className:"bg-primary-700 dark:bg-primary-800 rounded-lg shadow-xl overflow-hidden",children:(0,E.jsx)("div",{className:"px-6 py-12 sm:px-12 lg:py-16 lg:pr-0 xl:py-20 xl:px-20",children:(0,E.jsxs)("div",{className:"lg:self-center",children:[(0,E.jsxs)("h2",{className:"text-3xl font-extrabold text-white sm:text-4xl",children:[(0,E.jsx)("span",{className:"block",children:"¿Listo para simplificar"}),(0,E.jsx)("span",{className:"block",children:"la gestión de tu hogar?"})]}),(0,E.jsx)("p",{className:"mt-4 text-lg leading-6 text-primary-200",children:"Regístrate hoy y comienza a disfrutar de un hogar más organizado y una convivencia más armoniosa."}),(0,E.jsx)("button",{onClick:e,className:"mt-8 bg-white border border-transparent rounded-md shadow px-6 py-3 inline-flex items-center text-base font-medium text-primary-600 hover:bg-primary-50",children:"Comenzar ahora"})]})})})})}),(0,E.jsx)("footer",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm",children:(0,E.jsxs)("div",{className:"max-w-7xl mx-auto py-12 px-4 overflow-hidden sm:px-6 lg:px-8",children:[(0,E.jsxs)("nav",{className:"-mx-5 -my-2 flex flex-wrap justify-center",children:[(0,E.jsx)("div",{className:"px-5 py-2",children:(0,E.jsx)("a",{href:"#",onClick:e=>e.preventDefault(),className:"text-base text-slate-600 dark:text-slate-300 hover:text-primary-600 dark:hover:text-primary-400",children:"Términos y condiciones"})}),(0,E.jsx)("div",{className:"px-5 py-2",children:(0,E.jsx)("a",{href:"https://www.housezen.site/privacy-policy.html",target:"_blank",rel:"noopener noreferrer",className:"text-base text-slate-600 dark:text-slate-300 hover:text-primary-600 dark:hover:text-primary-400",children:"Política de privacidad"})}),(0,E.jsx)("div",{className:"px-5 py-2",children:(0,E.jsx)("a",{href:"mailto:miguelrs@housezen.site",className:"text-base text-slate-600 dark:text-slate-300 hover:text-primary-600 dark:hover:text-primary-400",children:"Contacto"})})]}),(0,E.jsxs)("p",{className:"mt-8 text-center text-base text-slate-500 dark:text-slate-400",children:["© ",new Date().getFullYear()," HouseZen. Todos los derechos reservados."]})]})})]})},D=w("e0EYX");const tU=({onLogin:e,onRegister:t,onResetPassword:r,onGoogleLogin:n,onBackToHome:a})=>{let[i,s]=(0,S.useState)(!0),[o,l]=(0,S.useState)(!1),[u,c]=(0,S.useState)(""),[d,h]=(0,S.useState)(""),[f,p]=(0,S.useState)(""),[m,g]=(0,S.useState)(""),[y,v]=(0,S.useState)(""),[b,x]=(0,S.useState)(!1),[w,k]=(0,S.useState)(!1),N=async n=>{let a;n.preventDefault(),g(""),v(""),x(!0),a=o?await r(d):i?await e(d,f):await t(u,d,f),x(!1),a.success?v(a.message):g(a.message)};return(0,E.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:(0,E.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[a&&(0,E.jsx)("div",{className:"flex justify-start",children:(0,E.jsxs)("button",{onClick:a,className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Volver al inicio"]})}),(0,E.jsx)("h1",{className:"text-3xl font-bold text-center text-primary-600 dark:text-primary-400",children:"HouseZen"}),(0,E.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[!i&&!o&&(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 block",children:"Nombre"}),(0,E.jsx)("input",{type:"text",value:u,onChange:e=>c(e.target.value),maxLength:16,required:!0,className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded mt-1"}),(0,E.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[u.length,"/16 caracteres"]})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 block",children:"Email"}),(0,E.jsx)("input",{type:"email",name:"username",value:d,onChange:e=>h(e.target.value),required:!0,className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded mt-1"})]}),!o&&(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"text-sm font-bold text-gray-600 dark:text-gray-300 block",children:"Contraseña"}),(0,E.jsx)("input",{type:"password",value:f,onChange:e=>p(e.target.value),required:!0,className:"w-full p-2 border border-gray-300 dark:border-slate-600 dark:bg-slate-700 rounded mt-1"})]}),m&&(0,E.jsx)("p",{className:"text-red-500 text-sm",children:m}),y&&(0,E.jsx)("p",{className:"text-green-500 text-sm",children:y}),(0,E.jsx)("button",{type:"submit",disabled:b,className:"w-full py-2 px-4 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-bold disabled:bg-primary-300",children:b?"Procesando...":o?"Recuperar Contraseña":i?"Iniciar Sesión":"Registrarse"})]}),n&&(0,E.jsxs)("div",{className:"relative my-4",children:[(0,E.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,E.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-slate-600"})}),(0,E.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,E.jsx)("span",{className:"px-2 bg-white dark:bg-slate-800 text-gray-500 dark:text-gray-400",children:"O"})})]}),n&&(0,E.jsxs)("button",{onClick:async()=>{g(""),v(""),k(!0);try{let e=await n();e.success||g(e.message)}catch(e){g("No se pudo completar el inicio de sesión con Google. Por favor, inténtalo de nuevo."),console.error("Error en AuthPage al iniciar sesión con Google:",e)}finally{k(!1)}},disabled:w,className:"w-full flex items-center justify-center gap-2 py-2 px-4 bg-white hover:bg-gray-100 dark:bg-slate-700 dark:hover:bg-slate-600 text-gray-700 dark:text-white border border-gray-300 dark:border-slate-600 rounded-md font-medium disabled:opacity-50",children:[(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"24px",height:"24px",children:[(0,E.jsx)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,E.jsx)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,E.jsx)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,E.jsx)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),w?"Procesando...":"Continuar con Google"]}),(0,E.jsxs)("div",{className:"flex flex-col space-y-2",children:[!o&&(0,E.jsx)("button",{onClick:()=>{s(!i),g(""),v("")},className:"w-full text-sm text-center text-primary-600 dark:text-primary-400 hover:underline",children:i?"¿No tienes cuenta? Regístrate":"¿Ya tienes cuenta? Inicia sesión"}),(0,E.jsx)("button",{onClick:()=>{l(!o),g(""),v("")},className:"w-full text-sm text-center text-primary-600 dark:text-primary-400 hover:underline",children:o?"Volver al inicio de sesión":"¿Olvidaste tu contraseña?"})]})]})})},tF=document.getElementById("root");if(!tF)throw Error("Could not find root element to mount to");(0,N.createRoot)(tF).render((0,E.jsx)(((h=S)&&h.__esModule?h.default:h).StrictMode,{children:(0,E.jsx)(function(){let e=Y(),{isPremium:t,checkLimit:r}=X(e.currentUser,e.userHomes,e.currentHome,e.tasks),[n,a]=(0,S.useState)(I.DASHBOARD),[i,s]=(0,S.useState)(!1),[o,l]=(0,S.useState)(!1),[u,c]=(0,S.useState)(!1),[d,h]=(0,S.useState)(""),[f,p]=(0,S.useState)(null),[m,g]=(0,S.useState)(null),[y,v]=(0,S.useState)(new Date),[b,x]=(0,S.useState)(()=>localStorage.getItem("theme")||"light"),[w,k]=(0,S.useState)(!0),[N,_]=(0,S.useState)(null),[A,j]=(0,S.useState)(!1),[P,O]=(0,S.useState)(0),[R,L]=(0,S.useState)(null),M=(e,t)=>{_({type:e,text:t}),setTimeout(()=>_(null),5e3)};(0,S.useEffect)(()=>{document.documentElement.classList.toggle("dark","dark"===b),localStorage.setItem("theme",b)},[b]),(0,S.useEffect)(()=>{if("logged-in"===e.authStatus&&D.auth.currentUser&&!D.auth.currentUser.emailVerified){let e=D.auth.currentUser.email?.toLowerCase()||"",t=`lastVerificationEmail_${e}`,r=localStorage.getItem(t);if(r){let e=Date.now()-parseInt(r);e<6e4&&O(Math.ceil((6e4-e)/1e3))}}},[e.authStatus,D.auth.currentUser,D.auth.currentUser?.emailVerified,D.auth.currentUser?.email]),(0,S.useEffect)(()=>{if(D.auth.currentUser&&!D.auth.currentUser.emailVerified){let e=D.auth.currentUser.email?.toLowerCase()||"",t=`lastVerificationEmail_${e}`,r=localStorage.getItem(t);if(r){let e=Date.now()-parseInt(r);e<6e4&&O(Math.ceil((6e4-e)/1e3))}}},[D.auth.currentUser]),(0,S.useEffect)(()=>{if("logged-in"===e.authStatus&&D.auth.currentUser&&!D.auth.currentUser.emailVerified){let e=setInterval(()=>{D.auth.currentUser?.reload().then(()=>{D.auth.currentUser?.emailVerified&&(M("success","¡Correo verificado exitosamente! Bienvenido a HouseZen."),setTimeout(()=>{window.location.reload()},1500))}).catch(e=>{console.error("Error al verificar el estado del correo:",e)})},3e3);return()=>clearInterval(e)}},[e.authStatus,D.auth.currentUser]),(0,S.useEffect)(()=>{let e;return P>0&&(e=setTimeout(()=>{O(e=>e-1)},1e3)),()=>{e&&clearTimeout(e)}},[P]);let U=e=>{let t=r(C.TASKS);if(t.isLimited){h(t.message),l(!0);return}p(null),g(e),s(!0)},F=e=>{p(e),s(!0)},V=async t=>{if("id"in t)await e.updateTask(t.id,t);else{if(t.periodicity!==T.NONE){let e=r(C.PERIODIC_TASKS,t);if(e.isLimited){h(e.message),l(!0);return}}await e.addTask(t)}s(!1),p(null),g(null)},z=async t=>{e.currentUser&&await e.completeTask(t,e.currentUser.id)},B=async(t,r)=>{e.currentUser&&r.status?await e.updateTaskStatus(t,e.currentUser.id,r.status):await e.updateTask(t,r)},H=async(t,r,n,a)=>{await e.updatePeriodicTaskDayAssignment(t,r,n,a)},q=async(t,r,n,a)=>{if(console.log("\uD83C\uDFAF handleUpdatePeriodicTaskDayStatus called:",{taskId:t,dayIndex:r,status:n,selectedDate:a}),e.currentUser){let i=r;if(a){let r=e.tasks.find(e=>e.id===t);if(r&&r.fechaInicio){let e=new Date(r.fechaInicio);e.setHours(0,0,0,0);let t=new Date(a);t.setHours(0,0,0,0);let n=t.getTime()-e.getTime();i=Math.floor(n/864e5),console.log("\uD83D\uDCCA Date calculation:",{startDate:e,targetDate:t,diffTime:n,correctDayIndex:i})}}console.log("\uD83D\uDD27 Calling data.updateTaskStatus:",{taskId:t,userId:e.currentUser.id,status:n,correctDayIndex:i}),await e.updateTaskStatus(t,e.currentUser.id,n,i)}else console.log("❌ No current user found")},$=(t,r)=>e.getPeriodicTaskDayInfo(t,r);return"loading"===e.authStatus?(0,E.jsx)("div",{className:"flex items-center justify-center min-h-screen text-slate-500 dark:text-slate-400",children:"Cargando HouseZen..."}):"logged-in"===e.authStatus&&D.auth.currentUser&&!D.auth.currentUser.emailVerified?(0,E.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-slate-100 dark:bg-slate-900",children:(0,E.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-white dark:bg-slate-800 rounded-lg shadow-md",children:[(0,E.jsx)("h1",{className:"text-3xl font-bold text-center text-primary-600 dark:text-primary-400",children:"HouseZen"}),(0,E.jsxs)("div",{className:"bg-yellow-100 dark:bg-yellow-900/50 border-l-4 border-yellow-500 p-4 rounded",children:[(0,E.jsx)("h2",{className:"text-xl font-bold text-yellow-700 dark:text-yellow-300 mb-2",children:"Pendiente de confirmación"}),(0,E.jsxs)("p",{className:"text-yellow-600 dark:text-yellow-200 mb-4",children:["Por favor, verifica tu correo electrónico para acceder a la aplicación. Hemos enviado un enlace de verificación a tu dirección de correo.",(0,E.jsx)("span",{className:"block mt-2 italic",children:"Nota: El correo puede llegar a la carpeta de spam. Por favor, revisa también allí."})]}),(0,E.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,E.jsx)("button",{onClick:async()=>{try{if(j(!0),D.auth.currentUser){let t=D.auth.currentUser.email?.toLowerCase()||"",r=`lastVerificationEmail_${t}`,n=Date.now();localStorage.setItem(r,n.toString());let a=await e.resendVerificationEmail();a.success?(M("success",a.message),O(60)):(M("error",a.message),(a.message.includes("demasiadas solicitudes")||a.message.includes("too-many-requests"))&&(setTimeout(()=>{M("info","Firebase limita el número de correos que puedes enviar. Por favor, espera unos minutos antes de intentarlo de nuevo.")},1e3),O(300)))}}catch(e){console.error("Error al reenviar correo:",e),M("error","Error al reenviar el correo de verificación.")}finally{j(!1)}},disabled:A||P>0,className:`w-full py-2 px-4 ${A||P>0?"bg-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700"} text-white rounded-md font-bold`,children:A?"Enviando...":P>0?`Reenviar en ${P}s`:"Reenviar correo de verificación"}),(0,E.jsx)("button",{onClick:()=>e.logout(),className:"w-full py-2 px-4 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-md font-bold",children:"Cerrar sesión"})]})]})]})}):"logged-out"===e.authStatus&&w?(0,E.jsx)(tM,{onGetStarted:()=>k(!1)}):"logged-out"===e.authStatus?(0,E.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,E.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white/80 dark:bg-slate-900/80 shadow-md backdrop-blur-sm",children:[(0,E.jsx)("h1",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:"HouseZen"}),(0,E.jsxs)("div",{className:"flex items-center gap-3",children:[(0,E.jsx)(ef,{}),(0,E.jsxs)("button",{onClick:()=>{console.log("Navegando a la web - setShowLanding(true)"),k(!0)},className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-primary-600 dark:text-primary-400 bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-lg hover:bg-primary-100 dark:hover:bg-primary-900/40 hover:text-primary-700 dark:hover:text-primary-300 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:[(0,E.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0 9c-5 0-9-4-9-9m9 9c5 0 9-4 9-9"})}),"Ir a la web"]})]})]}),(0,E.jsx)(tU,{onLogin:e.login,onRegister:e.register,onResetPassword:e.resetPassword,onGoogleLogin:e.googleLogin})]}):e.currentUser?(0,E.jsxs)("div",{className:"min-h-screen flex flex-col font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300",children:[N&&(0,E.jsx)("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-md shadow-lg transition-opacity duration-300 ${"success"===N.type?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"}`,children:N.text}),(0,E.jsx)(ep,{currentUser:e.currentUser,currentHome:e.currentHome,userHomes:e.userHomes,onHomeChange:e.setCurrentHomeId,currentView:n,onViewChange:a,onNewTaskClick:()=>{let e=r(C.TASKS);if(e.isLimited){h(e.message),l(!0);return}p(null),g(y),s(!0)},onLogout:e.logout,theme:b,onToggleTheme:()=>x(e=>"light"===e?"dark":"light"),onNotificationsClick:()=>c(!u),unreadNotifications:e.unreadNotifications?.length||0}),(0,E.jsx)("main",{className:"flex-1 pt-16 pb-24 p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:(()=>{if(!e.currentHome&&"logged-in"===e.authStatus&&e.pendingInvitations.length>0&&n===I.DASHBOARD)return(0,E.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center gap-4",children:[(0,E.jsx)("h2",{className:"text-2xl font-bold",children:"Has sido invitado a una casa"}),(0,E.jsxs)("p",{className:"text-slate-500 dark:text-slate-400",children:["Tienes ",e.pendingInvitations.length," invitación(es) pendiente(s) a la casa",(0,E.jsxs)("span",{className:"font-bold text-primary-600 dark:text-primary-400",children:[" ",e.pendingInvitations[0].homeName]})]}),(0,E.jsx)("button",{onClick:()=>a(I.SETTINGS),className:"mt-4 py-2 px-4 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-bold",children:"Ver invitaciones"})]});if(!e.currentHome&&"logged-in"===e.authStatus&&0===e.userHomes.length&&0===e.pendingInvitations.length&&n===I.DASHBOARD)return(0,E.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center gap-6 max-w-2xl mx-auto",children:(0,E.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-8 rounded-lg border border-blue-200 dark:border-blue-800",children:[(0,E.jsx)("h2",{className:"text-3xl font-bold text-blue-800 dark:text-blue-200 mb-4",children:"¡Bienvenido a HouseZen! \uD83C\uDFE0"}),(0,E.jsx)("p",{className:"text-lg text-blue-700 dark:text-blue-300 mb-6",children:"Para comenzar a usar la aplicación, necesitas tener acceso a un hogar."}),(0,E.jsxs)("div",{className:"space-y-4 text-blue-600 dark:text-blue-400",children:[(0,E.jsxs)("p",{className:"flex items-center justify-center gap-2",children:[(0,E.jsx)("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,E.jsx)("strong",{children:"Crea tu propio hogar"})," y comienza a gestionar tareas familiares"]}),(0,E.jsxs)("p",{className:"flex items-center justify-center gap-2",children:[(0,E.jsx)("span",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,E.jsx)("strong",{children:"Espera una invitación"})," de un familiar o compañero de casa"]})]}),(0,E.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-8 justify-center",children:[(0,E.jsx)("button",{onClick:()=>a(I.SETTINGS),className:"py-3 px-6 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-bold transition-colors",children:"Crear mi hogar"}),(0,E.jsx)("button",{onClick:()=>a(I.SETTINGS),className:"py-3 px-6 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-md font-bold transition-colors",children:"Ver configuración"})]})]})});switch(n){case I.STATS:if(!e.currentHome)return(0,E.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center gap-4",children:[(0,E.jsx)("h2",{className:"text-2xl font-bold",children:"No tienes ninguna casa activa"}),(0,E.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Debes crear una casa o aceptar una invitación para poder ver estadísticas."})]});return(0,E.jsx)(e_,{users:e.users,getStats:e.getStats,currentHome:e.currentHome,isPremium:t});case I.SETTINGS:return(0,E.jsx)(eO,{...e,setCurrentHomeId:e.setCurrentHomeId,onViewChange:a,onLimitReached:e=>{h(e),l(!0)},deleteAccount:e.deleteAccount});case I.SUBSCRIPTION:return(0,E.jsx)(e5,{onViewChange:a});case I.SUCCESS:return(0,E.jsx)(tm,{onViewChange:a});case I.DASHBOARD:default:if(!e.currentHome)return(0,E.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center gap-4",children:[(0,E.jsx)("h2",{className:"text-2xl font-bold",children:"No tienes ninguna casa activa"}),(0,E.jsx)("p",{className:"text-slate-500 dark:text-slate-400",children:"Debes crear una casa o aceptar una invitación para poder gestionar tareas."})]});return(0,E.jsx)(eE,{tasks:e.tasksForCurrentHome,users:e.users,currentUser:e.currentUser,allTasks:e.tasks,onEditTask:F,onDeleteTask:e.deleteTask,onCompleteTask:z,onUpdateTaskStatus:B,onNewTask:U,isPremium:t,onUpdatePeriodicTaskDayAssignment:H,onUpdatePeriodicTaskDayStatus:q,getPeriodicTaskDayInfo:$,onDateChange:v})}})()}),e.currentHome&&(0,E.jsx)(eg,{isOpen:i,onClose:()=>s(!1),children:(0,E.jsx)(ty,{onSave:V,onCancel:()=>s(!1),task:f,homeId:e.currentHome.id,members:e.membersOfCurrentHome,currentUser:e.currentUser,selectedDate:m,onUpdateDayAssignment:(e,t,r)=>H(f?.id||"",e,t,r),onUpdateDayStatus:(e,t,r)=>q(f?.id||"",e,t,r),getPeriodicTaskDayInfo:$})}),(0,E.jsx)(tv,{isOpen:o,onClose:()=>l(!1),onUpgrade:()=>{l(!1),a(I.SUBSCRIPTION)},reason:d}),(0,E.jsx)(tL,{isOpen:u,onClose:()=>c(!1)})]}):(0,E.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:"Error de autenticación. Por favor, recarga la página."})},{})}));
//# sourceMappingURL=housezen.5c9a05ce.js.map
